* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ========================================
   AUDIIO THEME SYSTEM
   CSS Custom Properties for Theming
   ======================================== */

:root {
  /* ---- Color Mode: Dark (Default) ---- */
  --color-mode: dark;

  /* Background Colors */
  --bg-primary: #0a0a0a;
  --bg-secondary: #141414;
  --bg-tertiary: #1c1c1c;
  --bg-hover: #252525;
  --bg-elevated: #1a1a1a;
  --bg-surface: #121212;
  --bg-overlay: rgba(0, 0, 0, 0.6);

  /* Text Colors - Hierarchy System */
  --text-hero: #ffffff;
  --text-primary: #f0f0f0;
  --text-secondary: #a3a3a3;
  --text-tertiary: #737373;
  --text-muted: #525252;
  --text-inverse: #000000;
  --text-on-accent: #ffffff;

  /* Accent Colors */
  --accent: #1db954;
  --accent-hover: #1ed760;
  --accent-glow: rgba(29, 185, 84, 0.25);
  --accent-soft: rgba(29, 185, 84, 0.1);
  --accent-muted: rgba(29, 185, 84, 0.5);

  /* Border Colors */
  --border-color: rgba(255, 255, 255, 0.08);
  --border-light: rgba(255, 255, 255, 0.12);
  --border-strong: rgba(255, 255, 255, 0.18);

  /* Semantic Colors */
  --color-success: #1db954;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #3b82f6;

  /* ---- Semantic: Energy/Mood Levels ---- */
  --color-energy-calm: #6366f1;
  --color-energy-chill: #8b5cf6;
  --color-energy-balanced: #22c55e;
  --color-energy-upbeat: #f59e0b;
  --color-energy-intense: #ef4444;

  /* ---- Semantic: Plugin Access Types ---- */
  --color-access-metadata: #8b5cf6;
  --color-access-streaming: #ef4444;
  --color-access-lyrics: #3b82f6;
  --color-access-scrobbling: #f59e0b;
  --color-access-network: #3b82f6;
  --color-access-storage: #8b5cf6;
  --color-access-playback: #10b981;
  --color-access-library: #f59e0b;
  --color-access-system: #ef4444;
  --color-access-other: #6b7280;

  /* ---- Semantic: Genre Colors ---- */
  --color-genre-rock: #e74c3c;
  --color-genre-pop: #9b59b6;
  --color-genre-hiphop: #f39c12;
  --color-genre-electronic: #00bcd4;
  --color-genre-rnb: #e91e63;
  --color-genre-jazz: #3498db;
  --color-genre-classical: #8e44ad;
  --color-genre-country: #d68910;
  --color-genre-metal: #607d8b;
  --color-genre-folk: #27ae60;
  --color-genre-blues: #2980b9;
  --color-genre-reggae: #16a085;
  --color-genre-latin: #ff5722;
  --color-genre-world: #795548;
  --color-genre-ambient: #607d8b;

  /* ---- UI Element Colors ---- */
  --color-verified: #60a5fa;
  --color-verified-bg: rgba(96, 165, 250, 0.15);

  /* ---- Semantic Color Variants (with opacity) ---- */
  --color-success-soft: rgba(29, 185, 84, 0.15);
  --color-warning-soft: rgba(245, 158, 11, 0.15);
  --color-error-soft: rgba(239, 68, 68, 0.15);
  --color-info-soft: rgba(59, 130, 246, 0.15);
  --color-purple-soft: rgba(139, 92, 246, 0.15);

  /* ---- Scrollbar Colors ---- */
  --scrollbar-track: transparent;
  --scrollbar-thumb: rgba(255, 255, 255, 0.1);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.2);

  /* ---- Skeleton Animation Colors ---- */
  --skeleton-base: rgba(255, 255, 255, 0.05);
  --skeleton-shimmer: rgba(255, 255, 255, 0.1);

  /* ---- Theme-Aware Overlays (for hover/focus states) ---- */
  --overlay-light: rgba(255, 255, 255, 0.1);
  --overlay-medium: rgba(255, 255, 255, 0.15);
  --overlay-strong: rgba(255, 255, 255, 0.2);
  --overlay-dark: rgba(0, 0, 0, 0.2);
  --overlay-dark-medium: rgba(0, 0, 0, 0.4);
  --overlay-dark-strong: rgba(0, 0, 0, 0.6);

  /* ---- Progress Bar Colors ---- */
  --progress-track: rgba(255, 255, 255, 0.2);
  --progress-track-hover: rgba(255, 255, 255, 0.3);

  /* ---- Library Icon Gradients ---- */
  --gradient-likes: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f97316 100%);
  --gradient-downloads: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
  --gradient-blue-purple: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);

  /* ---- Spacing Scale ---- */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 24px;
  --spacing-2xl: 32px;
  --spacing-3xl: 48px;
  --spacing-4xl: 64px;
  --spacing-5xl: 80px;
  --spacing-6xl: 120px;
  --spacing-7xl: 160px;

  /* Module Gaps (spacing between major UI modules) */
  --gap-module: 10px;
  --gap-section: 40px;
  --gap-section-large: 64px;
  --gap-component: 12px;

  /* ---- Dimensions ---- */
  --sidebar-width: 260px;
  --player-height: 96px;
  --queue-popover-width: 400px;
  --header-height: 64px;

  /* ---- Accent Gradients ---- */
  --gradient-accent: linear-gradient(135deg, #1db954 0%, #1ed760 100%);
  --gradient-purple: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
  --gradient-pink: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
  --gradient-blue: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
  --gradient-orange: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
  --gradient-red: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
  --gradient-teal: linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%);
  --gradient-surface: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);

  /* ---- Z-index Layers ---- */
  --z-base: 1;
  --z-sidebar: 100;
  --z-player-mini: 200;
  --z-dropdown: 500;
  --z-queue-popover: 1000;
  --z-context-menu: 1600;
  --z-player-full: 1800;
  --z-modal: 2000;
  --z-tooltip: 2500;
  --z-notification: 3000;

  /* ---- Border Radius ---- */
  --radius-xs: 4px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-3xl: 32px;
  --radius-full: 9999px;

  /* Module Radius (for major UI containers) */
  --radius-module: var(--radius-xl);
  --radius-card: var(--radius-lg);
  --radius-button: var(--radius-md);

  /* ---- Transitions ---- */
  --transition-micro: 100ms ease;
  --transition-fast: 150ms ease;
  --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms ease;
  --transition-emphasized: 350ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-dramatic: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-player: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-spring: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-bounce: 500ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --transition-smooth: 250ms cubic-bezier(0.25, 0.1, 0.25, 1);

  /* ---- Shadows ---- */
  --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.2);
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.25);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.35);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.45);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.5);
  --shadow-2xl: 0 24px 64px rgba(0, 0, 0, 0.6);
  --shadow-glow: 0 0 20px var(--accent-glow);
  --shadow-glow-strong: 0 0 40px var(--accent-glow);
  --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-module: 0 4px 24px rgba(0, 0, 0, 0.3);
  --shadow-card: 0 2px 12px rgba(0, 0, 0, 0.2);
  --shadow-elevated: 0 8px 40px rgba(0, 0, 0, 0.4);

  /* ---- Glassmorphism ---- */
  --glass-bg: rgba(18, 18, 18, 0.88);
  --glass-bg-subtle: rgba(255, 255, 255, 0.02);
  --glass-bg-light: rgba(30, 30, 30, 0.75);
  --glass-bg-elevated: rgba(35, 35, 35, 0.92);
  --glass-border: rgba(255, 255, 255, 0.06);
  --glass-border-strong: rgba(255, 255, 255, 0.1);
  --glass-border-glow: 0 0 0 1px rgba(255, 255, 255, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.04);
  --glass-blur: blur(20px);
  --glass-blur-strong: blur(40px);
  --glass-blur-xl: blur(80px);

  /* ---- Typography ---- */
  --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;

  /* Font Size Scale - Editorial */
  --font-size-xs: 11px;
  --font-size-sm: 13px;
  --font-size-base: 15px;
  --font-size-lg: 17px;
  --font-size-xl: 20px;
  --font-size-2xl: 24px;
  --font-size-3xl: 32px;
  --font-size-4xl: 44px;
  --font-size-5xl: 56px;
  --font-size-6xl: 72px;

  /* Letter Spacing */
  --letter-spacing-tighter: -0.03em;
  --letter-spacing-tight: -0.02em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.02em;
  --letter-spacing-wider: 0.08em;

  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-black: 900;

  --line-height-none: 1;
  --line-height-tight: 1.15;
  --line-height-snug: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.7;

  /* ---- Dynamic Ambient Colors (set via JS from artwork) ---- */
  --ambient-primary: var(--accent);
  --ambient-secondary: #1a1a1a;
  --ambient-glow: rgba(29, 185, 84, 0.15);
}

/* ========================================
   LIGHT MODE VARIABLES (prepared)
   Apply via [data-theme="light"] on :root
   ======================================== */
[data-theme="light"] {
  --color-mode: light;

  /* Background Colors */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #ebebeb;
  --bg-hover: #e0e0e0;
  --bg-elevated: #ffffff;
  --bg-surface: #fafafa;
  --bg-overlay: rgba(0, 0, 0, 0.4);

  /* Text Colors */
  --text-primary: #1a1a1a;
  --text-secondary: #666666;
  --text-muted: #999999;
  --text-inverse: #ffffff;
  --text-on-accent: #ffffff;

  /* Border Colors */
  --border-color: rgba(0, 0, 0, 0.08);
  --border-light: rgba(0, 0, 0, 0.05);
  --border-strong: rgba(0, 0, 0, 0.15);

  /* Shadows for light mode */
  --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.18);
  --shadow-2xl: 0 24px 64px rgba(0, 0, 0, 0.2);
  --shadow-module: 0 4px 24px rgba(0, 0, 0, 0.08);
  --shadow-card: 0 2px 12px rgba(0, 0, 0, 0.06);
  --shadow-elevated: 0 8px 40px rgba(0, 0, 0, 0.12);
  --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.05);

  /* Glassmorphism for light mode */
  --glass-bg: rgba(255, 255, 255, 0.85);
  --glass-bg-subtle: rgba(0, 0, 0, 0.03);
  --glass-bg-light: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(0, 0, 0, 0.06);
  --glass-border-strong: rgba(0, 0, 0, 0.1);

  /* Gradient adjustments */
  --gradient-surface: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);

  /* Scrollbar for light mode */
  --scrollbar-thumb: rgba(0, 0, 0, 0.15);
  --scrollbar-thumb-hover: rgba(0, 0, 0, 0.25);

  /* Skeleton for light mode */
  --skeleton-base: rgba(0, 0, 0, 0.05);
  --skeleton-shimmer: rgba(0, 0, 0, 0.1);

  /* Overlays for light mode - inverted */
  --overlay-light: rgba(0, 0, 0, 0.05);
  --overlay-medium: rgba(0, 0, 0, 0.08);
  --overlay-strong: rgba(0, 0, 0, 0.12);
  --overlay-dark: rgba(0, 0, 0, 0.1);
  --overlay-dark-medium: rgba(0, 0, 0, 0.2);
  --overlay-dark-strong: rgba(0, 0, 0, 0.3);

  /* Progress bar for light mode */
  --progress-track: rgba(0, 0, 0, 0.15);
  --progress-track-hover: rgba(0, 0, 0, 0.25);
}

html,
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
  overflow: hidden;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Custom selection */
::selection {
  background: var(--accent);
  color: var(--text-inverse);
}

/* Focus visible styling */
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

button:focus-visible,
input:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ========================================
   LAYOUT - Modular Design System
   ======================================== */

.app {
  display: flex;
  height: 100vh;
  padding: var(--gap-module);
  gap: var(--gap-module);
  background: var(--bg-primary);
  transition: background-color 0.3s ease;
}

.main-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-xl);
  padding-bottom: calc(var(--player-height) + var(--spacing-2xl) + var(--gap-module));
  background: var(--gradient-surface);
  border-radius: var(--radius-module);
  border: 1px solid var(--border-color);
  position: relative;
  box-shadow: var(--shadow-module);
  transition: background 0.3s ease, border-color 0.3s ease;
}

.main-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse at 50% 0%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* ========================================
   SIDEBAR - Module Component
   ======================================== */

.sidebar {
  position: relative;
  width: var(--sidebar-width);
  height: 100%; /* Fill the app container height */
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-module);
  display: flex;
  flex-direction: column;
  z-index: var(--z-sidebar);
  flex-shrink: 0;
  overflow: hidden;
  box-shadow: var(--shadow-module);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.sidebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 120px;
  background: linear-gradient(180deg, var(--accent-soft) 0%, transparent 100%);
  pointer-events: none;
}

.sidebar-logo {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  border-bottom: 1px solid var(--border-color);
  position: relative;
  flex-shrink: 0;
}

.sidebar-logo-icon {
  width: 36px;
  height: 36px;
  background: var(--gradient-accent);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 18px;
  box-shadow: var(--shadow-glow);
  transition: transform var(--transition-spring), box-shadow var(--transition-normal);
}

.sidebar-logo:hover .sidebar-logo-icon {
  transform: scale(1.05) rotate(-3deg);
  box-shadow: 0 0 30px var(--accent-glow);
}

.sidebar-logo-text {
  font-size: 22px;
  font-weight: 700;
  letter-spacing: -0.5px;
  background: linear-gradient(90deg, var(--text-primary) 0%, var(--accent) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  transition: background-position var(--transition-slow);
}

.sidebar-logo:hover .sidebar-logo-text {
  background-position: 100% center;
}

.sidebar-nav {
  padding: 12px 8px;
  flex-shrink: 0;
}

.sidebar-section {
  margin-bottom: 12px;
}

.sidebar-section:last-child {
  margin-bottom: 0;
}

.sidebar-section-header {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  padding: 4px 12px 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.sidebar-nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  text-align: left;
  position: relative;
  overflow: hidden;
}

.sidebar-nav-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 0;
  background: var(--accent);
  border-radius: 0 2px 2px 0;
  transition: height var(--transition-fast);
}

.sidebar-nav-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.sidebar-nav-item:hover::before {
  height: 16px;
}

.sidebar-nav-item:active {
  transform: scale(0.98);
}

.sidebar-nav-item.active {
  background: rgba(29, 185, 84, 0.1);
  color: var(--text-primary);
}

.sidebar-nav-item.active::before {
  height: 20px;
}

.sidebar-nav-item.active .sidebar-nav-icon {
  color: var(--accent);
}

.sidebar-nav-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.sidebar-nav-label {
  flex: 1;
}

.sidebar-nav-badge {
  background-color: var(--accent);
  color: var(--bg-primary);
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
}

.sidebar-playlists {
  flex: 1;
  min-height: 0; /* Important for flex child scrolling */
  display: flex;
  flex-direction: column;
  padding: 0 8px;
  padding-bottom: calc(var(--player-height) + var(--gap-module) + 8px); /* Account for player overlay */
  border-top: 1px solid var(--border-color);
  overflow: hidden;
}

.sidebar-playlists.collapsed {
  flex: 0 0 auto;
}

/* Playlists header with toggle */
.sidebar-playlists-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 4px;
  flex-shrink: 0;
}

.sidebar-playlists-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all var(--transition-fast);
}

.sidebar-playlists-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.sidebar-playlists-count {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 6px;
  border-radius: 10px;
  margin-left: 4px;
}

.sidebar-playlist-list {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Custom scrollbar for playlist list */
.sidebar-playlist-list::-webkit-scrollbar {
  width: 6px;
}

.sidebar-playlist-list::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-playlist-list::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 3px;
}

.sidebar-playlist-list::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

.sidebar-add-button {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 18px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
}

.sidebar-add-button:hover {
  background-color: var(--bg-hover);
  color: var(--text-primary);
}

.sidebar-playlist-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border: none;
  background: none;
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-radius: 4px;
  text-align: left;
  width: 100%;
}

.sidebar-playlist-item:hover {
  background-color: var(--bg-hover);
  color: var(--text-primary);
}

.sidebar-playlist-item.active {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
}

.sidebar-playlist-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sidebar-playlist-count {
  font-size: 11px;
  color: var(--text-muted);
}

.sidebar-empty {
  padding: 16px 12px;
  color: var(--text-muted);
  font-size: 13px;
}

/* ========================================
   SIDEBAR - Collapsible State
   ======================================== */

.sidebar-collapse-btn {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  border: none;
  background: var(--bg-hover);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: all var(--transition-normal);
}

.sidebar:hover .sidebar-collapse-btn,
.sidebar.collapsed .sidebar-collapse-btn {
  opacity: 1;
}

.sidebar-collapse-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Collapsed sidebar state */
.sidebar.collapsed {
  width: 72px;
}

.sidebar.collapsed .sidebar-logo {
  justify-content: center;
  padding: var(--spacing-md);
}

.sidebar.collapsed .sidebar-logo-icon {
  margin: 0;
}

.sidebar.collapsed .sidebar-collapse-btn {
  position: relative;
  right: auto;
  top: auto;
  transform: none;
  margin-left: 4px;
}

.sidebar.collapsed .sidebar-nav {
  padding: 16px 4px;
}

.sidebar.collapsed .sidebar-nav-item {
  justify-content: center;
  padding: 12px;
  gap: 0;
}

.sidebar.collapsed .sidebar-nav-item::before {
  left: 0;
  width: 3px;
}

.sidebar.collapsed .sidebar-section {
  margin-bottom: 16px;
}

/* Badge dot for collapsed state */
.sidebar-nav-badge-dot {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  box-shadow: 0 0 6px var(--accent-glow);
}

/* ========================================
   SIDEBAR - Resize Handle
   ======================================== */
.sidebar-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 6px;
  cursor: col-resize;
  background: transparent;
  transition: background-color var(--transition-fast);
  z-index: 10;
}

.sidebar-resize-handle:hover,
.sidebar-resize-handle.dragging {
  background: var(--accent);
}

.sidebar-resize-handle::after {
  content: '';
  position: absolute;
  left: 2px;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 32px;
  background: var(--text-muted);
  border-radius: 1px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.sidebar-resize-handle:hover::after {
  opacity: 0.5;
}

/* ========================================
   SIDEBAR - Folders
   ======================================== */
.sidebar-folder {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: background-color var(--transition-fast);
  position: relative;
}

.sidebar-folder:hover {
  background: var(--bg-hover);
}

.sidebar-folder-toggle {
  background: none;
  border: none;
  color: var(--text-muted);
  padding: 2px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color var(--transition-fast), transform var(--transition-fast);
}

.sidebar-folder-toggle:hover {
  color: var(--text-primary);
}

.sidebar-folder-toggle.expanded {
  transform: rotate(90deg);
}

.sidebar-folder-icon {
  color: var(--text-muted);
  flex-shrink: 0;
}

.sidebar-folder-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sidebar-folder-children {
  padding-left: 12px;
  margin-left: 12px;
  border-left: 1px solid var(--border-color);
}

/* Drop target styling */
.sidebar-folder.drop-target,
.sidebar-playlist-item.drop-target {
  background: rgba(var(--accent-rgb), 0.15);
  outline: 2px dashed var(--accent);
  outline-offset: -2px;
}

/* ========================================
   SIDEBAR - Drag Handles
   ======================================== */
.sidebar-drag-handle {
  opacity: 0;
  cursor: grab;
  color: var(--text-muted);
  transition: opacity var(--transition-fast);
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.sidebar-playlist-item:hover .sidebar-drag-handle,
.sidebar-folder:hover .sidebar-drag-handle {
  opacity: 0.5;
}

.sidebar-drag-handle:hover {
  opacity: 1 !important;
  color: var(--text-primary);
}

.sidebar-drag-handle:active {
  cursor: grabbing;
}

/* Dragging state */
.sidebar-playlist-item.dragging,
.sidebar-folder.dragging {
  opacity: 0.5;
  z-index: 1000;
}

/* ========================================
   SIDEBAR - Playlist Item Updates
   ======================================== */
.sidebar-playlist-item {
  display: flex;
  align-items: center;
  gap: 10px;
}

.sidebar-playlist-cover {
  flex-shrink: 0;
}

/* ========================================
   SIDEBAR - Add Folder Button
   ======================================== */
.sidebar-add-folder-button {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 8px 12px;
  margin-top: 8px;
  background: none;
  border: 1px dashed var(--border-color);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.sidebar-add-folder-button:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(var(--accent-rgb), 0.05);
}

/* ========================================
   SIDEBAR - Collapsed State Improvements
   ======================================== */
/* Hide text content cleanly when collapsed */
.sidebar.collapsed .sidebar-logo-text {
  display: none;
}

.sidebar.collapsed .sidebar-section-header {
  display: none;
}

.sidebar.collapsed .sidebar-nav-label {
  display: none;
}

.sidebar.collapsed .sidebar-folder-name {
  display: none;
}

.sidebar.collapsed .sidebar-folder-toggle {
  display: none;
}

.sidebar.collapsed .sidebar-playlist-name {
  display: none;
}

.sidebar.collapsed .sidebar-playlist-count {
  display: none;
}

.sidebar.collapsed .sidebar-drag-handle {
  display: none;
}

/* Keep playlist section visible with mini thumbnails */
.sidebar.collapsed .sidebar-playlists {
  display: block;
  padding: 0 8px;
}

.sidebar.collapsed .sidebar-playlist-list {
  gap: 4px;
}

.sidebar.collapsed .sidebar-playlist-item {
  justify-content: center;
  padding: 6px;
  gap: 0;
}

.sidebar.collapsed .sidebar-folder {
  justify-content: center;
  padding: 6px;
}

.sidebar.collapsed .sidebar-folder-children {
  padding-left: 0;
  margin-left: 0;
  border-left: none;
}

.sidebar.collapsed .sidebar-add-button,
.sidebar.collapsed .sidebar-add-folder-button {
  display: none;
}

/* Search */
.search-container {
  max-width: 800px;
  margin: 0 auto;
}

.search-bar {
  display: flex;
  gap: 12px;
  margin-bottom: 0;
  width: 100%;
  max-width: 540px;
}

.search-input {
  flex: 1;
  padding: 16px 24px;
  font-size: 15px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  color: var(--text-primary);
  outline: none;
  transition: all var(--transition-normal);
  box-shadow: var(--shadow-inner);
}

.search-input:focus {
  border-color: var(--accent);
  background: var(--bg-elevated);
  box-shadow: var(--shadow-glow), var(--shadow-inner);
}

.search-input:hover:not(:focus) {
  border-color: var(--border-light);
}

.search-input::placeholder {
  color: var(--text-muted);
}

/* Search loading indicator */
.search-bar {
  position: relative;
}

.search-input.searching {
  padding-right: 48px;
}

.search-loading-indicator {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  border: 2px solid var(--bg-tertiary);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* Search bar container - for dropdown positioning */
.search-bar-container {
  position: relative;
  width: 100%;
  max-width: 540px;
}

/* Search Dropdown */
.search-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  right: 0;
  background: var(--bg-elevated);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  max-height: 480px;
  overflow-y: auto;
  z-index: 1000;
  animation: dropdownSlideIn 0.15s ease-out;
}

@keyframes dropdownSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-dropdown-loading,
.search-dropdown-prompt,
.search-dropdown-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 24px;
  color: var(--text-muted);
  font-size: 14px;
}

.search-dropdown-spinner {
  width: 18px;
  height: 18px;
  border: 2px solid var(--border-color);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.search-dropdown-section {
  padding: 8px 0;
  border-bottom: 1px solid var(--border-color);
}

.search-dropdown-section:last-of-type {
  border-bottom: none;
}

.search-dropdown-section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.search-dropdown-suggestion {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 10px 16px;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 14px;
  text-align: left;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.search-dropdown-suggestion:hover {
  background: var(--bg-hover);
}

.search-dropdown-suggestion svg {
  color: var(--text-muted);
}

.search-dropdown-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 8px 16px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.search-dropdown-item:hover {
  background: var(--bg-hover);
}

.search-dropdown-item-art {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  background: var(--bg-tertiary);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--text-muted);
}

.search-dropdown-item-art.artist {
  border-radius: 50%;
}

.search-dropdown-item-art img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.search-dropdown-item-info {
  flex: 1;
  min-width: 0;
}

.search-dropdown-item-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.search-dropdown-item-subtitle {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.search-dropdown-see-all {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 14px 16px;
  background: var(--bg-tertiary);
  border: none;
  border-top: 1px solid var(--border-color);
  color: var(--accent);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.search-dropdown-see-all:hover {
  background: var(--bg-hover);
}

/* Results */
.results-heading {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 16px;
}

.results-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.empty-state {
  text-align: center;
  padding: 48px;
  color: var(--text-secondary);
}

.loading {
  text-align: center;
  padding: 48px;
  color: var(--text-secondary);
}

/* Enhanced Search Results */
.search-results {
  animation: fadeIn 0.3s ease-out;
}

.search-results-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 64px;
  gap: 16px;
  color: var(--text-secondary);
}

.search-loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--bg-tertiary);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.search-results-error {
  color: var(--color-error);
  text-align: center;
  padding: 48px;
}

.search-results-empty {
  text-align: center;
  padding: 64px;
  color: var(--text-secondary);
  font-size: 15px;
}

/* Search Filters */
.search-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  flex-wrap: wrap;
}

.search-filter-btn {
  padding: 10px 18px;
  border-radius: var(--radius-full);
  border: none;
  background: var(--bg-elevated);
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.search-filter-btn:hover {
  background: var(--bg-hover);
}

.search-filter-btn.active {
  background: var(--text-primary);
  color: var(--bg-primary);
}

/* Search Top Section */
.search-top-section {
  display: grid;
  grid-template-columns: 400px 1fr;
  gap: 24px;
  margin-bottom: 40px;
}

@media (max-width: 1000px) {
  .search-top-section {
    grid-template-columns: 1fr;
  }
}

.search-section {
  margin-bottom: 36px;
}

.search-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.search-section-header .search-section-title {
  margin-bottom: 0;
}

.search-section-title {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 20px;
}

.search-see-all {
  display: flex;
  align-items: center;
  gap: 4px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: var(--radius-full);
  transition: all var(--transition-fast);
}

.search-see-all:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

/* Horizontal Scroll Section */
.search-horizontal-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: 12px;
  margin: 0 -8px;
  padding-left: 8px;
  padding-right: 8px;
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.search-horizontal-scroll::-webkit-scrollbar {
  height: 6px;
}

.search-horizontal-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.search-horizontal-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

.search-horizontal-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

/* Cards in horizontal scroll have fixed width */
.search-horizontal-scroll .artist-card {
  flex-shrink: 0;
  width: 160px;
}

.search-horizontal-scroll .album-card {
  flex-shrink: 0;
  width: 170px;
}

/* Top Result Card */
.search-top-result {
  min-width: 0;
}

.top-result-card {
  background: var(--bg-elevated);
  border-radius: var(--radius-lg);
  padding: 20px;
  cursor: pointer;
  position: relative;
  transition: background-color var(--transition-normal);
  display: flex;
  flex-direction: column;
  gap: 16px;
  min-height: 220px;
  overflow: hidden;
}

.top-result-card:hover {
  background: var(--bg-hover);
}

.top-result-image {
  width: 92px;
  height: 92px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: var(--shadow-md);
}

.top-result-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.top-result-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.top-result-info {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.top-result-title {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.top-result-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.top-result-artist {
  color: var(--text-secondary);
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.top-result-type {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  background: var(--bg-tertiary);
  padding: 4px 10px;
  border-radius: var(--radius-full);
}

.top-result-play {
  position: absolute;
  bottom: 20px;
  right: 20px;
  width: 52px;
  height: 52px;
  border-radius: var(--radius-full);
  background: var(--gradient-accent);
  border: none;
  color: var(--text-on-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  transform: translateY(10px);
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-lg);
}

.top-result-card:hover .top-result-play {
  opacity: 1;
  transform: translateY(0);
}

.top-result-play:hover {
  transform: scale(1.08);
  box-shadow: var(--shadow-glow);
}

/* Songs Preview */
.search-songs-preview {
  min-width: 0;
}

.search-songs-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.search-song-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.search-song-row:hover {
  background: var(--bg-elevated);
}

.search-song-row.playing {
  background: var(--bg-tertiary);
}

.search-song-image {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-xs);
  overflow: hidden;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.search-song-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.search-song-info {
  flex: 1;
  min-width: 0;
}

.search-song-title {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}

.search-song-artist {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}

.search-song-duration {
  color: var(--text-muted);
  font-size: 13px;
  flex-shrink: 0;
}

/* Artist Cards */
.search-artists-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 20px;
}

.search-artists-grid.large {
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}

.artist-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0;
  background: transparent;
  border-radius: 0;
  border: none;
  cursor: pointer;
  transition: all var(--transition-normal);
  animation: fadeSlideUp 0.4s ease-out backwards;
  min-width: 0;
  max-width: 100%;
}

.artist-card:hover {
  transform: translateY(-4px);
}

.artist-card-image {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 8px;
  box-shadow: none;
  transition: transform var(--transition-normal);
}

.artist-card:hover .artist-card-image {
  transform: scale(1.02);
}

.artist-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.artist-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.artist-card-info {
  text-align: center;
  min-width: 0;
  max-width: 100%;
}

.artist-card-name {
  font-size: 15px;
  font-weight: 600;
  display: block;
  margin-bottom: 4px;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.artist-card-type {
  font-size: 12px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Album Cards */
.search-albums-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 20px;
}

.search-albums-grid.large {
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}

.album-card {
  background: transparent;
  border-radius: 0;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: all var(--transition-normal);
  animation: fadeSlideUp 0.4s ease-out backwards;
  min-width: 0;
  max-width: 100%;
}

.album-card:hover {
  transform: translateY(-4px);
}

.album-card-image {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 8px;
  box-shadow: none;
}

.album-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-normal);
}

.album-card:hover .album-card-image img {
  transform: scale(1.02);
}

.album-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.album-card-play {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 42px;
  height: 42px;
  border-radius: var(--radius-full);
  background: var(--gradient-accent);
  border: none;
  color: var(--text-on-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  transform: translateY(8px);
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.album-card:hover .album-card-play {
  opacity: 1;
  transform: translateY(0);
}

.album-card-play:hover {
  transform: scale(1.08);
  box-shadow: var(--shadow-glow);
}

.album-card-info {
  min-width: 0;
}

.album-card-title {
  font-size: 14px;
  font-weight: 600;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.album-card-artist {
  font-size: 13px;
  color: var(--text-secondary);
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-card-year {
  font-size: 12px;
  color: var(--text-muted);
  display: block;
  margin-top: 2px;
}

/* Search views */
.search-tracks-view,
.search-artists-view,
.search-albums-view {
  animation: fadeIn 0.3s ease-out;
}

/* Track Row */
.track-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color var(--transition-fast), transform var(--transition-fast);
  min-width: 0;
  overflow: hidden;
}

.track-row:hover {
  background-color: var(--bg-hover);
}

.track-row:active {
  transform: scale(0.99);
}

.track-row.playing {
  background-color: var(--bg-tertiary);
}

.track-number {
  width: 24px;
  text-align: center;
  color: var(--text-muted);
  font-size: 14px;
}

.track-artwork {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-xs);
  background-color: var(--bg-tertiary);
  object-fit: cover;
}

.track-artwork-placeholder {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-xs);
  background-color: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.track-info {
  flex: 1;
  min-width: 0;
}

.track-title {
  font-size: 16px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-artist {
  font-size: 14px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-duration {
  color: var(--text-muted);
  font-size: 14px;
}

/* ========================================
   PLAYER - Module Component
   ======================================== */

.player {
  position: fixed;
  bottom: var(--gap-module);
  left: var(--gap-module);
  right: var(--gap-module);
  height: var(--player-height);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur-strong);
  -webkit-backdrop-filter: var(--glass-blur-strong);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-module);
  display: flex;
  align-items: center;
  padding: 0 var(--spacing-xl);
  gap: var(--spacing-xl);
  box-shadow: var(--shadow-elevated);
  z-index: var(--z-player-mini);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.player::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg, var(--accent-soft) 0%, transparent 30%, transparent 70%, var(--accent-soft) 100%);
  pointer-events: none;
}

.player-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-md);
  color: var(--text-muted);
}

.player-track {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 280px;
  cursor: pointer;
  border-radius: var(--radius-md);
  padding: 6px;
  margin: -6px;
  transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.player-track:hover {
  background: var(--bg-hover);
}

.player-track:active {
  transform: scale(0.98);
}

.player-artwork {
  width: 60px;
  height: 60px;
  border-radius: var(--radius-sm);
  background-color: var(--bg-tertiary);
  object-fit: cover;
  flex-shrink: 0;
}

.player-track-info {
  min-width: 0;
}

.player-track-title {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.player-track-title.clickable {
  cursor: pointer;
  transition: color var(--transition-fast);
}

.player-track-title.clickable:hover {
  color: var(--accent-primary);
  text-decoration: underline;
}

.player-track-artist {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.player-track-artist.clickable {
  cursor: pointer;
  transition: color var(--transition-fast);
}

.player-track-artist.clickable:hover {
  color: var(--text-primary);
  text-decoration: underline;
}

.player-controls {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.player-buttons {
  display: flex;
  align-items: center;
  gap: 16px;
}

.player-button {
  background: none;
  border: none;
  color: var(--text-primary);
  cursor: pointer;
  padding: 8px;
  border-radius: var(--radius-full);
  transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.player-button:hover {
  background-color: var(--bg-hover);
}

.player-button:active {
  transform: scale(0.92);
}

.player-button.play {
  background: var(--gradient-accent);
  color: var(--text-inverse);
  width: 44px;
  height: 44px;
  box-shadow: var(--shadow-glow);
  display: flex;
  align-items: center;
  justify-content: center;
}

.player-button.play:hover {
  transform: scale(1.05);
  background-color: var(--text-primary);
}

.player-button.play:active {
  transform: scale(0.95);
}

.player-button.small {
  padding: 6px;
  color: var(--text-muted);
}

.player-button.small:hover {
  color: var(--text-primary);
}

.player-button.active {
  color: var(--accent);
}

.player-button.active:hover {
  color: var(--accent-hover);
}

.player-extra {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 200px;
  justify-content: flex-end;
}

.progress-container {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  max-width: 600px;
}

.progress-time {
  font-size: 12px;
  color: var(--text-muted);
  width: 40px;
  text-align: center;
}

.progress-bar {
  flex: 1;
  height: 4px;
  background-color: var(--bg-hover);
  border-radius: 2px;
  cursor: pointer;
  position: relative;
  transition: height var(--transition-fast);
}

.progress-bar:hover {
  height: 6px;
}

.progress-bar:active {
  cursor: grabbing;
}

.progress-bar-fill {
  height: 100%;
  background-color: var(--text-primary);
  border-radius: 2px;
  position: relative;
  pointer-events: none;
}

.progress-bar:hover .progress-bar-fill {
  background-color: var(--accent);
}

.player-volume {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 150px;
}

.volume-slider {
  flex: 1;
  height: 4px;
  background-color: var(--bg-hover);
  border-radius: 2px;
  cursor: pointer;
  position: relative;
  transition: height var(--transition-fast);
}

.volume-slider:hover {
  height: 6px;
}

.volume-slider:active {
  cursor: grabbing;
}

.volume-slider-fill {
  height: 100%;
  background-color: var(--text-primary);
  border-radius: 2px;
  pointer-events: none;
  transition: background-color var(--transition-fast);
}

.volume-slider:hover .volume-slider-fill {
  background-color: var(--accent);
}

/* Error state */
.error {
  color: var(--color-error);
  text-align: center;
  padding: 16px;
}

/* Discover Page */
.discover {
  max-width: 1400px;
  margin: 0 auto;
  padding-bottom: 40px;
}

.discover-hero {
  margin-bottom: 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}

.discover-hero-content {
  display: flex;
  align-items: center;
  gap: 20px;
}

.discover-hero-slider {
  flex-shrink: 0;
}

/* Discover Hero Section - Immersive Full-bleed Hero */
.discover-hero-section {
  position: relative;
  width: 100%;
  min-height: 380px;
  border-radius: var(--radius-xl);
  overflow: hidden;
  margin-bottom: var(--spacing-2xl);
  background: var(--bg-elevated);

  /* Force dark mode styling - always light text on artwork backgrounds (Apple approach) */
  --hero-text-primary: #f0f0f0;
  --hero-text-secondary: rgba(255, 255, 255, 0.7);
  --hero-text-muted: rgba(255, 255, 255, 0.5);
  --hero-overlay-light: rgba(255, 255, 255, 0.1);
  --hero-overlay-medium: rgba(255, 255, 255, 0.15);
  --hero-glass-bg: rgba(255, 255, 255, 0.1);
  --hero-glass-border: rgba(255, 255, 255, 0.2);
}

/* Ambient background layer (blurred artwork) */
.discover-hero-section .hero-ambient-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: var(--glass-blur-xl);
  transform: scale(1.2);
  opacity: 0.5;
  transition: opacity var(--transition-emphasized);
}

.discover-hero-section .hero-ambient-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.7) 0%,
    rgba(0, 0, 0, 0.4) 50%,
    rgba(0, 0, 0, 0.6) 100%
  );
}

/* Content grid layout */
.discover-hero-section .hero-content {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--spacing-2xl);
  padding: var(--spacing-2xl);
  align-items: center;
}

/* Large artwork with glass shadow effect */
.discover-hero-section .hero-artwork {
  width: 280px;
  height: 280px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-elevated), 0 0 60px rgba(0, 0, 0, 0.5);
  background: var(--glass-bg-subtle);
  flex-shrink: 0;
  opacity: 0;
  transform: translateY(20px) scale(0.95);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-artwork {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition-delay: 100ms;
}

.discover-hero-section .hero-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.discover-hero-section .hero-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--hero-overlay-light);
  color: var(--hero-text-muted);
}

/* Hero info section */
.discover-hero-section .hero-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  min-width: 0;
}

/* Badge styling */
.discover-hero-section .hero-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--accent);
  color: var(--text-inverse);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: var(--radius-full);
  width: fit-content;
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-badge {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 200ms;
}

/* Dramatic title typography */
.discover-hero-section .hero-title {
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-black);
  letter-spacing: var(--letter-spacing-tight);
  color: var(--text-hero);
  line-height: 1.1;
  margin: 0;
  text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-title {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 300ms;
}

/* Subtitle styling */
.discover-hero-section .hero-subtitle {
  font-size: var(--font-size-lg);
  color: var(--hero-text-secondary);
  margin: 0;
  max-width: 500px;
  line-height: 1.5;
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-subtitle {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 400ms;
}

/* Featured track info */
.discover-hero-section .hero-featured-track {
  font-size: var(--font-size-sm);
  color: var(--hero-text-muted);
  margin: 0;
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-featured-track {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 450ms;
}

/* Action buttons container */
.discover-hero-section .hero-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--transition-emphasized), transform var(--transition-emphasized);
}

.discover-hero-section.is-visible .hero-actions {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 500ms;
}

/* Prominent play button with glow effect */
.discover-hero-section .hero-play-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-xl);
  background: var(--gradient-accent);
  color: var(--text-inverse);
  border: none;
  border-radius: var(--radius-full);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md), 0 0 20px var(--accent-glow);
}

.discover-hero-section .hero-play-btn:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-glow), 0 0 30px var(--accent-glow);
}

.discover-hero-section .hero-play-btn:active {
  transform: scale(0.98);
}

/* Shuffle button */
.discover-hero-section .hero-shuffle-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--hero-glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  color: var(--hero-text-primary);
  border: 1px solid var(--hero-glass-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.discover-hero-section .hero-shuffle-btn:hover {
  background: var(--hero-overlay-medium);
  border-color: var(--hero-text-secondary);
  transform: scale(1.02);
}

.discover-hero-section .hero-shuffle-btn:active {
  transform: scale(0.98);
}

/* Decorative orb */
.discover-hero-section .hero-orb {
  position: absolute;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  right: -100px;
  bottom: -100px;
  pointer-events: none;
  opacity: 0.6;
  z-index: 0;
}

/* Skeleton loading state */
.discover-hero-section .hero-skeleton {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--spacing-2xl);
  padding: var(--spacing-2xl);
  align-items: center;
}

.discover-hero-section .hero-skeleton-artwork {
  width: 280px;
  height: 280px;
  border-radius: var(--radius-lg);
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.discover-hero-section .hero-skeleton-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.discover-hero-section .hero-skeleton-badge {
  width: 100px;
  height: 24px;
  border-radius: var(--radius-full);
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.discover-hero-section .hero-skeleton-title {
  width: 300px;
  height: 48px;
  border-radius: var(--radius-sm);
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  animation-delay: 0.1s;
}

.discover-hero-section .hero-skeleton-subtitle {
  width: 250px;
  height: 24px;
  border-radius: var(--radius-sm);
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  animation-delay: 0.2s;
}

.discover-hero-section .hero-skeleton-actions {
  width: 200px;
  height: 44px;
  border-radius: var(--radius-full);
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  animation-delay: 0.3s;
  margin-top: var(--spacing-md);
}

/* Responsive adjustments */
@media (max-width: 900px) {
  .discover-hero-section .hero-content {
    grid-template-columns: 200px 1fr;
    gap: var(--spacing-xl);
    padding: var(--spacing-xl);
  }

  .discover-hero-section .hero-artwork {
    width: 200px;
    height: 200px;
  }

  .discover-hero-section .hero-title {
    font-size: var(--font-size-3xl);
  }

  .discover-hero-section .hero-skeleton {
    grid-template-columns: 200px 1fr;
    gap: var(--spacing-xl);
    padding: var(--spacing-xl);
  }

  .discover-hero-section .hero-skeleton-artwork {
    width: 200px;
    height: 200px;
  }
}

@media (max-width: 600px) {
  .discover-hero-section {
    min-height: auto;
  }

  .discover-hero-section .hero-content {
    grid-template-columns: 1fr;
    text-align: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
  }

  .discover-hero-section .hero-artwork {
    width: 200px;
    height: 200px;
    margin: 0 auto;
  }

  .discover-hero-section .hero-info {
    align-items: center;
  }

  .discover-hero-section .hero-title {
    font-size: var(--font-size-2xl);
  }

  .discover-hero-section .hero-subtitle {
    font-size: var(--font-size-md);
  }

  .discover-hero-section .hero-actions {
    justify-content: center;
  }

  .discover-hero-section .hero-skeleton {
    grid-template-columns: 1fr;
    text-align: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
  }

  .discover-hero-section .hero-skeleton-artwork {
    width: 200px;
    height: 200px;
    margin: 0 auto;
  }

  .discover-hero-section .hero-skeleton-info {
    align-items: center;
  }
}

.discover-greeting {
  font-size: 40px;
  font-weight: 800;
  letter-spacing: -1px;
  background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: fadeSlideIn 0.5s ease-out;
}

/* Quick Picks Grid */
.discover-quick-picks {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 32px;
}

@media (max-width: 1200px) {
  .discover-quick-picks {
    grid-template-columns: repeat(2, 1fr);
  }
}

.quick-pick-card {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  background: var(--bg-elevated);
  border-radius: var(--radius-md);
  padding: var(--spacing-xs);
  padding-right: var(--spacing-lg);
  cursor: pointer;
  transition: all var(--transition-smooth);
  animation: fadeSlideUp 0.4s ease-out backwards;
  position: relative;
  overflow: hidden;
  border: 1px solid transparent;
  box-shadow: var(--shadow-xs);
}

.quick-pick-card:hover {
  background: var(--bg-hover);
  border-color: var(--border-light);
  box-shadow: var(--shadow-sm);
  transform: translateY(-2px);
}

.quick-pick-card:active {
  transform: scale(0.98);
}

.quick-pick-card.playing {
  background: var(--bg-hover);
  border-color: var(--accent-soft);
}

.quick-pick-image {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-xs);
  overflow: hidden;
  flex-shrink: 0;
}

.quick-pick-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.quick-pick-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.quick-pick-title {
  flex: 1;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.quick-pick-play {
  position: absolute;
  right: 12px;
  width: 38px;
  height: 38px;
  border-radius: var(--radius-full);
  background: var(--gradient-accent);
  border: none;
  color: var(--text-on-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  transform: translateX(8px);
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.quick-pick-card:hover .quick-pick-play {
  opacity: 1;
  transform: translateX(0);
}

.quick-pick-play:hover {
  transform: scale(1.08);
  box-shadow: var(--shadow-glow);
}

.quick-pick-playing {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 16px;
  margin-right: 8px;
}

.playing-bar {
  width: 3px;
  background: var(--accent);
  border-radius: 2px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.playing-bar:nth-child(1) { height: 60%; animation-delay: 0s; }
.playing-bar:nth-child(2) { height: 100%; animation-delay: 0.2s; }
.playing-bar:nth-child(3) { height: 40%; animation-delay: 0.4s; }

@keyframes playingBars {
  0%, 100% { height: 40%; }
  50% { height: 100%; }
}

.discover-sections {
  display: flex;
  flex-direction: column;
  gap: var(--gap-section);
}

.discover-section {
  position: relative;
  animation: fadeSlideUp 0.5s ease-out backwards;
  padding: var(--spacing-lg);
  background: var(--bg-surface);
  border-radius: var(--radius-card);
  border: 1px solid var(--border-color);
}

.discover-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
}

.discover-section-title-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.discover-section-title {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
}

.discover-section-subtitle {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  font-weight: var(--font-weight-normal);
}

.discover-section-personalized-tag {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--accent);
  background: var(--accent-soft);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-full);
}

.discover-section-more {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-full);
  transition: all var(--transition-fast);
}

.discover-section-more:hover {
  color: var(--text-primary);
  background-color: var(--bg-hover);
}

.discover-section-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--spacing-lg);
}

.discover-section-loading,
.discover-section-empty {
  color: var(--text-muted);
  padding: var(--spacing-2xl);
  text-align: center;
}

.discover-loading-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--spacing-lg);
}

.discover-personalized-badge {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--accent);
  background: var(--accent-soft);
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: var(--radius-full);
  animation: fadeIn 0.5s ease-out;
}

/* ========================================
   TRACK CARD - Card Component
   ======================================== */

.track-card {
  position: relative;
  background: transparent;
  border-radius: 0;
  padding: 0;
  cursor: pointer;
  transition: all var(--transition-smooth);
  animation: fadeSlideUp 0.4s ease-out backwards;
  border: none;
  box-shadow: none;
  min-width: 0;
  max-width: 100%;
}

.track-card:hover {
  transform: translateY(-4px);
}

.track-card:active {
  transform: scale(0.98);
}

.track-card.skeleton {
  height: 200px;
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes fadeSlideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateX(-16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.track-card-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius-sm);
  overflow: hidden;
  margin-bottom: var(--spacing-sm);
  background-color: var(--bg-tertiary);
}

.track-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.track-card:hover .track-card-artwork img {
  transform: scale(1.02);
}

.track-card-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: var(--text-muted);
}

.track-card-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.track-card:hover .track-card-overlay {
  opacity: 1;
}

.track-card-play {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-full);
  background: var(--gradient-accent);
  border: none;
  color: var(--text-on-accent);
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-lg);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  transform: translateY(8px);
  opacity: 0;
}

.track-card:hover .track-card-play {
  transform: translateY(0);
  opacity: 1;
}

.track-card-play:hover {
  transform: scale(1.08);
  box-shadow: var(--shadow-glow);
}

.track-card-info {
  min-width: 0;
}

.track-card-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: var(--spacing-xs);
}

.track-card-artist {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-card-like {
  position: absolute;
  top: var(--spacing-sm);
  right: var(--spacing-sm);
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  background-color: var(--bg-overlay);
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  opacity: 0;
  transition: all var(--transition-fast);
}

.track-card:hover .track-card-like,
.track-card-like.liked {
  opacity: 1;
}

.track-card-like:hover {
  color: var(--text-primary);
  transform: scale(1.1);
}

.track-card-like.liked {
  color: var(--accent);
}

/* ========================================
   NEW DISCOVER SECTIONS
   ======================================== */

/* Section wrapper animation */
.discover-section-wrapper {
  animation: fadeSlideUp 0.4s ease-out both;
}

/* ----------------------------------------
   Time Greeting Section
   ---------------------------------------- */
.time-greeting-section {
  position: relative;
  padding: var(--spacing-2xl);
  background: linear-gradient(135deg, var(--bg-elevated), var(--bg-secondary));
  border-radius: var(--radius-xl);
  margin-bottom: var(--spacing-xl);
}

.time-greeting-section .greeting-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.time-greeting-section .greeting-icon {
  font-size: var(--font-size-4xl);
}

.time-greeting-section .greeting-text h2 {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-xs);
}

.time-greeting-section .greeting-text span {
  font-size: var(--font-size-base);
  color: var(--text-secondary);
}

/* ----------------------------------------
   On Repeat Section (Most Played)
   ---------------------------------------- */
.on-repeat-section .on-repeat-grid {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  padding-bottom: var(--spacing-sm);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.on-repeat-card {
  position: relative;
  flex-shrink: 0;
  width: 160px;
  cursor: pointer;
}

.on-repeat-card .on-repeat-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: var(--spacing-sm);
}

.on-repeat-card .on-repeat-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-normal);
}

.on-repeat-card:hover .on-repeat-artwork img {
  transform: scale(1.05);
}

.on-repeat-card .on-repeat-count {
  position: absolute;
  top: var(--spacing-sm);
  left: var(--spacing-sm);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--bg-overlay);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
}

/* ----------------------------------------
   Discover Weekly Section
   ---------------------------------------- */
.discover-weekly-section {
  background: linear-gradient(135deg, #7928ca15, #ff012015);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
}

.discover-weekly-section .discover-weekly-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.discover-weekly-section .discover-weekly-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: linear-gradient(135deg, #7928ca, #ff0120);
  color: white;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: var(--radius-full);
}

/* ----------------------------------------
   Top Mix Section
   ---------------------------------------- */
.top-mix-section .top-mix-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--spacing-lg);
}

.top-mix-card {
  position: relative;
  aspect-ratio: 1;
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  background: var(--bg-secondary);
}

.top-mix-card .top-mix-mosaic {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  height: 100%;
}

.top-mix-card .top-mix-mosaic img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.top-mix-card .top-mix-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 50%, rgba(0,0,0,0.8));
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: var(--spacing-lg);
}

.top-mix-card .top-mix-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
}

/* ----------------------------------------
   Rediscover Section (Old Favorites)
   ---------------------------------------- */
.rediscover-section .rediscover-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--accent-soft);
  color: var(--accent);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  border-radius: var(--radius-full);
  margin-left: var(--spacing-sm);
}

/* ----------------------------------------
   Activity Section (Workout, Study, etc.)
   ---------------------------------------- */
.activity-section .activity-tiles {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
  overflow-x: auto;
  padding-bottom: var(--spacing-sm);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.activity-tile {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  cursor: pointer;
  white-space: nowrap;
  transition: all var(--transition-fast);
}

.activity-tile:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.activity-tile.active {
  background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
  border-color: transparent;
  color: white;
}

.activity-tile .activity-icon {
  font-size: var(--font-size-lg);
}

.activity-tile .activity-name {
  font-weight: var(--font-weight-semibold);
}

/* Activity tracks panel */
.activity-tracks-panel {
  margin-top: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
}

.activity-tracks-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.activity-tracks-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
}

.activity-play-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--accent);
  color: var(--text-on-accent);
  border: none;
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.activity-play-btn:hover {
  background: var(--accent-hover);
  transform: scale(1.02);
}

.activity-tracks-scroll {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  max-height: 300px;
  overflow-y: auto;
}

.activity-track-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.activity-track-item:hover {
  background: var(--bg-hover);
}

.activity-track-artwork {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
}

.activity-track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.activity-track-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.activity-track-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.activity-track-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.activity-track-artist {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ----------------------------------------
   Decade Mix Section (80s, 90s, 2000s)
   ---------------------------------------- */
.decade-mix-section .decade-tabs {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
  overflow-x: auto;
  padding-bottom: var(--spacing-sm);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.decade-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-xl);
  background: var(--bg-secondary);
  border: 2px solid var(--border-color);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  min-width: 100px;
}

.decade-tab:hover {
  border-color: var(--decade-color, var(--accent));
  background: var(--bg-hover);
}

.decade-tab.active {
  border-color: var(--decade-color, var(--accent));
  background: color-mix(in srgb, var(--decade-color, var(--accent)) 15%, transparent);
}

.decade-tab .decade-name {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--decade-color, var(--text-primary));
}

.decade-tab .decade-years {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
  margin-top: var(--spacing-xs);
}

.decade-tracks {
  margin-top: var(--spacing-md);
}

/* ----------------------------------------
   Seasonal Section (Summer, Winter, etc.)
   ---------------------------------------- */
.seasonal-section {
  position: relative;
  overflow: hidden;
  border-radius: var(--radius-xl);
  padding: var(--spacing-2xl);
}

.seasonal-section.spring { background: linear-gradient(135deg, #fce7f3, #d1fae5); }
.seasonal-section.summer { background: linear-gradient(135deg, #fef3c7, #fed7aa); }
.seasonal-section.fall { background: linear-gradient(135deg, #fed7aa, #fca5a5); }
.seasonal-section.winter { background: linear-gradient(135deg, #dbeafe, #e0e7ff); }

.seasonal-section .seasonal-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
}

.seasonal-section .seasonal-icon {
  font-size: var(--font-size-4xl);
}

.seasonal-section .seasonal-title {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
}

/* ----------------------------------------
   Blind Picks Section (High Exploration)
   ---------------------------------------- */
.blind-picks-section {
  position: relative;
  background: var(--bg-secondary);
  border: 1px dashed var(--border-light);
  border-radius: var(--radius-xl);
}

.blind-picks-section .blind-picks-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.blind-picks-section .blind-picks-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--accent), #7c3aed);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xl);
}

.blind-picks-section .blind-picks-info h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--spacing-xs);
}

.blind-picks-section .blind-picks-info span {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

/* ----------------------------------------
   Similar Artists Section Grid
   ---------------------------------------- */
.similar-artists-section .similar-artists-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: var(--spacing-lg);
}

.similar-artist-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  cursor: pointer;
  transition: transform var(--transition-normal);
}

.similar-artist-card:hover {
  transform: translateY(-4px);
}

.similar-artist-card .similar-artist-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius-full);
  overflow: hidden;
  margin-bottom: var(--spacing-sm);
  background: var(--bg-tertiary);
}

.similar-artist-card .similar-artist-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.similar-artist-card .similar-artist-play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-overlay);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.similar-artist-card:hover .similar-artist-play-overlay {
  opacity: 1;
}

.similar-artist-card .similar-artist-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.similar-artist-card .similar-artist-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.similar-artist-card .similar-artist-tracks {
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
}

/* ----------------------------------------
   Discover Horizontal Scroll (CRITICAL FIX)
   ---------------------------------------- */
.discover-horizontal-scroll {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  margin: 0 calc(-1 * var(--spacing-sm));
  padding-left: var(--spacing-sm);
  padding-right: var(--spacing-sm);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.discover-horizontal-scroll::-webkit-scrollbar {
  height: 6px;
}

.discover-horizontal-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.discover-horizontal-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

.discover-horizontal-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

/* Fixed card widths in discover horizontal sections */
.discover-horizontal-scroll .track-card {
  flex-shrink: 0;
  width: 150px;
}

.discover-horizontal-scroll .album-card {
  flex-shrink: 0;
  width: 150px;
}

.discover-horizontal-scroll .artist-card {
  flex-shrink: 0;
  width: 130px;
}

.discover-horizontal-scroll .artist-card.circular {
  width: 120px;
}

/* Skeleton cards for loading states */
.discover-card-skeleton,
.album-card-skeleton,
.artist-card-skeleton {
  flex-shrink: 0;
  width: 150px;
  height: 200px;
  border-radius: var(--radius-lg);
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.artist-card-skeleton.circular {
  width: 120px;
  height: 160px;
}

/* ----------------------------------------
   Large Card Section
   ---------------------------------------- */
.discover-large-card-section {
  padding: var(--spacing-lg);
}

.large-card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--spacing-xl);
}

@media (min-width: 900px) {
  .large-card-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 600px) {
  .large-card-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

.large-track-card {
  position: relative;
  cursor: pointer;
  border-radius: var(--radius-lg);
  overflow: hidden;
  background: var(--bg-secondary);
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
}

.large-track-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-elevated);
}

.large-track-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  overflow: hidden;
}

.large-track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.large-track-card:hover .large-track-artwork img {
  transform: scale(1.05);
}

.large-track-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.large-track-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.large-track-card:hover .large-track-overlay {
  opacity: 1;
}

.large-track-play {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.large-track-play:hover {
  transform: scale(1.1);
}

.large-track-playing-badge {
  position: absolute;
  bottom: 8px;
  right: 8px;
  display: flex;
  gap: 2px;
  align-items: flex-end;
  height: 16px;
  padding: 4px 6px;
  background: var(--accent);
  border-radius: var(--radius-sm);
}

.large-track-playing-badge .playing-bar {
  width: 3px;
  background: var(--text-on-accent);
  border-radius: 1px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.large-track-playing-badge .playing-bar:nth-child(2) {
  animation-delay: 0.2s;
}

.large-track-playing-badge .playing-bar:nth-child(3) {
  animation-delay: 0.4s;
}

.large-track-info {
  padding: 12px;
  min-width: 0;
  overflow: hidden;
}

.large-track-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.large-track-artist {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.large-track-year {
  font-size: 12px;
  color: var(--text-muted);
  display: block;
  margin-top: 4px;
}

.large-card-skeleton {
  aspect-ratio: 1;
  border-radius: var(--radius-lg);
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ----------------------------------------
   Chart List Section (Numbered tracks)
   ---------------------------------------- */
.chart-list-section {
  padding: var(--spacing-lg);
  background: var(--bg-surface);
  border-radius: var(--radius-card);
}

.chart-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.chart-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.chart-item:hover {
  background: var(--bg-hover);
}

.chart-item.playing {
  background: var(--accent-soft);
}

.chart-rank {
  width: 24px;
  font-size: 15px;
  font-weight: 700;
  color: var(--text-muted);
  text-align: center;
  flex-shrink: 0;
}

.chart-item.playing .chart-rank {
  color: var(--accent);
}

.chart-artwork {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
  position: relative;
}

.chart-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.chart-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.chart-playing-indicator {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.chart-playing-indicator .bar {
  width: 3px;
  height: 12px;
  background: var(--accent);
  border-radius: 1px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.chart-playing-indicator .bar:nth-child(2) { animation-delay: 0.2s; }
.chart-playing-indicator .bar:nth-child(3) { animation-delay: 0.4s; }

.chart-info {
  flex: 1;
  min-width: 0;
}

.chart-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chart-artist {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chart-duration {
  font-size: 13px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.chart-explicit {
  font-size: 9px;
  font-weight: 700;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 4px;
  border-radius: 2px;
  margin-left: 6px;
}

/* Chart skeleton */
.chart-item-skeleton {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 12px;
}

.chart-item-skeleton .skeleton-rank {
  width: 24px;
  height: 20px;
  border-radius: 4px;
  background: var(--bg-tertiary);
}

.chart-item-skeleton .skeleton-artwork {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-sm);
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.chart-item-skeleton .skeleton-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.chart-item-skeleton .skeleton-title {
  width: 60%;
  height: 14px;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.chart-item-skeleton .skeleton-artist {
  width: 40%;
  height: 12px;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ----------------------------------------
   Quick Picks Section (Small tile grid)
   ---------------------------------------- */
.quick-picks-section {
  padding: var(--spacing-md);
}

.quick-picks-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}

@media (min-width: 800px) {
  .quick-picks-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (min-width: 1100px) {
  .quick-picks-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

.quick-pick-tile {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  overflow: hidden;
  cursor: pointer;
  transition: background var(--transition-fast), transform var(--transition-fast);
  height: 56px;
}

.quick-pick-tile:hover {
  background: var(--bg-hover);
  transform: scale(1.02);
}

.quick-pick-tile.playing {
  background: var(--accent-soft);
}

.quick-pick-artwork {
  width: 56px;
  height: 56px;
  flex-shrink: 0;
  position: relative;
}

.quick-pick-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.quick-pick-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.quick-pick-info {
  flex: 1;
  min-width: 0;
  padding-right: 12px;
}

.quick-pick-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.quick-pick-playing {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.quick-pick-playing .bar {
  width: 3px;
  height: 14px;
  background: var(--accent);
  border-radius: 1px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.quick-pick-playing .bar:nth-child(2) { animation-delay: 0.2s; }
.quick-pick-playing .bar:nth-child(3) { animation-delay: 0.4s; }

.quick-pick-skeleton {
  height: 56px;
  border-radius: var(--radius-md);
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ----------------------------------------
   Album NEW badge
   ---------------------------------------- */
.album-new-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  font-size: 10px;
  font-weight: 700;
  color: var(--text-on-accent);
  background: var(--accent);
  padding: 3px 6px;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ----------------------------------------
   Masonry Section
   ---------------------------------------- */
.masonry-section .masonry-grid {
  column-count: 3;
  column-gap: 16px;
}

@media (max-width: 1200px) {
  .masonry-section .masonry-grid {
    column-count: 2;
  }
}

@media (max-width: 768px) {
  .masonry-section .masonry-grid {
    column-count: 1;
  }
}

.masonry-card {
  break-inside: avoid;
  margin-bottom: 16px;
  border-radius: var(--radius-lg);
  background: var(--bg-secondary);
  overflow: hidden;
  cursor: pointer;
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  animation: fadeSlideUp 0.4s ease-out both;
}

.masonry-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.masonry-card--small .masonry-card-artwork { aspect-ratio: 1; }
.masonry-card--medium .masonry-card-artwork { aspect-ratio: 4/3; }
.masonry-card--large .masonry-card-artwork { aspect-ratio: 16/10; }

.masonry-card-artwork {
  position: relative;
  width: 100%;
  overflow: hidden;
}

.masonry-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.masonry-card:hover .masonry-card-artwork img {
  transform: scale(1.05);
}

.masonry-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.masonry-card-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.masonry-card:hover .masonry-card-overlay {
  opacity: 1;
}

.masonry-card-play {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: scale(0.8);
  transition: transform var(--transition-fast);
}

.masonry-card:hover .masonry-card-play {
  transform: scale(1);
}

.masonry-card-playing {
  position: absolute;
  bottom: 8px;
  right: 8px;
  display: flex;
  gap: 2px;
  align-items: flex-end;
  height: 16px;
}

.masonry-card-info {
  padding: 12px;
}

.masonry-card-title {
  display: block;
  font-weight: 500;
  font-size: 14px;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.masonry-card-artist {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 2px;
}

/* ----------------------------------------
   Split Feature Section
   ---------------------------------------- */
.split-feature-section .split-feature-container {
  display: flex;
  gap: 16px;
  align-items: stretch;
}

.split-card {
  flex: 1;
  position: relative;
  border-radius: var(--radius-xl);
  padding: 24px;
  min-height: 280px;
  display: flex;
  flex-direction: column;
  cursor: pointer;
  overflow: hidden;
  transition: transform var(--transition-normal);

  /* Force dark mode styling - always light text on colored backgrounds (Apple approach) */
  --sc-text-primary: #f0f0f0;
  --sc-text-secondary: rgba(255, 255, 255, 0.7);
  --sc-text-muted: rgba(255, 255, 255, 0.5);
  --sc-bg-tertiary: rgba(255, 255, 255, 0.1);
}

.split-card:hover {
  transform: scale(1.02);
}

.split-card-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--sc-text-secondary);
  margin-bottom: 16px;
}

.split-card-artwork {
  width: 120px;
  height: 120px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin-bottom: 16px;
  box-shadow: var(--shadow-lg);
}

.split-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.split-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--sc-bg-tertiary);
  color: var(--sc-text-muted);
}

.split-card-info {
  flex: 1;
}

.split-card-title {
  font-size: 20px;
  font-weight: 700;
  margin: 0 0 4px;
  color: var(--sc-text-primary);
}

.split-card-artist {
  font-size: 14px;
  color: var(--sc-text-secondary);
  margin: 0;
}

.split-card-play {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  border-radius: 50px;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  font-weight: 600;
  cursor: pointer;
  margin-top: auto;
  width: fit-content;
}

.split-card-playing {
  position: absolute;
  top: 24px;
  right: 24px;
  display: flex;
  gap: 2px;
  align-items: flex-end;
  height: 20px;
}

.split-feature-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 60px;
  flex-shrink: 0;
}

.split-feature-divider-text {
  font-size: 18px;
  font-weight: 800;
  color: var(--text-muted);
  background: var(--bg-secondary);
  padding: 12px;
  border-radius: var(--radius-md);
}

/* ----------------------------------------
   Stacked Cards Section
   ---------------------------------------- */
.stacked-cards-section .stacked-cards-container {
  display: flex;
  align-items: center;
  gap: 24px;
  padding: 20px 0;
}

.stacked-cards-stack {
  flex: 1;
  position: relative;
  height: 320px;
  display: flex;
  justify-content: center;
  perspective: 1000px;
}

.stacked-card {
  position: absolute;
  width: 260px;
  background: var(--bg-secondary);
  border-radius: var(--radius-xl);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.stacked-card.top {
  cursor: pointer;
}

.stacked-card.swipe-left {
  animation: swipeLeft 0.3s ease-out forwards;
}

.stacked-card.swipe-right {
  animation: swipeRight 0.3s ease-out forwards;
}

@keyframes swipeLeft {
  to {
    transform: translateX(-150%) rotate(-15deg);
    opacity: 0;
  }
}

@keyframes swipeRight {
  to {
    transform: translateX(150%) rotate(15deg);
    opacity: 0;
  }
}

.stacked-card-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
}

.stacked-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.stacked-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.stacked-card-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.stacked-card.top:hover .stacked-card-overlay {
  opacity: 1;
}

.stacked-card-play {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.stacked-card-info {
  padding: 16px;
  text-align: center;
}

.stacked-card-title {
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 4px;
}

.stacked-card-artist {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0;
}

.stacked-nav {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.stacked-nav:hover:not(.disabled) {
  background: var(--bg-hover);
}

.stacked-nav.disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.stacked-cards-progress {
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 6px;
}

.progress-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  transition: all var(--transition-fast);
}

.progress-dot.active {
  background: var(--accent);
  transform: scale(1.2);
}

.progress-dot.passed {
  background: var(--text-muted);
}

.stacked-cards-info {
  text-align: center;
  margin-top: 40px;
}

.stacked-cards-counter {
  font-size: 13px;
  color: var(--text-secondary);
}

/* ----------------------------------------
   Banner Section
   ---------------------------------------- */
.banner-section {
  position: relative;
  border-radius: var(--radius-xl);
  padding: 48px;
  overflow: hidden;
  min-height: 180px;
  display: flex;
  align-items: center;
}

.banner-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 100%);
}

.banner-content {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 24px;
}

.banner-text {
  flex: 1;
}

.banner-badge {
  display: inline-block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: var(--accent);
  color: var(--text-on-accent);
  padding: 4px 10px;
  border-radius: 4px;
  margin-bottom: 12px;
}

.banner-title {
  font-size: 32px;
  font-weight: 800;
  margin: 0 0 8px;
  color: var(--text-primary);
}

.banner-subtitle {
  font-size: 16px;
  color: rgba(255,255,255,0.8);
  margin: 0;
}

.banner-cta {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 14px 28px;
  border-radius: 50px;
  background: var(--text-primary);
  border: none;
  color: var(--text-inverse);
  font-weight: 600;
  font-size: 15px;
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.banner-cta:hover {
  transform: scale(1.05);
}

.banner-decoration {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.banner-circle {
  position: absolute;
  border-radius: 50%;
  opacity: 0.1;
}

.banner-circle--1 {
  width: 300px;
  height: 300px;
  background: white;
  top: -100px;
  right: -50px;
}

.banner-circle--2 {
  width: 200px;
  height: 200px;
  background: white;
  bottom: -80px;
  right: 100px;
}

/* ----------------------------------------
   Mini Player Section
   ---------------------------------------- */
.mini-player-section .mini-player-row {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
  scrollbar-width: none;
}

.mini-player-row::-webkit-scrollbar {
  display: none;
}

.mini-player-card {
  flex-shrink: 0;
  width: 64px;
  cursor: pointer;
  animation: fadeSlideUp 0.3s ease-out both;
}

.mini-player-artwork {
  position: relative;
  width: 64px;
  height: 64px;
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: transform var(--transition-fast);
}

.mini-player-card:hover .mini-player-artwork {
  transform: scale(1.08);
}

.mini-player-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.mini-player-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.mini-player-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
  color: var(--text-primary);
}

.mini-player-card:hover .mini-player-overlay {
  opacity: 1;
}

.mini-player-playing {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  gap: 2px;
  align-items: center;
  justify-content: center;
}

.mini-player-tooltip {
  position: fixed;
  background: var(--bg-elevated);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: 8px 12px;
  box-shadow: var(--shadow-lg);
  pointer-events: none;
  z-index: 1000;
}

.tooltip-title {
  display: block;
  font-size: 13px;
  font-weight: 500;
}

.tooltip-artist {
  display: block;
  font-size: 11px;
  color: var(--text-secondary);
}

/* ----------------------------------------
   Mood Gradient Section
   ---------------------------------------- */
.mood-gradient-section .mood-gradient-container {
  padding: 24px 0;
}

.mood-gradient-bar {
  position: relative;
  height: 180px;
  border-radius: var(--radius-xl);
  padding: 24px 40px;
  display: flex;
  align-items: center;
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  overflow: visible;
}

.mood-gradient-background {
  position: absolute;
  inset: 0;
  border-radius: var(--radius-xl);
  opacity: 0.18;
  transition: opacity var(--transition-normal);
}

.mood-gradient-bar:hover .mood-gradient-background {
  opacity: 0.25;
}

/* Track container for proper horizontal distribution */
.mood-track-container {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
}

.mood-card {
  position: absolute;
  width: 72px;
  cursor: pointer;
  animation: fadeSlideUp 0.4s ease-out both;
  z-index: 1;
  transition: z-index 0s;
}

.mood-card:hover {
  z-index: 10;
}

.mood-card-glow {
  position: absolute;
  inset: -16px;
  border-radius: 50%;
  opacity: 0;
  transition: opacity var(--transition-normal);
  pointer-events: none;
}

.mood-card:hover .mood-card-glow {
  opacity: 0.8;
}

.mood-card-artwork {
  position: relative;
  width: 72px;
  height: 72px;
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  border: 2px solid transparent;
}

.mood-card:hover .mood-card-artwork {
  transform: scale(1.15);
  box-shadow: var(--shadow-elevated);
}

.mood-card.playing .mood-card-artwork {
  border-color: var(--card-color, var(--accent-primary));
}

.mood-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.mood-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.mood-card-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
  color: var(--text-primary);
}

.mood-card:hover .mood-card-overlay {
  opacity: 1;
}

.mood-card-playing {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  gap: 3px;
  align-items: center;
  justify-content: center;
}

.mood-card-info {
  margin-top: 10px;
  text-align: center;
  max-width: 72px;
}

.mood-card-title {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.3;
}

.mood-card-energy {
  display: block;
  font-size: 10px;
  font-weight: 600;
  margin-top: 3px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.9;
}

.mood-gradient-labels {
  display: flex;
  justify-content: space-between;
  padding: 0 40px;
  margin-top: 20px;
}

.mood-label {
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.85;
}

/* ----------------------------------------
   Playlist Carousel Section
   ---------------------------------------- */
.playlist-carousel-section .carousel-container {
  position: relative;
}

.carousel-scroll {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  padding: 8px 0;
}

.carousel-scroll::-webkit-scrollbar {
  display: none;
}

.carousel-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--bg-elevated);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.carousel-nav:hover {
  background: var(--bg-hover);
}

.carousel-nav.hidden {
  opacity: 0;
  pointer-events: none;
}

.carousel-nav--left {
  left: -20px;
}

.carousel-nav--right {
  right: -20px;
}

.playlist-card {
  flex-shrink: 0;
  width: 160px;
  scroll-snap-align: start;
  cursor: pointer;
  animation: fadeSlideUp 0.4s ease-out both;
}

.playlist-card-cover {
  position: relative;
  width: 160px;
  height: 160px;
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: 10px;
}

.cover-single {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cover-collage {
  display: grid;
  width: 100%;
  height: 100%;
}

.cover-collage--2 {
  grid-template-columns: 1fr 1fr;
}

.cover-collage--3 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
}

.cover-collage--4 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
}

.cover-collage img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cover-gradient {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-primary);
}

.playlist-card-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.playlist-card:hover .playlist-card-overlay {
  opacity: 1;
}

.playlist-card-play {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: scale(0.8);
  transition: transform var(--transition-fast);
}

.playlist-card:hover .playlist-card-play {
  transform: scale(1);
}

.playlist-card-info {
  padding: 0 4px;
}

.playlist-card-name {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.playlist-card-description {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0 0 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.playlist-card-count {
  font-size: 12px;
  color: var(--text-muted);
}

.playlist-card-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  background: var(--accent);
  color: var(--text-on-accent);
  padding: 3px 8px;
  border-radius: 4px;
}

/* ----------------------------------------
   Artist Spotlight Section
   ---------------------------------------- */
.artist-spotlight-section .spotlight-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32px;
}

@media (max-width: 900px) {
  .artist-spotlight-section .spotlight-container {
    grid-template-columns: 1fr;
  }
}

.spotlight-hero {
  display: flex;
  gap: 24px;
}

.spotlight-image {
  position: relative;
  width: 180px;
  height: 180px;
  border-radius: var(--radius-xl);
  overflow: hidden;
  flex-shrink: 0;
}

.spotlight-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.spotlight-image-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.spotlight-image-gradient {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 50%, rgba(0,0,0,0.5) 100%);
}

.spotlight-info {
  flex: 1;
}

.spotlight-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--accent);
  margin-bottom: 8px;
  display: block;
}

.spotlight-name {
  font-size: 28px;
  font-weight: 800;
  margin: 0 0 8px;
}

.spotlight-listeners {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0 0 12px;
}

.spotlight-bio {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin: 0 0 16px;
}

.spotlight-actions {
  display: flex;
  gap: 12px;
}

.spotlight-play {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 24px;
  border-radius: 50px;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  font-weight: 600;
  cursor: pointer;
}

.spotlight-view {
  padding: 10px 24px;
  border-radius: 50px;
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.spotlight-view:hover {
  background: var(--bg-hover);
}

.spotlight-tracks {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: 20px;
}

.spotlight-tracks-title {
  font-size: 14px;
  font-weight: 600;
  margin: 0 0 16px;
  color: var(--text-secondary);
}

.spotlight-tracks-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.spotlight-track {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.spotlight-track:hover {
  background: var(--bg-hover);
}

.spotlight-track .track-number {
  width: 20px;
  text-align: center;
  font-size: 13px;
  color: var(--text-muted);
}

.spotlight-track .track-artwork {
  position: relative;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.spotlight-track .track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.spotlight-track .track-playing {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  gap: 2px;
  align-items: center;
  justify-content: center;
}

.spotlight-track .track-info {
  flex: 1;
  min-width: 0;
}

.spotlight-track .track-title {
  font-size: 14px;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.spotlight-track .track-duration {
  font-size: 13px;
  color: var(--text-muted);
}

/* ----------------------------------------
   Genre Explorer Section
   ---------------------------------------- */
.genre-explorer-section .genre-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
}

.genre-tile {
  position: relative;
  padding: 20px 16px;
  border-radius: var(--radius-lg);
  cursor: pointer;
  overflow: hidden;
  transition: transform var(--transition-fast);
  animation: fadeSlideUp 0.3s ease-out both;
}

.genre-tile:hover {
  transform: translateY(-4px);
}

.genre-tile-bg {
  position: absolute;
  inset: 0;
  transition: opacity var(--transition-fast);
}

.genre-tile:hover .genre-tile-bg {
  opacity: 0.8;
}

.genre-tile-content {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.genre-tile-name {
  font-size: 15px;
  font-weight: 600;
}

.genre-tile-expand {
  color: var(--text-muted);
}

.genre-tile-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  background: var(--accent);
  color: var(--text-on-accent);
  padding: 2px 6px;
  border-radius: 3px;
}

.genre-tile-accent {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.genre-tile:hover .genre-tile-accent {
  opacity: 1;
}

.subgenres-panel {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: 20px;
  margin-top: 16px;
  animation: fadeSlideUp 0.3s ease-out;
}

.subgenres-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.subgenres-title {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.subgenres-close {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  border: none;
  color: var(--text-primary);
  font-size: 18px;
  cursor: pointer;
}

.subgenres-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.subgenre-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 50px;
  background: var(--bg-tertiary);
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
  transition: all var(--transition-fast);
  animation: fadeSlideUp 0.3s ease-out both;
}

.subgenre-pill:hover {
  background: var(--bg-hover);
}

.subgenre-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

/* ----------------------------------------
   Lyrics Highlight Section
   ---------------------------------------- */
.lyrics-highlight-section .lyrics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

@media (max-width: 900px) {
  .lyrics-highlight-section .lyrics-grid {
    grid-template-columns: 1fr;
  }
}

.lyrics-card {
  position: relative;
  border-radius: var(--radius-xl);
  overflow: hidden;
  min-height: 200px;
  cursor: pointer;
  animation: fadeSlideUp 0.4s ease-out both;
}

.lyrics-card-bg {
  position: absolute;
  inset: 0;
}

.lyrics-card-bg img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(20px);
  transform: scale(1.1);
}

.lyrics-card-bg-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-tertiary);
}

.lyrics-card-bg-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
}

.lyrics-card-content {
  position: relative;
  padding: 24px;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.lyrics-quote-icon {
  color: var(--accent);
  opacity: 0.8;
  margin-bottom: 12px;
}

.lyrics-quote {
  font-size: 18px;
  font-weight: 500;
  font-style: italic;
  line-height: 1.4;
  margin: 0 0 auto;
  color: var(--text-primary);
}

.lyrics-card-track {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
}

.lyrics-track-artwork {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.lyrics-track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.lyrics-track-info {
  flex: 1;
  min-width: 0;
}

.lyrics-track-title {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.lyrics-track-artist {
  display: block;
  font-size: 11px;
  color: rgba(255,255,255,0.7);
}

.lyrics-card-play {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.lyrics-card:hover .lyrics-card-play {
  opacity: 1;
}

.lyrics-card-playing {
  position: absolute;
  top: 24px;
  right: 24px;
  display: flex;
  gap: 2px;
  align-items: flex-end;
  height: 20px;
}

/* ----------------------------------------
   Weekly Rotation Section
   ---------------------------------------- */
.weekly-rotation-section .rotation-timeline {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  overflow-x: auto;
  scrollbar-width: none;
}

.rotation-timeline::-webkit-scrollbar {
  display: none;
}

.timeline-day {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 20px;
  border-radius: var(--radius-lg);
  background: var(--bg-secondary);
  border: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
  animation: fadeSlideUp 0.3s ease-out both;
}

.timeline-day:hover {
  background: var(--bg-hover);
}

.timeline-day.selected {
  border-color: var(--accent);
  background: var(--accent-soft);
}

.timeline-day.no-data {
  opacity: 0.5;
}

.timeline-day-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
}

.timeline-day-date {
  font-size: 20px;
  font-weight: 700;
}

.timeline-today-badge {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--accent);
}

.timeline-track-count {
  font-size: 10px;
  color: var(--text-muted);
}

.rotation-tracks {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: 16px;
}

.rotation-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px;
  color: var(--text-muted);
  text-align: center;
}

.rotation-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.trending-track {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.trending-track:hover {
  background: var(--bg-hover);
}

.trending-rank {
  width: 32px;
  font-size: 14px;
  font-weight: 700;
  color: var(--text-muted);
}

.trending-artwork {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--bg-tertiary);
}

.trending-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.trending-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.trending-info {
  flex: 1;
  min-width: 0;
}

.trending-title {
  display: block;
  font-size: 14px;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.trending-artist {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
}

.trending-change {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 600;
}

.trending-change--up {
  color: var(--color-success);
}

.trending-change--down {
  color: var(--color-error);
}

.trending-change--stable {
  color: var(--text-muted);
}

.trending-new {
  font-size: 10px;
  font-weight: 700;
  color: var(--accent);
}

.trending-play {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: all var(--transition-fast);
}

.trending-track:hover .trending-play {
  opacity: 1;
}

.trending-play:hover {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--text-on-accent);
}

/* Playing bars animation (shared) */
.playing-bar {
  width: 3px;
  background: var(--accent);
  border-radius: 2px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.playing-bar:nth-child(1) { animation-delay: 0s; }
.playing-bar:nth-child(2) { animation-delay: 0.2s; }
.playing-bar:nth-child(3) { animation-delay: 0.4s; }

@keyframes playingBars {
  0%, 100% { height: 40%; }
  50% { height: 100%; }
}

/* Library Views */
.library-view {
  max-width: 1000px;
  margin: 0 auto;
  position: relative;
}

.library-view::before {
  content: '';
  position: absolute;
  top: -60px;
  left: -60px;
  right: -60px;
  height: 350px;
  background: radial-gradient(ellipse at 30% 0%, var(--library-gradient-color, rgba(29, 185, 84, 0.15)) 0%, transparent 60%);
  pointer-events: none;
  z-index: -1;
}

/* ========================================
   LIBRARY HEADER - Section Component
   ======================================== */

.library-header {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-xl);
  margin-bottom: var(--spacing-2xl);
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
  position: relative;
}

.library-header-icon {
  width: 160px;
  height: 160px;
  border-radius: var(--radius-xl);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
  font-weight: var(--font-weight-bold);
  flex-shrink: 0;
  box-shadow: var(--shadow-elevated);
  transition: transform var(--transition-spring), box-shadow var(--transition-normal);
}

.library-header-icon:hover {
  transform: scale(1.02);
}

.likes-icon {
  background: var(--gradient-likes);
  --library-gradient-color: var(--color-purple-soft);
}

.library-view:has(.likes-icon)::before {
  background: radial-gradient(ellipse at 30% 0%, var(--color-purple-soft) 0%, transparent 60%);
}

.playlists-icon {
  background: var(--gradient-accent);
}

.library-view:has(.playlists-icon)::before {
  background: radial-gradient(ellipse at 30% 0%, var(--color-success-soft) 0%, transparent 60%);
}

.downloads-icon {
  background: var(--gradient-downloads);
}

.library-view:has(.downloads-icon)::before {
  background: radial-gradient(ellipse at 30% 0%, var(--color-info-soft) 0%, transparent 60%);
}

.dislikes-icon {
  background: var(--gradient-red);
  --library-gradient-color: var(--color-error-soft);
}

.library-view:has(.dislikes-icon)::before {
  background: radial-gradient(ellipse at 30% 0%, var(--color-error-soft) 0%, transparent 60%);
}

/* Dislike track item with reason tags */
.dislike-track-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.dislike-reasons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding-left: 64px; /* Align with track content after artwork */
  margin-top: -4px;
}

.dislike-reason-tag {
  padding: 3px 10px;
  font-size: 11px;
  font-weight: 500;
  background: var(--color-error-soft);
  color: var(--color-error);
  border-radius: var(--radius-full);
  white-space: nowrap;
}

.dislike-remove-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 10px;
  font-size: 11px;
  font-weight: 500;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.dislike-remove-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-strong);
}

.library-header-info {
  flex: 1;
}

.library-header-type {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.library-header-title {
  font-size: 48px;
  font-weight: 800;
  margin: 10px 0;
  letter-spacing: -0.5px;
  line-height: 1.1;
}

.library-header-count {
  color: var(--text-secondary);
  font-size: 14px;
}

.library-actions {
  display: flex;
  gap: 16px;
  margin-bottom: 28px;
  align-items: center;
}

.library-play-button {
  background: var(--gradient-accent);
  color: var(--text-inverse);
  border: none;
  padding: 14px 36px;
  border-radius: var(--radius-full);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-normal);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  box-shadow: var(--shadow-glow);
}

.library-play-button:hover {
  transform: scale(1.04);
  box-shadow: 0 0 30px var(--accent-glow);
}

.library-play-button:active {
  transform: scale(0.98);
}

.library-create-button {
  background: transparent;
  color: var(--text-primary);
  border: 1px solid var(--border-light);
  padding: 13px 26px;
  border-radius: var(--radius-full);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-normal);
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.library-create-button:hover {
  border-color: var(--text-primary);
  background: var(--glass-bg-subtle);
}

.library-create-button:active {
  transform: scale(0.98);
}

.library-empty {
  text-align: center;
  padding: 80px 32px;
  color: var(--text-secondary);
  animation: fadeSlideUp 0.5s ease-out;
}

.library-empty-icon {
  font-size: 64px;
  margin-bottom: 20px;
  opacity: 0.3;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.library-empty h3 {
  font-size: 26px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 10px;
}

.library-empty p {
  margin-bottom: 28px;
  max-width: 300px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.5;
}

.library-empty .library-create-button {
  margin-top: 8px;
}

/* Centered empty state for grid layouts */
.library-empty-centered {
  grid-column: 1 / -1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

.library-back-button {
  position: absolute;
  top: -40px;
  left: 0;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 8px 0;
}

.library-back-button:hover {
  color: var(--text-primary);
}

/* Playlist Detail */
.playlist-detail-header {
  position: relative;
}

.playlist-detail-artwork {
  width: 180px;
  height: 180px;
  border-radius: 8px;
  overflow: hidden;
  background-color: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.playlist-detail-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.playlist-detail-artwork-placeholder {
  font-size: 72px;
  color: var(--text-muted);
}

.playlist-track-row {
  display: flex;
  align-items: center;
}

.playlist-track-row .track-row {
  flex: 1;
}

.playlist-track-remove {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 16px;
  cursor: pointer;
  padding: 8px;
  opacity: 0;
  transition: all 0.2s;
}

.playlist-track-row:hover .playlist-track-remove {
  opacity: 1;
}

.playlist-track-remove:hover {
  color: var(--color-error);
}

/* Playlists Grid */
.playlists-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 20px;
}

.playlist-card {
  position: relative;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: 12px;
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 1px solid transparent;
  animation: fadeSlideUp 0.4s ease-out backwards;
}

.playlist-card:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-subtle);
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.playlist-card-artwork {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: 14px;
  background: var(--bg-tertiary);
  box-shadow: var(--shadow-md);
}

.playlist-card-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.playlist-card:hover .playlist-card-artwork img {
  transform: scale(1.05);
}

.playlist-card-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: var(--text-muted);
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-hover) 100%);
}

.playlist-card-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 40%, rgba(0, 0, 0, 0.6) 100%);
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  padding: 10px;
  opacity: 0;
  transition: opacity var(--transition-normal);
}

.playlist-card:hover .playlist-card-overlay {
  opacity: 1;
}

.playlist-card-play {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-full);
  background: var(--gradient-accent);
  border: none;
  color: var(--text-inverse);
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-lg);
  transform: translateY(8px);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.playlist-card:hover .playlist-card-play {
  transform: translateY(0);
}

.playlist-card-play:hover {
  transform: scale(1.08);
  box-shadow: var(--shadow-glow);
}

.playlist-card-info {
  min-width: 0;
}

.playlist-card-name {
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 4px;
}

.playlist-card-count {
  font-size: 13px;
  color: var(--text-secondary);
}

.playlist-card-delete {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 30px;
  height: 30px;
  border-radius: var(--radius-full);
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(8px);
  border: none;
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  opacity: 0;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.playlist-card:hover .playlist-card-delete {
  opacity: 1;
}

.playlist-card-delete:hover {
  background-color: var(--color-error);
  color: white;
  transform: scale(1.1);
}

/* ========================================
   PLAYLIST COVER - Auto-generated Covers
   ======================================== */

.playlist-cover {
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
}

/* Size variants */
.playlist-cover-xs {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-sm);
}

.playlist-cover-sm {
  width: 48px;
  height: 48px;
}

.playlist-cover-md {
  width: 80px;
  height: 80px;
}

.playlist-cover-lg {
  width: 160px;
  height: 160px;
  border-radius: var(--radius-lg);
}

.playlist-cover-xl {
  width: 232px;
  height: 232px;
  border-radius: var(--radius-xl);
}

/* Gradient fallback */
.playlist-cover-gradient {
  color: rgba(255, 255, 255, 0.9);
}

/* Single image */
.playlist-cover-single img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Two images - horizontal split */
.playlist-cover-duo {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
}

.playlist-cover-duo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Three images - 1 large + 2 small */
.playlist-cover-trio {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
}

.playlist-cover-trio .playlist-cover-main {
  grid-row: span 2;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.playlist-cover-trio .playlist-cover-side {
  display: grid;
  grid-template-rows: 1fr 1fr;
  gap: 1px;
}

.playlist-cover-trio .playlist-cover-side img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Four images - 2x2 mosaic */
.playlist-cover-mosaic {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  gap: 1px;
}

.playlist-cover-mosaic img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Downloads */
.downloads-content {
  display: flex;
  flex-direction: column;
  gap: 40px;
}

.downloads-section-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 16px;
  color: var(--text-primary);
}

.downloads-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.download-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 16px;
  border-radius: var(--radius-lg);
  background-color: var(--bg-secondary);
  transition: all var(--transition-fast);
  border: 1px solid transparent;
}

.download-item.completed {
  cursor: pointer;
}

.download-item.completed:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--border-subtle);
}

.download-item.playing {
  background-color: var(--bg-tertiary);
  border-color: var(--accent);
}

.download-artwork {
  position: relative;
  width: 56px;
  height: 56px;
  border-radius: var(--radius-md);
  overflow: hidden;
  background-color: var(--bg-tertiary);
  flex-shrink: 0;
  box-shadow: var(--shadow-sm);
}

.download-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.download-artwork-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.download-play-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-fast);
  color: white;
}

.download-item.completed:hover .download-play-overlay {
  opacity: 1;
}

.download-info {
  flex: 1;
  min-width: 0;
}

.download-title {
  font-size: 15px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}

.download-artist {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.download-status {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 6px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  font-weight: 500;
}

.download-status.success {
  color: var(--accent);
}

.download-status.error {
  color: var(--color-error);
}

.download-progress {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}

.download-progress-bar {
  flex: 1;
  height: 4px;
  background-color: var(--bg-tertiary);
  border-radius: var(--radius-full);
  overflow: hidden;
  position: relative;
}

.download-progress-bar::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: var(--progress, 0%);
  background: var(--gradient-accent);
  border-radius: var(--radius-full);
  transition: width 0.3s ease;
}

.download-progress-text {
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 500;
  min-width: 36px;
  text-align: right;
}

.download-actions {
  display: flex;
  gap: 8px;
}

.download-retry,
.download-remove {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  background-color: var(--bg-hover);
  border: 1px solid transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.download-retry:hover {
  background-color: rgba(var(--accent-rgb), 0.15);
  color: var(--accent);
  border-color: var(--accent);
}

.download-remove:hover {
  background-color: rgba(239, 68, 68, 0.1);
  color: var(--color-error);
  border-color: var(--color-error);
}

/* Search View */
.search-view {
  max-width: 800px;
  margin: 0 auto;
}

/* Player improvements */
.player-empty {
  display: flex;
  align-items: center;
  gap: 8px;
}

.player-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--bg-tertiary);
  color: var(--text-muted);
}

.player-like-button {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 8px;
  margin-left: 8px;
  border-radius: 50%;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.player-like-button:hover {
  color: var(--text-primary);
  transform: scale(1.1);
}

.player-like-button.liked {
  color: var(--accent);
}

.player-dislike-button {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 8px;
  margin-left: 4px;
  border-radius: 50%;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.6;
}

.player-dislike-button:hover {
  color: var(--error);
  transform: scale(1.1);
  opacity: 1;
}

.player-loading {
  width: 20px;
  height: 20px;
  border: 2px solid var(--bg-primary);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Context Menu */
/* ========================================
   CONTEXT MENU - Overlay Component
   ======================================== */

.context-menu {
  position: fixed;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur-strong);
  -webkit-backdrop-filter: var(--glass-blur-strong);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-lg);
  padding: var(--spacing-sm);
  min-width: 220px;
  box-shadow: var(--shadow-elevated);
  z-index: var(--z-context-menu);
  animation: contextMenuIn 0.2s var(--transition-spring);
}

@keyframes contextMenuIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.context-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 10px 14px;
  background: none;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 14px;
  cursor: pointer;
  text-align: left;
  transition: background-color var(--transition-fast);
}

.context-menu-item:hover {
  background: var(--bg-hover);
}

.context-menu-item.disabled {
  color: var(--text-muted);
  cursor: default;
}

.context-menu-item.disabled:hover {
  background: none;
}

.context-menu-item svg {
  flex-shrink: 0;
  color: var(--text-secondary);
  transition: color var(--transition-fast);
}

.context-menu-item:hover svg {
  color: var(--text-primary);
}

.context-menu-arrow {
  margin-left: auto;
  color: var(--text-secondary);
}

.context-menu-divider {
  height: 1px;
  background: var(--border-color);
  margin: 6px 0;
}

.has-submenu {
  position: relative;
}

.context-submenu {
  position: absolute;
  left: calc(100% - 4px);
  top: -6px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 6px 0;
  padding-left: 4px;
  min-width: 180px;
  max-height: 300px;
  overflow-y: auto;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  z-index: calc(var(--z-context-menu) + 1);
}

.context-submenu .context-menu-item {
  margin-left: -4px;
  padding-left: calc(12px + 4px);
}

/* ========================================
   MODAL - Overlay Component
   ======================================== */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg-overlay);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
  animation: modalOverlayIn 0.25s ease-out;
}

@keyframes modalOverlayIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal {
  background: var(--bg-secondary);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-2xl);
  width: 440px;
  max-width: 90vw;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-2xl);
  animation: modalIn 0.3s var(--transition-spring);
  overflow: hidden;
}

@keyframes modalIn {
  from {
    opacity: 0;
    transform: scale(0.92) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
}

.modal-header h2 {
  font-size: 18px;
  font-weight: 600;
}

.modal-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 6px;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}

.modal-close:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.modal-close:active {
  transform: scale(0.95);
}

.modal-track-preview {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 24px;
  background: var(--bg-tertiary);
}

.modal-track-preview img {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-sm);
  object-fit: cover;
}

.modal-track-placeholder {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-sm);
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.modal-track-info {
  flex: 1;
  min-width: 0;
}

.modal-track-title {
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.modal-track-artist {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.modal-content {
  padding: 16px;
  overflow-y: auto;
  flex: 1;
}

.modal-create-playlist {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 16px;
  background: var(--bg-tertiary);
  border: 1px dashed var(--border-color);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
  margin-bottom: 16px;
}

.modal-create-playlist:hover {
  background: var(--bg-hover);
  border-color: var(--text-muted);
}

.modal-create-form {
  margin-bottom: 16px;
}

.modal-create-form input {
  width: 100%;
  padding: 12px 16px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 14px;
  margin-bottom: 12px;
}

.modal-create-form input:focus {
  outline: none;
  border-color: var(--accent);
}

.modal-create-buttons {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.modal-button {
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.modal-button.primary {
  background: var(--accent);
  border: none;
  color: var(--text-inverse);
}

.modal-button.primary:hover:not(:disabled) {
  background: var(--accent-hover);
}

.modal-button.primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modal-button.secondary {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
}

.modal-button.secondary:hover {
  background: var(--bg-hover);
}

.modal-playlist-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.modal-empty {
  text-align: center;
  padding: 24px;
  color: var(--text-muted);
}

.modal-playlist-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 16px;
  background: none;
  border: none;
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 14px;
  cursor: pointer;
  text-align: left;
  transition: background-color 0.15s;
}

.modal-playlist-item:hover:not(:disabled) {
  background: var(--bg-hover);
}

.modal-playlist-item:disabled {
  cursor: default;
}

.modal-playlist-item svg:first-child {
  color: var(--text-secondary);
}

.modal-playlist-name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.modal-playlist-count {
  font-size: 12px;
  color: var(--text-muted);
}

.modal-playlist-item.added svg:last-child {
  color: var(--accent);
}

/* Small modal variant for simple inputs */
.modal.modal-small {
  width: 380px;
}

.modal-small .modal-header {
  padding: var(--spacing-lg);
  gap: 12px;
}

.modal-small .modal-header h2 {
  flex: 1;
}

.modal-header-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--accent);
}

.modal-small .modal-content {
  padding: var(--spacing-lg);
  padding-top: 0;
}

.modal-input {
  width: 100%;
  padding: 14px 16px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 15px;
  outline: none;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.modal-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.15);
}

.modal-input::placeholder {
  color: var(--text-muted);
}

.modal-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: var(--spacing-lg);
}

/* Queue View */
.queue-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-primary);
}

.queue-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px;
  border-bottom: 1px solid var(--border-color);
}

.queue-header-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.queue-header-title h2 {
  font-size: 24px;
  font-weight: 700;
}

.queue-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: all 0.15s;
}

.queue-close:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.queue-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 24px;
  min-width: 0;
}

.queue-section {
  margin-bottom: 32px;
}

.queue-section:last-child {
  margin-bottom: 0;
}

.queue-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.queue-section-title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-secondary);
  margin-bottom: 16px;
}

.queue-section-header .queue-section-title {
  margin-bottom: 0;
}

.queue-clear-button {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.15s;
}

.queue-clear-button:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.queue-now-playing {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  overflow: hidden;
}

.queue-now-playing-artwork {
  position: relative;
  width: 64px;
  height: 64px;
  border-radius: 4px;
  overflow: hidden;
  flex-shrink: 0;
}

.queue-now-playing-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.queue-artwork-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.queue-now-playing-indicator {
  position: absolute;
  bottom: 4px;
  right: 4px;
  background: var(--accent);
  border-radius: 2px;
  padding: 2px 4px;
}

.playing-bars {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 12px;
}

.playing-bars span {
  width: 3px;
  background: var(--text-inverse);
  border-radius: 1px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.playing-bars span:nth-child(1) {
  animation-delay: 0s;
}

.playing-bars span:nth-child(2) {
  animation-delay: 0.2s;
}

.playing-bars span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes playingBars {
  0%, 100% { height: 4px; }
  50% { height: 12px; }
}

.queue-now-playing-info {
  flex: 1;
  min-width: 0;
}

.queue-now-playing-title {
  font-weight: 600;
  font-size: 16px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.queue-now-playing-artist {
  font-size: 14px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.queue-empty {
  text-align: center;
  padding: 32px;
  color: var(--text-muted);
}

.queue-empty p:first-child {
  font-size: 16px;
  margin-bottom: 8px;
}

.queue-empty-hint {
  font-size: 13px;
}

.queue-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.queue-list.history {
  opacity: 0.6;
}

.queue-item {
  display: flex;
  align-items: center;
  position: relative;
  min-width: 0;
  overflow: hidden;
}

.queue-item .track-row {
  flex: 1;
  min-width: 0;
}

.queue-item-remove {
  position: absolute;
  left: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  opacity: 0;
  transition: all 0.15s;
  z-index: 2;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.queue-item:hover .queue-item-remove {
  opacity: 1;
}

/* Hide track number on hover to show X button */
.queue-item:hover .track-number {
  opacity: 0;
}

.queue-item-remove:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

/* Queue Popover */
/* ========================================
   QUEUE POPOVER - Overlay Component
   ======================================== */

.queue-popover {
  position: fixed;
  width: var(--queue-popover-width);
  max-height: 520px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur-strong);
  -webkit-backdrop-filter: var(--glass-blur-strong);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-elevated);
  z-index: var(--z-queue-popover);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: popoverIn 0.25s var(--transition-spring);
}

@keyframes popoverIn {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.queue-popover-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.queue-popover-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.queue-popover-title h3 {
  font-size: 16px;
  font-weight: 600;
}

.queue-popover-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.queue-popover-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.queue-popover-content {
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1;
  min-width: 0;
}

.queue-popover-section {
  padding: 12px 16px;
}

.queue-popover-section:not(:last-child) {
  border-bottom: 1px solid var(--border-color);
}

.queue-popover-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.queue-popover-section-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.queue-popover-clear {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: var(--transition-fast);
}

.queue-popover-clear:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.queue-popover-section-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.queue-popover-rerank {
  display: flex;
  align-items: center;
  gap: 4px;
  background: var(--accent-subtle);
  border: none;
  color: var(--accent-primary);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  padding: 4px 10px;
  border-radius: 12px;
  transition: var(--transition-fast);
}

.queue-popover-rerank:hover:not(:disabled) {
  background: var(--accent-primary);
  color: var(--text-on-accent);
}

.queue-popover-rerank:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.queue-popover-rerank.loading {
  pointer-events: none;
}

.queue-popover-rerank svg {
  flex-shrink: 0;
}

.queue-popover-now-playing {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  background: var(--bg-tertiary);
  border-radius: 8px;
}

.queue-popover-artwork {
  position: relative;
  width: 48px;
  height: 48px;
  border-radius: 6px;
  overflow: hidden;
  flex-shrink: 0;
}

.queue-popover-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.queue-popover-artwork-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.queue-popover-playing-indicator {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.queue-popover-playing-indicator span {
  width: 3px;
  height: 12px;
  background: var(--accent);
  border-radius: 1px;
  animation: playingBars 0.8s ease-in-out infinite;
}

.queue-popover-playing-indicator span:nth-child(2) {
  animation-delay: 0.2s;
}

.queue-popover-playing-indicator span:nth-child(3) {
  animation-delay: 0.4s;
}

.queue-popover-track-info {
  min-width: 0;
  flex: 1;
}

.queue-popover-track-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.queue-popover-track-artist {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.queue-popover-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.queue-popover-item {
  position: relative;
  display: flex;
  align-items: center;
  min-width: 0;
  overflow: hidden;
}

.queue-popover-item .track-row {
  flex: 1;
  min-width: 0;
}

.queue-popover-item-remove {
  position: absolute;
  left: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 50%;
  opacity: 0;
  transition: var(--transition-fast);
  z-index: 2;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.queue-popover-item:hover .queue-popover-item-remove {
  opacity: 1;
}

/* Drag handle for queue reordering */
.queue-popover-item-drag {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: grab;
  padding: 4px;
  border-radius: 4px;
  opacity: 0;
  transition: var(--transition-fast);
  z-index: 2;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.queue-popover-item:hover .queue-popover-item-drag {
  opacity: 1;
}

.queue-popover-item-drag:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.queue-popover-item-drag:active {
  cursor: grabbing;
}

.queue-popover-item.dragging {
  background: var(--bg-hover);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-elevated);
}

/* Hide track number on hover to show X button */
.queue-popover-item:hover .track-number {
  opacity: 0;
}

.queue-popover-item-remove:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.queue-popover-empty {
  text-align: center;
  padding: 24px 16px;
  color: var(--text-muted);
  font-size: 13px;
}

.queue-popover-more {
  text-align: center;
  padding: 8px;
  color: var(--text-muted);
  font-size: 12px;
}

/* Queue header actions */
.queue-popover-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Smart queue toggle button */
.queue-smart-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: none;
  border-radius: var(--radius-md);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.queue-smart-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.queue-smart-toggle.active {
  color: var(--color-primary);
  background: var(--color-primary-subtle);
}

.queue-smart-toggle.active:hover {
  background: var(--color-primary-muted);
}

/* Radio mode banner */
.queue-radio-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  background: var(--color-primary-subtle);
  border-bottom: 1px solid var(--border-color);
}

.queue-radio-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.queue-radio-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.queue-radio-seed {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

/* Auto-queue banner */
.queue-auto-banner {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
}

.queue-auto-label {
  font-size: 12px;
  color: var(--text-secondary);
}

/* Queue loading indicator */
.queue-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 16px;
  color: var(--text-muted);
  font-size: 12px;
}

.queue-loading svg {
  animation: spin 1s linear infinite;
}

/* Queue source badges - Smart Shuffle feedback */
.queue-source-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: var(--radius-full);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
  flex-shrink: 0;
  opacity: 0.9;
}

.queue-source-artist {
  background: var(--color-purple-soft);
  color: #a78bfa;
}

.queue-source-genre {
  background: var(--color-info-soft);
  color: #60a5fa;
}

.queue-source-similar {
  background: var(--color-success-soft);
  color: var(--accent);
}

.queue-source-radio {
  background: var(--color-warning-soft);
  color: #fbbf24;
}

.queue-source-auto {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-secondary);
}

/* Compact track row for popovers */
.track-row.compact {
  padding: 6px 8px;
}

.track-row.compact .track-artwork,
.track-row.compact .track-artwork-placeholder {
  width: 36px;
  height: 36px;
}

.track-row.compact .track-number {
  width: 20px;
  font-size: 12px;
}

.track-row.compact .track-title {
  font-size: 13px;
}

.track-row.compact .track-artist {
  font-size: 11px;
}

.track-row.compact .track-duration {
  font-size: 11px;
}

/* Home View */
.home-view {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  position: relative;
}

/* Space for floating search when not searching */
.home-view:not(.searching) {
  padding-top: 160px;
}

/* Space for floating search when searching */
.home-view.searching {
  padding-top: 80px;
}

.home-content {
  flex: 1;
}

/* ========================================
   FLOATING SEARCH - Player-style Component
   ======================================== */

.floating-search {
  position: fixed;
  top: var(--gap-module);
  left: calc(var(--sidebar-width) + var(--gap-module) * 2);
  right: var(--gap-module);
  z-index: var(--z-dropdown);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-module);
  box-shadow: var(--shadow-elevated);
  /* Smooth, unified transitions */
  transition:
    top 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    right 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    max-width 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    padding 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    border-radius 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.3s ease,
    box-shadow 0.4s ease;
  opacity: 1;
}

/* Adjust floating search when lyrics panel is open (not expanded) */
.app:has(.lyrics-panel:not(.expanded)) .floating-search {
  right: calc(380px + var(--gap-module) * 2);
}

/* Hide floating search when lyrics panel is expanded (lyrics covers main content) */
.app:has(.lyrics-panel.expanded) .floating-search {
  opacity: 0;
  pointer-events: none;
}

.floating-search::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg, var(--accent-soft) 0%, transparent 20%, transparent 80%, var(--accent-soft) 100%);
  pointer-events: none;
  opacity: 0.5;
}


/* Search bar container */
.floating-search-bar {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  width: 100%;
  max-width: 600px;
  /* Elastic spring transition */
  transition:
    transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.3s ease-out;
  opacity: 1;
  transform: scale(1);
}

.floating-search-bar .search-bar {
  flex: 1;
}

/* Morphing icon button - transforms from search to close */
.floating-search-morph-icon {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  cursor: default;
  flex-shrink: 0;
  overflow: hidden;
  transition:
    background 0.3s ease-out,
    border-color 0.3s ease-out,
    transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.3s ease-out;
}

/* Both icons positioned absolutely for morph effect */
.morph-icon {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.3s ease-out;
}

/* Search icon - default state */
.morph-icon--search {
  opacity: 1;
  transform: rotate(0deg) scale(1);
}

/* Close icon - hidden by default */
.morph-icon--close {
  opacity: 0;
  transform: rotate(-90deg) scale(0.5);
}

/* Active state - morph to close icon */
.floating-search-morph-icon.is-close {
  cursor: pointer;
  background: var(--bg-hover);
  border-color: var(--border-strong);
}

.floating-search-morph-icon.is-close .morph-icon--search {
  opacity: 0;
  transform: rotate(90deg) scale(0.5);
}

.floating-search-morph-icon.is-close .morph-icon--close {
  opacity: 1;
  transform: rotate(0deg) scale(1);
}

/* Hover states */
.floating-search-morph-icon.is-close:hover {
  background: var(--accent-soft);
  border-color: var(--accent);
  color: var(--accent);
  transform: scale(1.1);
  box-shadow: 0 0 0 4px var(--accent-soft);
}

.floating-search-morph-icon.is-close:hover .morph-icon--close {
  transform: rotate(90deg) scale(1);
}

.floating-search-morph-icon.is-close:active {
  transform: scale(0.95);
  transition: transform 0.1s ease-out;
}

/* When not searching, position near top - centered compact state */
.home-view:not(.searching) .floating-search {
  top: 40px;
  max-width: 600px;
  left: calc(var(--sidebar-width) + var(--gap-module) * 2);
  right: var(--gap-module);
  margin: 0 auto;
}

/* When searching, expand and rise to top */
.home-view.searching .floating-search {
  top: var(--gap-module);
  max-width: none;
  left: calc(var(--sidebar-width) + var(--gap-module) * 2);
  right: var(--gap-module);
  margin: 0;
}

/* ========================================
   ARTIST DETAIL VIEW - Magazine Editorial Style
   ======================================== */

.artist-detail-view {
  animation: fadeIn 0.3s ease-out;
  position: relative;
}

/* ---- Magazine-Style Hero Section ---- */
.artist-hero-magazine {
  position: relative;
  min-height: 500px;
  margin: calc(-1 * var(--spacing-xl)) calc(-1 * var(--spacing-xl)) 0;
  overflow: hidden;
}

.artist-back-btn-floating {
  position: absolute;
  top: var(--spacing-xl);
  left: var(--spacing-xl);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  color: var(--text-hero);
  cursor: pointer;
  transition: all var(--transition-emphasized);
}

.artist-back-btn-floating:hover {
  background: var(--glass-bg-elevated);
  transform: scale(1.05);
  box-shadow: var(--shadow-md);
}

.artist-hero-image-container {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.artist-hero-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center 20%;
  transition: transform var(--transition-dramatic);
}

.artist-hero-magazine:hover .artist-hero-image {
  transform: scale(1.02);
}

.artist-hero-image-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
  color: var(--text-muted);
}

.artist-hero-gradient {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 30%,
    rgba(10, 10, 10, 0.4) 50%,
    rgba(10, 10, 10, 0.8) 70%,
    var(--bg-primary) 100%
  );
  pointer-events: none;
}

.artist-hero-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: var(--spacing-3xl) var(--spacing-xl) var(--spacing-xl);
  z-index: 5;
}

/* ---- Verified Badge ---- */
.artist-verified-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--glass-bg-subtle);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--accent);
}

.artist-verified-badge svg {
  color: var(--accent);
}

/* ---- Artist Name - Massive Typography ---- */
.artist-name-massive {
  font-size: var(--font-size-6xl);
  font-weight: var(--font-weight-black);
  letter-spacing: var(--letter-spacing-tighter);
  line-height: var(--line-height-none);
  color: var(--text-hero);
  margin-bottom: var(--spacing-sm);
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}

.artist-followers-count {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
}

/* ---- Genre Pills - Glass Morphism ---- */
.artist-genres-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xl);
}

.artist-genre-pill {
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--glass-bg-subtle);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  text-transform: capitalize;
  transition: all var(--transition-fast);
}

.artist-genre-pill:hover {
  background: var(--glass-bg-light);
  border-color: var(--glass-border-strong);
  color: var(--text-primary);
}

/* ---- Hero Action Buttons ---- */
.artist-hero-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.artist-play-btn-hero {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 32px;
  background: var(--gradient-accent);
  border: none;
  border-radius: var(--radius-full);
  color: var(--text-inverse);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-emphasized);
  box-shadow: var(--shadow-glow);
}

.artist-play-btn-hero:hover:not(:disabled) {
  transform: scale(1.03);
  box-shadow: var(--shadow-glow-strong);
}

.artist-play-btn-hero:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.artist-shuffle-btn-hero {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 24px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  color: var(--text-hero);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-emphasized);
}

.artist-shuffle-btn-hero:hover:not(:disabled) {
  background: var(--glass-bg-elevated);
  border-color: var(--glass-border-strong);
  transform: scale(1.02);
}

.artist-shuffle-btn-hero:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.artist-follow-btn {
  padding: 14px 24px;
  background: transparent;
  border: 1px solid var(--text-hero);
  border-radius: var(--radius-full);
  color: var(--text-hero);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-emphasized);
}

.artist-follow-btn:hover {
  background: var(--text-hero);
  color: var(--bg-primary);
}

.artist-follow-btn.following {
  background: var(--glass-bg);
  border-color: var(--glass-border);
  color: var(--accent);
}

.artist-follow-btn.following:hover {
  background: transparent;
  border-color: var(--color-error);
  color: var(--color-error);
}

/* ---- Editorial Bio Section ---- */
.artist-bio-editorial {
  max-width: 700px;
  margin: 0 auto;
  padding: var(--spacing-3xl) var(--spacing-xl);
  text-align: center;
  position: relative;
}

.artist-bio-quote-mark {
  display: block;
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-black);
  color: var(--accent);
  opacity: 0.3;
  line-height: 1;
  margin-bottom: var(--spacing-md);
}

.artist-bio-text {
  font-size: var(--font-size-lg);
  font-style: italic;
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-relaxed);
  color: var(--text-secondary);
}

.artist-bio-read-more {
  display: inline-block;
  margin-top: var(--spacing-lg);
  padding: 0;
  background: none;
  border: none;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--accent);
  cursor: pointer;
  transition: color var(--transition-fast);
}

.artist-bio-read-more:hover {
  color: var(--accent-hover);
  text-decoration: underline;
}

/* ---- Artist Content Container ---- */
.artist-content {
  position: relative;
  z-index: 1;
  padding-top: var(--spacing-lg);
}

.artist-section {
  margin-bottom: var(--spacing-3xl);
}

.artist-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
}

.artist-section-title {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--text-primary);
}

/* ---- Popular Tracks Section ---- */
.artist-popular-section {
  margin-bottom: var(--spacing-3xl);
}

.artist-tracks-list-magazine {
  background: var(--bg-elevated);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  overflow: hidden;
}

.artist-track-row-magazine {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.artist-track-row-magazine:hover {
  background: var(--bg-hover);
}

.artist-track-row-magazine.playing {
  background: var(--accent-soft);
}

.artist-track-number-container {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.artist-track-number {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-tertiary);
  transition: opacity var(--transition-fast);
}

.artist-track-play-icon {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-primary);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.artist-track-row-magazine:hover .artist-track-number {
  opacity: 0;
}

.artist-track-row-magazine:hover .artist-track-play-icon {
  opacity: 1;
}

.artist-track-row-magazine.playing .artist-track-number {
  color: var(--accent);
}

.artist-track-row-magazine.playing .artist-track-play-icon {
  color: var(--accent);
}

.artist-track-image {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.artist-track-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.artist-track-info {
  flex: 1;
  min-width: 0;
}

.artist-track-title {
  display: block;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.artist-track-row-magazine.playing .artist-track-title {
  color: var(--accent);
}

.artist-track-album {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
}

.artist-track-plays {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  flex-shrink: 0;
  min-width: 60px;
  text-align: right;
}

.artist-track-duration {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  flex-shrink: 0;
  min-width: 50px;
  text-align: right;
}

/* ---- Discography Section ---- */
.artist-discography-section {
  margin-bottom: var(--spacing-3xl);
}

/* ---- Loading & Placeholder States ---- */
.artist-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-md);
  padding: var(--spacing-2xl);
  color: var(--text-secondary);
}

.artist-loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border-color);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.artist-section-placeholder,
.artist-section-error {
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--text-muted);
  font-size: var(--font-size-sm);
}

.artist-section-error {
  color: var(--color-error);
}

/* ---- Similar Artists Scroll ---- */
.artist-albums-scroll,
.artist-similar-scroll {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.artist-albums-scroll::-webkit-scrollbar,
.artist-similar-scroll::-webkit-scrollbar {
  height: 6px;
}

.artist-albums-scroll::-webkit-scrollbar-track,
.artist-similar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.artist-albums-scroll::-webkit-scrollbar-thumb,
.artist-similar-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

.artist-albums-scroll .album-card,
.artist-similar-scroll .artist-card {
  flex-shrink: 0;
  width: 170px;
}

/* ---- Not Found State ---- */
.artist-not-found {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-4xl);
  color: var(--text-muted);
}

.artist-not-found button {
  padding: 10px 24px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-not-found button:hover {
  background: var(--bg-hover);
}

/* ---- Responsive Adjustments for Artist Magazine View ---- */
@media (max-width: 768px) {
  .artist-hero-magazine {
    min-height: 400px;
  }

  .artist-name-massive {
    font-size: var(--font-size-4xl);
  }

  .artist-hero-actions {
    flex-wrap: wrap;
  }

  .artist-bio-editorial {
    padding: var(--spacing-2xl) var(--spacing-lg);
  }

  .artist-bio-text {
    font-size: var(--font-size-base);
  }
}

@media (max-width: 480px) {
  .artist-hero-magazine {
    min-height: 350px;
    margin: calc(-1 * var(--spacing-md)) calc(-1 * var(--spacing-md)) 0;
  }

  .artist-back-btn-floating {
    top: var(--spacing-md);
    left: var(--spacing-md);
  }

  .artist-hero-overlay {
    padding: var(--spacing-2xl) var(--spacing-md) var(--spacing-md);
  }

  .artist-name-massive {
    font-size: var(--font-size-3xl);
  }

  .artist-followers-count {
    font-size: var(--font-size-base);
  }

  .artist-play-btn-hero,
  .artist-shuffle-btn-hero,
  .artist-follow-btn {
    padding: 12px 20px;
    font-size: var(--font-size-sm);
  }

  .artist-track-plays {
    display: none;
  }
}

/* ========================================
   ARTIST DETAIL VIEW - Apple + Spotify Hybrid Design
   ======================================== */

.artist-detail-view-spotify {
  animation: fadeIn 0.3s ease-out;
  position: relative;
  --ambient-color: #1a1a1a;
  --ambient-muted: #2a2a2a;
  --ambient-vibrant: #3a3a3a;
}

/* ========================================
   NEW ARTIST HEADER - Magazine + Glass + Bento
   ======================================== */

.artist-header-new {
  position: relative;
  min-height: 320px;
  margin: calc(-1 * var(--spacing-xl)) calc(-1 * var(--spacing-xl)) var(--spacing-xl);
  padding: var(--spacing-xl);
  display: flex;
  align-items: flex-end;
  overflow: hidden;
}

/* Ambient blurred background */
.artist-header-ambient {
  position: absolute;
  inset: -50px;
  background-size: cover;
  background-position: center;
  filter: blur(60px) saturate(1.5);
  opacity: 0.4;
  transform: scale(1.2);
}

.artist-header-ambient-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.7) 0%,
    rgba(0, 0, 0, 0.5) 50%,
    rgba(0, 0, 0, 0.8) 100%
  );
}

/* Back button - minimal pill style */
.artist-back-btn-new {
  position: absolute;
  top: var(--spacing-lg);
  left: var(--spacing-lg);
  z-index: 20;
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 8px 16px 8px 12px;
  background: var(--overlay-light);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--overlay-medium);
  border-radius: var(--radius-full);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-back-btn-new:hover {
  background: var(--overlay-strong);
  transform: translateX(-2px);
}

/* Main Content Card - Glassmorphism */
.artist-header-card {
  position: relative;
  z-index: 10;
  display: flex;
  gap: var(--spacing-xl);
  width: 100%;
  max-width: 900px;
  padding: var(--spacing-xl);
  background: var(--glass-bg);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
}

/* Artist Image - Square with rounded corners */
.artist-header-image-container {
  flex-shrink: 0;
  width: 180px;
  height: 180px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1);
}

.artist-header-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease-out;
}

.artist-header-card:hover .artist-header-image {
  transform: scale(1.05);
}

.artist-header-image-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--surface-secondary) 0%, var(--surface-tertiary) 100%);
  color: var(--text-muted);
}

/* Info Section */
.artist-header-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: var(--spacing-sm);
  min-width: 0;
}

/* Title Row: Name + Verified Badge */
.artist-header-title-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

.artist-header-name {
  font-size: 32px;
  font-weight: var(--font-weight-bold);
  letter-spacing: var(--letter-spacing-tight);
  line-height: 1.2;
  color: var(--text-primary);
  margin: 0;
}

/* Verified Badge - Minimal */
.artist-verified-badge-minimal {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--color-verified-bg);
  border-radius: var(--radius-full);
  font-size: 11px;
  font-weight: var(--font-weight-semibold);
  color: var(--color-verified);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.artist-verified-badge-minimal svg {
  color: var(--color-verified);
}

/* Genre Tags */
.artist-header-genres {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-xs);
}

.artist-header-genre-tag {
  padding: 4px 12px;
  background: var(--overlay-light);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  text-transform: capitalize;
}

/* Bio Excerpt */
.artist-header-bio-excerpt {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  line-height: 1.5;
  margin: var(--spacing-xs) 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Bento Stats Grid */
.artist-header-stats {
  display: flex;
  gap: var(--spacing-sm);
  margin: var(--spacing-md) 0;
}

.artist-stat-box {
  display: flex;
  flex-direction: column;
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--glass-bg-subtle);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  min-width: 80px;
}

.artist-stat-box.accent {
  background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.15) 0%, rgba(var(--accent-rgb), 0.05) 100%);
  border-color: rgba(var(--accent-rgb), 0.3);
}

.artist-stat-box .stat-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  line-height: 1.2;
}

.artist-stat-box.accent .stat-value {
  color: var(--accent);
}

.artist-stat-box .stat-label {
  font-size: 10px;
  font-weight: var(--font-weight-medium);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Action Buttons */
.artist-header-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
}

.artist-header-play-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  padding: 10px 24px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-on-accent);
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: 0 4px 12px rgba(var(--accent-rgb), 0.3);
}

.artist-header-play-btn:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(var(--accent-rgb), 0.4);
}

.artist-header-play-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.artist-header-shuffle-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  padding: 10px 20px;
  background: var(--overlay-light);
  backdrop-filter: blur(8px);
  border: 1px solid var(--overlay-medium);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-header-shuffle-btn:hover:not(:disabled) {
  background: var(--overlay-strong);
  transform: scale(1.02);
}

.artist-header-shuffle-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive: Tablet */
@media (max-width: 768px) {
  .artist-header-new {
    min-height: 280px;
    padding: var(--spacing-lg);
  }

  .artist-header-card {
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--spacing-lg);
    gap: var(--spacing-lg);
  }

  .artist-header-image-container {
    width: 140px;
    height: 140px;
  }

  .artist-header-title-row {
    justify-content: center;
  }

  .artist-header-name {
    font-size: 26px;
  }

  .artist-header-genres {
    justify-content: center;
  }

  .artist-header-bio-excerpt {
    text-align: center;
  }

  .artist-header-stats {
    justify-content: center;
  }

  .artist-header-actions {
    justify-content: center;
    flex-wrap: wrap;
  }
}

/* Responsive: Mobile */
@media (max-width: 480px) {
  .artist-header-new {
    min-height: 240px;
    margin: calc(-1 * var(--spacing-md)) calc(-1 * var(--spacing-md)) var(--spacing-md);
    padding: var(--spacing-md);
  }

  .artist-back-btn-new {
    top: var(--spacing-md);
    left: var(--spacing-md);
    padding: 6px 12px 6px 8px;
    font-size: var(--font-size-xs);
  }

  .artist-header-card {
    padding: var(--spacing-md);
    gap: var(--spacing-md);
  }

  .artist-header-image-container {
    width: 100px;
    height: 100px;
  }

  .artist-header-name {
    font-size: 22px;
  }

  .artist-stat-box {
    padding: var(--spacing-xs) var(--spacing-sm);
    min-width: 60px;
  }

  .artist-stat-box .stat-value {
    font-size: var(--font-size-base);
  }

  .artist-header-play-btn,
  .artist-header-shuffle-btn {
    padding: 8px 16px;
    font-size: var(--font-size-xs);
  }
}

/* ============================================
   MAGAZINE STYLE ARTIST HEADER
   Split layout with editorial feel
   ============================================ */

.artist-header-magazine {
  position: relative;
  padding: var(--spacing-xl);
  padding-top: var(--spacing-3xl);
  margin: calc(-1 * var(--spacing-xl)) calc(-1 * var(--spacing-xl)) 0;
  min-height: 320px;
  overflow: hidden;
}

/* Ambient gradient background */
.artist-header-ambient {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--ambient-color) 15%, var(--bg-primary)) 0%,
    color-mix(in srgb, var(--ambient-muted) 8%, var(--bg-primary)) 50%,
    var(--bg-primary) 100%
  );
  z-index: 0;
}

.artist-header-ambient::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse 80% 60% at 20% 40%,
    color-mix(in srgb, var(--ambient-vibrant) 12%, transparent) 0%,
    transparent 70%
  );
}

/* Back button - inline text style */
.artist-back-btn-magazine {
  position: relative;
  z-index: 10;
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-md);
  margin-bottom: var(--spacing-xl);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-back-btn-magazine:hover {
  color: var(--text-primary);
  background: var(--surface-hover);
}

/* Split layout container */
.artist-header-split {
  position: relative;
  z-index: 5;
  display: flex;
  gap: var(--spacing-2xl);
  align-items: flex-start;
}

/* Artist image - large square with subtle shadow */
.artist-header-image-container {
  flex-shrink: 0;
  width: 220px;
  height: 220px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.05);
  transition: transform var(--transition-medium), box-shadow var(--transition-medium);
}

.artist-header-image-container:hover {
  transform: scale(1.02);
  box-shadow:
    0 12px 48px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.08);
}

.artist-header-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.artist-header-image-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--surface-secondary) 0%, var(--surface-tertiary) 100%);
  color: var(--text-muted);
}

/* Right side info */
.artist-header-info {
  flex: 1;
  min-width: 0;
  padding-top: var(--spacing-sm);
}

/* Meta row: Verified + Artist type */
.artist-header-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.artist-verified-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: var(--color-verified-bg);
  border: 1px solid rgba(96, 165, 250, 0.25);
  border-radius: var(--radius-full);
  color: var(--color-verified);
  font-size: 11px;
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.artist-verified-pill svg {
  color: var(--color-info);
}

.artist-type-label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* Artist name - large editorial style */
.artist-name-magazine {
  font-size: 42px;
  font-weight: var(--font-weight-bold);
  letter-spacing: var(--letter-spacing-tight);
  line-height: 1.1;
  color: var(--text-primary);
  margin-bottom: var(--spacing-md);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
}

/* Genre tags - subtle inline style */
.artist-genres-magazine {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.artist-genre-tag {
  padding: 4px 12px;
  background: var(--surface-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  text-transform: capitalize;
  transition: all var(--transition-fast);
}

.artist-genre-tag:hover {
  background: var(--surface-tertiary);
  color: var(--text-primary);
}

/* Bio excerpt */
.artist-bio-excerpt {
  font-size: var(--font-size-sm);
  line-height: 1.6;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
  max-width: 500px;
}

/* Stats row */
.artist-stats-row {
  display: flex;
  gap: var(--spacing-2xl);
  margin-bottom: var(--spacing-xl);
  padding: var(--spacing-md) 0;
  border-top: 1px solid var(--border-subtle);
  border-bottom: 1px solid var(--border-subtle);
}

.artist-stat {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.artist-stat-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  font-variant-numeric: tabular-nums;
}

.artist-stat-label {
  font-size: 11px;
  font-weight: var(--font-weight-medium);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Action buttons - magazine style */
.artist-actions-magazine {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.artist-play-btn-magazine {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 10px 24px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-inverse);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: 0 2px 8px color-mix(in srgb, var(--accent) 30%, transparent);
}

.artist-play-btn-magazine:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 16px color-mix(in srgb, var(--accent) 40%, transparent);
}

.artist-play-btn-magazine:active:not(:disabled) {
  transform: translateY(0);
}

.artist-play-btn-magazine:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.artist-shuffle-btn-magazine {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 10px 20px;
  background: transparent;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-shuffle-btn-magazine:hover:not(:disabled) {
  background: var(--surface-hover);
  border-color: var(--border-hover);
}

.artist-shuffle-btn-magazine:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.artist-radio-btn-magazine {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 10px 20px;
  background: transparent;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.artist-radio-btn-magazine:hover {
  background: var(--surface-hover);
  border-color: var(--border-hover);
}

.artist-radio-btn-magazine:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive: Tablet */
@media (max-width: 768px) {
  .artist-header-magazine {
    padding: var(--spacing-lg);
    padding-top: var(--spacing-2xl);
    min-height: auto;
  }

  .artist-header-split {
    flex-direction: column;
    gap: var(--spacing-xl);
    align-items: center;
    text-align: center;
  }

  .artist-header-image-container {
    width: 180px;
    height: 180px;
  }

  .artist-header-info {
    padding-top: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .artist-header-meta {
    justify-content: center;
  }

  .artist-name-magazine {
    font-size: 32px;
  }

  .artist-genres-magazine {
    justify-content: center;
  }

  .artist-bio-excerpt {
    text-align: center;
  }

  .artist-stats-row {
    justify-content: center;
    gap: var(--spacing-xl);
  }

  .artist-actions-magazine {
    justify-content: center;
  }
}

/* Responsive: Mobile */
@media (max-width: 480px) {
  .artist-header-image-container {
    width: 140px;
    height: 140px;
  }

  .artist-name-magazine {
    font-size: 26px;
  }

  .artist-stats-row {
    gap: var(--spacing-lg);
    flex-wrap: wrap;
  }

  .artist-stat-value {
    font-size: var(--font-size-base);
  }

  .artist-actions-magazine {
    flex-wrap: wrap;
    gap: var(--spacing-sm);
  }

  .artist-play-btn-magazine,
  .artist-shuffle-btn-magazine,
  .artist-radio-btn-magazine {
    padding: 8px 16px;
    font-size: var(--font-size-xs);
  }
}

/* ---- Legacy: Large Hero Section (Spotify-style) ---- */
.artist-hero-large {
  position: relative;
  min-height: 400px;
  margin: calc(-1 * var(--spacing-xl)) calc(-1 * var(--spacing-xl)) 0;
  overflow: hidden;
}

.artist-hero-image-wrapper {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.artist-hero-image-full {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center 25%;
  transition: transform 0.8s ease-out;
}

.artist-hero-large:hover .artist-hero-image-full {
  transform: scale(1.02);
}

.artist-hero-image-placeholder-full {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--ambient-color) 0%, var(--ambient-muted) 100%);
  color: var(--text-muted);
}

/* Gradient overlay: transparent top -> solid bottom */
.artist-hero-gradient-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 20%,
    rgba(10, 10, 10, 0.3) 40%,
    rgba(10, 10, 10, 0.7) 60%,
    var(--bg-primary) 90%,
    var(--bg-primary) 100%
  );
  pointer-events: none;
}

/* Hero Content (positioned at bottom) */
.artist-hero-content {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: var(--spacing-4xl) var(--spacing-xl) var(--spacing-xl);
  z-index: 5;
}

/* Verified Badge (Spotify-style) */
.artist-verified-badge-spotify {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--accent);
}

.artist-verified-badge-spotify svg {
  color: var(--color-info);
  filter: drop-shadow(0 2px 4px var(--color-info-soft));
}

/* Artist Name - 48px bold white */
.artist-name-hero {
  font-size: 48px;
  font-weight: var(--font-weight-black);
  letter-spacing: var(--letter-spacing-tighter);
  line-height: 1.1;
  color: var(--text-hero);
  margin-bottom: var(--spacing-sm);
  text-shadow: 0 4px 24px rgba(0, 0, 0, 0.6);
}

/* Follower count */
.artist-followers-hero {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-normal);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
}

/* Genre Pills (max 3, in hero) */
.artist-genres-hero {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xl);
}

.artist-genre-pill-hero {
  padding: 6px 14px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  text-transform: capitalize;
  transition: all var(--transition-fast);
}

.artist-genre-pill-hero:hover {
  background: rgba(255, 255, 255, 0.18);
  border-color: rgba(255, 255, 255, 0.25);
}

/* Hero Action Buttons: Play | Shuffle | Follow */
.artist-actions-hero {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

/* Large Play Button */
.artist-play-btn-large {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 32px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-full);
  color: var(--text-inverse);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-emphasized);
  box-shadow: 0 4px 16px rgba(var(--accent-rgb), 0.4);
}

.artist-play-btn-large:hover:not(:disabled) {
  transform: scale(1.04);
  box-shadow: 0 6px 24px rgba(var(--accent-rgb), 0.5);
}

.artist-play-btn-large:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Shuffle Button */
.artist-shuffle-btn-large {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 24px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-full);
  color: var(--text-hero);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-emphasized);
}

.artist-shuffle-btn-large:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.18);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.02);
}

.artist-shuffle-btn-large:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Follow Button (Apple-style pill) */
.artist-follow-btn-pill {
  padding: 14px 24px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.6);
  border-radius: var(--radius-full);
  color: var(--text-hero);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-emphasized);
}

.artist-follow-btn-pill:hover {
  background: var(--text-hero);
  color: var(--bg-primary);
  border-color: var(--text-hero);
}

.artist-follow-btn-pill.following {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--accent);
  color: var(--accent);
}

.artist-follow-btn-pill.following:hover {
  background: transparent;
  border-color: var(--color-error);
  color: var(--color-error);
}

/* ---- Content Container ---- */
.artist-content-spotify {
  position: relative;
  z-index: 1;
  padding: var(--spacing-xl) 0;
}

/* ---- Section Titles (24px bold) ---- */
.section-title-spotify {
  font-size: 24px;
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--spacing-lg);
}

/* ---- Popular Tracks Section ---- */
.artist-section-popular {
  margin-bottom: var(--spacing-3xl);
}

.popular-tracks-list {
  display: flex;
  flex-direction: column;
}

/* Clean borderless track rows */
.track-row-clean {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.track-row-clean:hover {
  background: var(--bg-hover);
}

.track-row-clean.playing {
  background: rgba(var(--accent-rgb), 0.1);
}

/* Track Number Cell (number -> play icon on hover) */
.track-number-cell {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  flex-shrink: 0;
}

.track-number {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-tertiary);
  transition: opacity var(--transition-fast);
}

.track-play-icon {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-primary);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.track-row-clean:hover .track-number {
  opacity: 0;
}

.track-row-clean:hover .track-play-icon {
  opacity: 1;
}

.track-row-clean.playing .track-number {
  color: var(--accent);
}

/* Artwork Thumbnail */
.track-artwork-cell {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.track-artwork-cell img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.track-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  color: var(--text-muted);
}

/* Title + Album Cell */
.track-info-cell {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.track-title-clean {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-row-clean.playing .track-title-clean {
  color: var(--accent);
}

.track-album-clean {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Explicit Badge (small) */
.explicit-badge-small {
  padding: 2px 6px;
  background: var(--text-muted);
  color: var(--bg-primary);
  font-size: 9px;
  font-weight: var(--font-weight-bold);
  border-radius: 2px;
  flex-shrink: 0;
  line-height: 1;
}

/* Duration Cell */
.track-duration-cell {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  flex-shrink: 0;
  min-width: 45px;
  text-align: right;
}

/* Loading Skeletons */
.popular-tracks-loading {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.track-row-skeleton {
  height: 56px;
  border-radius: var(--radius-md);
}

/* ---- Discography Section ---- */
.artist-section-discography {
  margin-bottom: var(--spacing-3xl);
}

/* Pill-style Tabs */
.discography-tabs-pills {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: var(--spacing-xs);
}

.discography-tabs-pills::-webkit-scrollbar {
  display: none;
}

.discography-pill-tab {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 10px 20px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
  flex-shrink: 0;
}

.discography-pill-tab:hover {
  background: var(--bg-hover);
  border-color: var(--border-strong);
  color: var(--text-primary);
}

.discography-pill-tab.active {
  background: var(--text-primary);
  border-color: var(--text-primary);
  color: var(--bg-primary);
}

.pill-tab-count {
  font-size: var(--font-size-xs);
  opacity: 0.7;
}

/* Horizontal Scroll Container */
.discography-scroll-container {
  margin: 0 calc(-1 * var(--spacing-xl));
  padding: 0 var(--spacing-xl);
  overflow: hidden;
}

.discography-scroll {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.discography-scroll::-webkit-scrollbar {
  height: 6px;
}

.discography-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.discography-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

.discography-scroll-loading {
  display: flex;
  gap: var(--spacing-lg);
}

/* Album Card (Minimal - 150px, borderless) */
.album-card-minimal {
  flex-shrink: 0;
  width: 150px;
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.album-card-minimal:hover {
  transform: translateY(-4px);
}

.album-card-minimal-artwork {
  position: relative;
  width: 150px;
  height: 150px;
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--bg-tertiary);
  margin-bottom: var(--spacing-sm);
}

.album-card-minimal-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.album-card-minimal:hover .album-card-minimal-artwork img {
  transform: scale(1.05);
}

.album-card-minimal-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

/* Play button overlay on album cards */
.album-card-minimal-play {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent);
  border-radius: var(--radius-full);
  color: var(--text-inverse);
  opacity: 0;
  transform: translateY(8px);
  transition: all var(--transition-emphasized);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.album-card-minimal:hover .album-card-minimal-play {
  opacity: 1;
  transform: translateY(0);
}

.album-card-minimal-title {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-card-minimal-year {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  margin-top: 2px;
}

.album-card-skeleton {
  width: 150px;
  height: 190px;
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

/* ---- Similar Artists Section ---- */
.artist-section-similar {
  margin-bottom: var(--spacing-3xl);
}

.similar-artists-scroll-container {
  margin: 0 calc(-1 * var(--spacing-xl));
  padding: 0 var(--spacing-xl);
  overflow: hidden;
}

.similar-artists-scroll {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.similar-artists-scroll::-webkit-scrollbar {
  height: 6px;
}

.similar-artists-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.similar-artists-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

/* Circular Artist Card */
.similar-artist-card-circular {
  flex-shrink: 0;
  width: 130px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.similar-artist-card-circular:hover {
  transform: scale(1.05);
}

.similar-artist-image-circular {
  width: 130px;
  height: 130px;
  border-radius: var(--radius-full);
  overflow: hidden;
  background: var(--bg-tertiary);
  margin-bottom: var(--spacing-md);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  transition: box-shadow var(--transition-fast);
}

.similar-artist-card-circular:hover .similar-artist-image-circular {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.similar-artist-image-circular img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.similar-artist-placeholder-circular {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.similar-artist-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* ---- Placeholder & Error States ---- */
.section-placeholder,
.section-error {
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--text-muted);
  font-size: var(--font-size-sm);
}

.section-error {
  color: var(--color-error);
}

/* ---- Responsive Adjustments for Spotify-style View ---- */
@media (max-width: 768px) {
  .artist-hero-large {
    min-height: 350px;
  }

  .artist-name-hero {
    font-size: 36px;
  }

  .artist-actions-hero {
    gap: var(--spacing-sm);
  }

  .artist-play-btn-large,
  .artist-shuffle-btn-large,
  .artist-follow-btn-pill {
    padding: 12px 20px;
    font-size: var(--font-size-sm);
  }

  .album-card-minimal {
    width: 140px;
  }

  .album-card-minimal-artwork {
    width: 140px;
    height: 140px;
  }

  .similar-artist-card-circular {
    width: 110px;
  }

  .similar-artist-image-circular {
    width: 110px;
    height: 110px;
  }
}

@media (max-width: 480px) {
  .artist-hero-large {
    min-height: 300px;
    margin: calc(-1 * var(--spacing-md)) calc(-1 * var(--spacing-md)) 0;
  }

  .artist-hero-content {
    padding: var(--spacing-3xl) var(--spacing-md) var(--spacing-md);
  }

  .artist-name-hero {
    font-size: 28px;
  }

  .artist-followers-hero {
    font-size: var(--font-size-sm);
  }

  .artist-genres-hero {
    margin-bottom: var(--spacing-md);
  }

  .artist-genre-pill-hero {
    padding: 4px 10px;
    font-size: 10px;
  }

  .artist-actions-hero {
    flex-wrap: wrap;
  }

  .artist-play-btn-large,
  .artist-shuffle-btn-large,
  .artist-follow-btn-pill {
    padding: 10px 16px;
  }

  .section-title-spotify {
    font-size: 20px;
  }

  .discography-scroll-container,
  .similar-artists-scroll-container {
    margin: 0 calc(-1 * var(--spacing-md));
    padding: 0 var(--spacing-md);
  }

  .album-card-minimal {
    width: 120px;
  }

  .album-card-minimal-artwork {
    width: 120px;
    height: 120px;
  }

  .similar-artist-card-circular {
    width: 100px;
  }

  .similar-artist-image-circular {
    width: 100px;
    height: 100px;
  }

  .track-duration-cell {
    display: none;
  }
}

/* ========================================
   ALBUM DETAIL VIEW
   ======================================== */

.album-detail-view {
  animation: fadeIn 0.3s ease-out;
}

.album-detail-header {
  margin-bottom: var(--spacing-xl);
}

.album-detail-header .back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-detail-header .back-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-strong);
}

.album-hero {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-2xl);
  margin-bottom: var(--spacing-3xl);
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
}

.album-hero-artwork {
  width: 220px;
  height: 220px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: var(--shadow-lg);
}

.album-hero-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.album-hero-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.album-hero-info {
  flex: 1;
  min-width: 0;
}

.album-hero-title {
  font-size: var(--font-size-4xl);
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
  color: var(--text-primary);
}

.album-hero-artist {
  font-size: var(--font-size-lg);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xs);
  cursor: pointer;
}

.album-hero-artist:hover {
  color: var(--text-primary);
  text-decoration: underline;
}

.album-hero-meta {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  margin-bottom: var(--spacing-lg);
}

.album-hero-actions {
  display: flex;
  gap: var(--spacing-md);
}

.album-play-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 12px 28px;
  background: var(--gradient-accent);
  border: none;
  border-radius: var(--radius-full);
  color: var(--text-inverse);
  font-size: var(--font-size-base);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-glow);
}

.album-play-btn:hover:not(:disabled) {
  transform: scale(1.02);
  box-shadow: var(--shadow-glow-strong);
}

.album-play-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.album-shuffle-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: var(--radius-full);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-shuffle-btn:hover:not(:disabled) {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-strong);
}

.album-content {
  position: relative;
  z-index: 1;
}

.album-tracks-header {
  display: flex;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-lg);
  border-bottom: 1px solid var(--border-color);
  color: var(--text-muted);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.album-tracks-header .track-number {
  width: 32px;
}

.album-tracks-header .track-title {
  flex: 1;
}

.album-tracks-header .track-duration {
  width: 60px;
  text-align: right;
}

.album-tracks-list {
  background: var(--bg-elevated);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  overflow: hidden;
  margin-bottom: var(--spacing-3xl);
}

.album-track-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: 12px var(--spacing-lg);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.album-track-row:hover {
  background: var(--bg-hover);
}

.album-track-row.playing {
  background: var(--accent-soft);
}

.album-track-number {
  width: 32px;
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
}

.album-track-row.playing .album-track-number {
  color: var(--accent);
}

.album-track-info {
  flex: 1;
  min-width: 0;
}

.album-track-title {
  display: block;
  font-size: var(--font-size-base);
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-row.playing .album-track-title {
  color: var(--accent);
}

.album-track-artists {
  display: block;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-duration {
  width: 60px;
  text-align: right;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
}

.album-section {
  margin-bottom: var(--spacing-3xl);
}

.album-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
}

.album-section-title {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--text-primary);
}

.album-section-placeholder {
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--text-muted);
  font-size: var(--font-size-sm);
}

.album-more-scroll {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.album-more-scroll::-webkit-scrollbar {
  height: 6px;
}

.album-more-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.album-more-scroll::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

.album-more-scroll .album-card {
  flex-shrink: 0;
  width: 170px;
}

.album-not-found {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-4xl);
  color: var(--text-muted);
}

.album-not-found button {
  padding: 10px 24px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-not-found button:hover {
  background: var(--bg-hover);
}

.album-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-md);
  padding: var(--spacing-2xl);
  color: var(--text-secondary);
}

.album-loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border-color);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* ========================================
   ALBUM DETAIL VIEW - EDITORIAL REDESIGN
   Modern, immersive album experience
   ======================================== */

/* Ambient Background - Blurred artwork overlay */
.album-ambient-bg {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 60vh;
  background-size: cover;
  background-position: center top;
  filter: blur(120px);
  opacity: 0.25;
  z-index: 0;
  pointer-events: none;
  transform: scale(1.2);
}

.album-ambient-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 40%,
    var(--bg-primary) 100%
  );
}

/* ========================================
   Common Round Back Button
   Use this class for consistent back buttons
   ======================================== */
.back-btn-round {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.back-btn-round:hover {
  background: var(--bg-hover);
  transform: scale(1.05);
}

.back-btn-round:active {
  transform: scale(0.95);
}

/* Position variants for back button */
.artist-back-btn-pos {
  position: relative;
  z-index: 10;
  margin-bottom: var(--spacing-xl);
}

.plugin-back-btn-pos,
.playlist-back-btn-pos,
.mix-back-btn-pos {
  position: relative;
  z-index: 10;
}

.hero-back-btn {
  position: absolute;
  top: var(--spacing-lg);
  left: var(--spacing-lg);
  z-index: 20;
}

/* Back Button (Album specific positioning) */
.album-back-btn {
  position: sticky;
  top: var(--spacing-lg);
  left: var(--spacing-lg);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
  margin-bottom: var(--spacing-md);
}

.album-back-btn:hover {
  background: var(--bg-hover);
  transform: scale(1.05);
}

/* Hero Section - Editorial Grid Layout */
.album-hero-editorial {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: var(--spacing-3xl);
  padding: var(--spacing-xl) var(--spacing-2xl);
  margin-bottom: var(--spacing-2xl);
}

/* Artwork Showcase with Reflection */
.album-artwork-showcase {
  position: relative;
  width: 320px;
  flex-shrink: 0;
}

.album-artwork-main {
  width: 320px;
  height: 320px;
  border-radius: var(--radius-lg);
  object-fit: cover;
  box-shadow: var(--shadow-elevated);
  transition: transform var(--transition-emphasized);
}

.album-artwork-showcase:hover .album-artwork-main {
  transform: scale(1.02);
}

.album-artwork-reflection {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  height: 120px;
  background-size: cover;
  background-position: bottom center;
  transform: scaleY(-1);
  opacity: 0.15;
  filter: blur(8px);
  mask-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, transparent 100%);
  border-radius: var(--radius-lg);
  pointer-events: none;
}

.album-artwork-placeholder {
  width: 320px;
  height: 320px;
  border-radius: var(--radius-lg);
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

/* Hero Content */
.album-hero-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-top: var(--spacing-xl);
}

/* Album Type Badge */
.album-type-badge-editorial {
  display: inline-block;
  padding: 4px 12px;
  background: var(--glass-bg-subtle);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-wider);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-md);
  width: fit-content;
}

/* Album Title */
.album-title-editorial {
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-black);
  letter-spacing: var(--letter-spacing-tight);
  color: var(--text-primary);
  margin: 0 0 var(--spacing-md) 0;
  line-height: 1.1;
}

/* Meta Row: artist . year . tracks . duration */
.album-meta-row {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  font-size: var(--font-size-base);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
}

.album-artist-link-editorial {
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: color var(--transition-fast);
}

.album-artist-link-editorial:hover {
  color: var(--accent);
  text-decoration: underline;
}

.album-meta-separator {
  color: var(--text-muted);
  margin: 0 var(--spacing-xs);
}

.album-meta-item {
  color: var(--text-secondary);
}

/* Genres */
.album-genres-editorial {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xl);
}

.album-genre-tag {
  padding: 4px 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
  transition: all var(--transition-fast);
}

.album-genre-tag:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Action Buttons */
.album-actions-editorial {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-top: auto;
}

.album-play-btn-editorial {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 32px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-full);
  color: var(--text-inverse);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-glow);
}

.album-play-btn-editorial:hover:not(:disabled) {
  transform: scale(1.03);
  box-shadow: var(--shadow-glow-strong);
}

.album-play-btn-editorial:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.album-shuffle-btn-editorial {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 14px 24px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-shuffle-btn-editorial:hover:not(:disabled) {
  background: var(--bg-hover);
  border-color: var(--border-strong);
}

.album-shuffle-btn-editorial:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.album-more-btn-editorial {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: var(--radius-full);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-more-btn-editorial:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Description Section */
.album-description-editorial {
  position: relative;
  z-index: 1;
  padding: 0 var(--spacing-2xl);
  margin-bottom: var(--spacing-2xl);
}

.album-description-editorial p {
  font-size: var(--font-size-base);
  color: var(--text-secondary);
  line-height: 1.6;
  max-width: 720px;
}

/* Track List - Glass Container */
.album-tracks-glass {
  position: relative;
  z-index: 1;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-xl);
  margin: 0 var(--spacing-2xl) var(--spacing-2xl);
  overflow: hidden;
}

.album-tracks-header-glass {
  display: grid;
  grid-template-columns: 48px 1fr 80px;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  border-bottom: 1px solid var(--glass-border);
  color: var(--text-muted);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-wider);
}

.track-col-number {
  text-align: center;
}

.track-col-info {
  padding-left: var(--spacing-sm);
}

.track-col-duration {
  text-align: right;
}

.album-track-row-glass {
  display: grid;
  grid-template-columns: 48px 1fr 80px;
  align-items: center;
  padding: 12px var(--spacing-lg);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.album-track-row-glass:hover {
  background: var(--bg-hover);
}

.album-track-row-glass.playing {
  background: color-mix(in srgb, var(--ambient-color, var(--accent)) 10%, transparent);
}

.album-track-number-glass {
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  font-variant-numeric: tabular-nums;
}

.album-track-row-glass.playing .album-track-number-glass {
  color: var(--accent);
}

/* Playing indicator animation */
.track-playing-indicator {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 2px;
  height: 14px;
}

.track-playing-indicator .bar {
  width: 3px;
  background: var(--accent);
  border-radius: 1px;
  animation: soundBars 0.8s ease-in-out infinite;
}

.track-playing-indicator .bar:nth-child(1) {
  height: 60%;
  animation-delay: 0s;
}

.track-playing-indicator .bar:nth-child(2) {
  height: 100%;
  animation-delay: 0.2s;
}

.track-playing-indicator .bar:nth-child(3) {
  height: 40%;
  animation-delay: 0.4s;
}

@keyframes soundBars {
  0%, 100% {
    transform: scaleY(1);
  }
  50% {
    transform: scaleY(0.5);
  }
}

.album-track-info-glass {
  min-width: 0;
  padding-left: var(--spacing-sm);
}

.album-track-title-glass {
  display: block;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-row-glass.playing .album-track-title-glass {
  color: var(--accent);
}

.album-track-subtitle-glass {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-top: 2px;
}

.explicit-badge-small {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  background: var(--text-muted);
  color: var(--bg-primary);
  font-size: 9px;
  font-weight: var(--font-weight-bold);
  border-radius: 2px;
  flex-shrink: 0;
}

.album-track-artists-glass {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-duration-glass {
  text-align: right;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  font-variant-numeric: tabular-nums;
}

/* Footer - Editorial Style */
.album-footer-editorial {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: var(--spacing-xl) var(--spacing-2xl);
  margin-bottom: var(--spacing-2xl);
}

.album-footer-info-editorial {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.album-release-text {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  margin: 0;
}

.album-label-text {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  margin: 0;
}

.album-copyright-text {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin: 0;
}

/* Show Credits Pill Button */
.show-credits-pill {
  padding: 10px 20px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.show-credits-pill:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-strong);
}

/* More by Artist Section */
.album-more-section-editorial {
  position: relative;
  z-index: 1;
  padding: 0 var(--spacing-2xl);
  margin-top: var(--spacing-3xl);
}

.section-title-editorial {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin: 0 0 var(--spacing-lg) 0;
}

/* Responsive adjustments for editorial layout */
@media (max-width: 900px) {
  .album-hero-editorial {
    grid-template-columns: 1fr;
    gap: var(--spacing-xl);
    padding: var(--spacing-lg);
  }

  .album-artwork-showcase {
    width: 100%;
    max-width: 280px;
    margin: 0 auto;
  }

  .album-artwork-main {
    width: 100%;
    height: auto;
    aspect-ratio: 1;
  }

  .album-artwork-placeholder {
    width: 100%;
    height: auto;
    aspect-ratio: 1;
  }

  .album-hero-content {
    text-align: center;
    align-items: center;
    padding-top: 0;
  }

  .album-title-editorial {
    font-size: var(--font-size-2xl);
  }

  .album-meta-row {
    justify-content: center;
  }

  .album-genres-editorial {
    justify-content: center;
  }

  .album-actions-editorial {
    justify-content: center;
  }

  .album-tracks-glass {
    margin: 0 var(--spacing-lg) var(--spacing-xl);
    border-radius: var(--radius-lg);
  }

  .album-description-editorial,
  .album-footer-editorial,
  .album-more-section-editorial {
    padding-left: var(--spacing-lg);
    padding-right: var(--spacing-lg);
  }

  .album-footer-editorial {
    flex-direction: column;
    gap: var(--spacing-lg);
    align-items: center;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .album-ambient-bg {
    height: 50vh;
  }

  .album-title-editorial {
    font-size: var(--font-size-xl);
  }

  .album-play-btn-editorial {
    padding: 12px 24px;
  }

  .album-shuffle-btn-editorial {
    padding: 12px 18px;
  }

  .album-tracks-header-glass {
    grid-template-columns: 40px 1fr 60px;
    padding: var(--spacing-sm) var(--spacing-md);
  }

  .album-track-row-glass {
    grid-template-columns: 40px 1fr 60px;
    padding: 10px var(--spacing-md);
  }
}

/* ========================================
   ALBUM DETAIL VIEW - CENTERED DESIGN
   Apple + Spotify hybrid: centered layout, clean track list
   ======================================== */

.album-detail-centered {
  position: relative;
  padding-bottom: var(--spacing-4xl);
}

/* Ambient Background - Soft blur with 0.2-0.3 opacity */
.album-ambient-bg-centered {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 65vh;
  background-size: cover;
  background-position: center top;
  filter: blur(100px);
  opacity: 0.25;
  z-index: 0;
  pointer-events: none;
  transform: scale(1.3);
}

.album-ambient-bg-centered::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 30%,
    var(--bg-primary) 100%
  );
}

/* Hero Section - Centered Layout */
.album-hero-centered {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: var(--spacing-xl) var(--spacing-2xl) var(--spacing-2xl);
  max-width: 700px;
  margin: 0 auto;
}

/* Artwork Container with Glow */
.album-artwork-centered {
  position: relative;
  width: 280px;
  height: 280px;
  margin-bottom: var(--spacing-xl);
}

.album-artwork-img-centered {
  width: 280px;
  height: 280px;
  border-radius: var(--radius-lg);
  object-fit: cover;
  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
  transition: transform var(--transition-emphasized);
}

.album-artwork-centered:hover .album-artwork-img-centered {
  transform: scale(1.02);
}

.album-artwork-placeholder-centered {
  width: 280px;
  height: 280px;
  border-radius: var(--radius-lg);
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

/* Soft ambient glow under artwork */
.album-artwork-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 350px;
  border-radius: 50%;
  z-index: -1;
  opacity: 0.6;
  filter: blur(40px);
  pointer-events: none;
}

/* Album Info - Centered */
.album-info-centered {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
}

/* Type Badge - Small caps style */
.album-type-badge-centered {
  font-size: 11px;
  font-weight: var(--font-weight-semibold);
  letter-spacing: 1.5px;
  color: var(--text-muted);
  text-transform: uppercase;
  margin-bottom: var(--spacing-xs);
}

/* Album Title - 32px bold */
.album-title-centered {
  font-size: 32px;
  font-weight: var(--font-weight-bold);
  letter-spacing: var(--letter-spacing-tight);
  color: var(--text-primary);
  margin: 0;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
  max-width: 100%;
}

/* Meta row: Artist . Year . Songs */
.album-meta-centered {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  margin-top: var(--spacing-xs);
}

.album-artist-link-centered {
  color: var(--text-primary);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: color var(--transition-fast);
}

.album-artist-link-centered:hover {
  color: var(--accent);
  text-decoration: underline;
}

.album-meta-dot {
  color: var(--text-muted);
  margin: 0 2px;
}

/* Action Buttons - Pill shaped */
.album-actions-centered {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-md);
  margin-top: var(--spacing-lg);
}

/* Play Button - Filled pill */
.album-play-btn-pill {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 12px 28px;
  background: var(--accent);
  border: none;
  border-radius: 20px;
  color: var(--text-inverse);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: 0 4px 16px color-mix(in srgb, var(--accent) 40%, transparent);
}

.album-play-btn-pill:hover:not(:disabled) {
  transform: scale(1.03);
  box-shadow: 0 6px 24px color-mix(in srgb, var(--accent) 50%, transparent);
}

.album-play-btn-pill:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Shuffle Button - Transparent/outline pill */
.album-shuffle-btn-pill {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 12px 24px;
  background: transparent;
  border: 1px solid var(--border-color);
  border-radius: 20px;
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-shuffle-btn-pill:hover:not(:disabled) {
  background: var(--bg-hover);
  border-color: var(--border-strong);
}

.album-shuffle-btn-pill:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* More Button - Icon only pill */
.album-more-btn-pill {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: transparent;
  border: 1px solid var(--border-color);
  border-radius: 20px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.album-more-btn-pill:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-strong);
}

/* Track List - Clean, borderless */
.album-tracks-clean {
  position: relative;
  z-index: 1;
  max-width: 900px;
  margin: 0 auto;
  padding: 0 var(--spacing-2xl);
}

.album-tracks-header-clean {
  display: grid;
  grid-template-columns: 48px 1fr 70px;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-md);
  color: var(--text-muted);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-wider);
  border-bottom: 1px solid var(--border-light);
  margin-bottom: var(--spacing-xs);
}

.track-col-num {
  text-align: center;
}

.track-col-title {
  padding-left: var(--spacing-sm);
}

.track-col-dur {
  text-align: right;
}

.album-tracks-list-clean {
  display: flex;
  flex-direction: column;
}

/* Track Row - Clean, minimal */
.album-track-row-clean {
  position: relative;
  display: grid;
  grid-template-columns: 48px 1fr 70px;
  align-items: center;
  padding: 10px var(--spacing-md);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.album-track-row-clean:hover {
  background: var(--bg-hover);
}

.album-track-row-clean.playing {
  background: transparent;
}

/* Playing indicator bar on left edge */
.track-playing-bar {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 60%;
  background: var(--accent);
  border-radius: 2px;
}

.album-track-num-clean {
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  font-variant-numeric: tabular-nums;
}

.album-track-row-clean.playing .album-track-num-clean {
  color: var(--accent);
}

.album-track-info-clean {
  min-width: 0;
  padding-left: var(--spacing-sm);
}

.album-track-title-clean {
  display: block;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-row-clean.playing .album-track-title-clean {
  color: var(--accent);
}

.album-track-subtitle-clean {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-top: 2px;
}

.album-track-artists-clean {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-track-dur-clean {
  text-align: right;
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  font-variant-numeric: tabular-nums;
}

/* Footer - Subtle divider, muted text */
.album-footer-clean {
  position: relative;
  z-index: 1;
  max-width: 900px;
  margin: var(--spacing-3xl) auto 0;
  padding: 0 var(--spacing-2xl);
}

.album-footer-divider {
  width: 100%;
  height: 1px;
  background: var(--border-light);
  margin-bottom: var(--spacing-lg);
}

.album-footer-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.album-footer-text {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  margin: 0;
}

.album-footer-copyright {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  opacity: 0.7;
}

.album-credits-link {
  display: inline-block;
  padding: var(--spacing-sm) 0;
  background: none;
  border: none;
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: color var(--transition-fast);
  margin-top: var(--spacing-sm);
}

.album-credits-link:hover {
  color: var(--text-primary);
  text-decoration: underline;
}

/* More by Artist Section */
.album-more-section-clean {
  position: relative;
  z-index: 1;
  max-width: 900px;
  margin: var(--spacing-3xl) auto 0;
  padding: 0 var(--spacing-2xl);
}

.album-more-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin: 0 0 var(--spacing-lg) 0;
}

.album-more-scroll-clean {
  display: flex;
  gap: var(--spacing-lg);
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: var(--spacing-md);
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.album-more-scroll-clean::-webkit-scrollbar {
  height: 6px;
}

.album-more-scroll-clean::-webkit-scrollbar-track {
  background: transparent;
}

.album-more-scroll-clean::-webkit-scrollbar-thumb {
  background: var(--border-light);
  border-radius: 3px;
}

/* Album Card - Clean style */
.album-card-clean {
  flex-shrink: 0;
  width: 160px;
  cursor: pointer;
  transition: transform var(--transition-fast);
}

.album-card-clean:hover {
  transform: translateY(-4px);
}

.album-card-image-clean {
  position: relative;
  width: 160px;
  height: 160px;
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: var(--spacing-sm);
}

.album-card-image-clean img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-emphasized);
}

.album-card-clean:hover .album-card-image-clean img {
  transform: scale(1.05);
}

.album-card-placeholder-clean {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.album-card-play-clean {
  position: absolute;
  bottom: var(--spacing-sm);
  right: var(--spacing-sm);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--accent);
  color: var(--text-inverse);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: translateY(8px);
  transition: all var(--transition-fast);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.album-card-clean:hover .album-card-play-clean {
  opacity: 1;
  transform: translateY(0);
}

.album-card-info-clean {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.album-card-title-clean {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-card-year-clean {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
}

/* Responsive adjustments for centered layout */
@media (max-width: 768px) {
  .album-hero-centered {
    padding: var(--spacing-lg);
  }

  .album-artwork-centered,
  .album-artwork-img-centered,
  .album-artwork-placeholder-centered {
    width: 220px;
    height: 220px;
  }

  .album-artwork-glow {
    width: 280px;
    height: 280px;
  }

  .album-title-centered {
    font-size: 26px;
  }

  .album-tracks-clean,
  .album-footer-clean,
  .album-more-section-clean {
    padding-left: var(--spacing-lg);
    padding-right: var(--spacing-lg);
  }

  .album-tracks-header-clean,
  .album-track-row-clean {
    grid-template-columns: 40px 1fr 60px;
  }
}

@media (max-width: 480px) {
  .album-ambient-bg-centered {
    height: 50vh;
  }

  .album-artwork-centered,
  .album-artwork-img-centered,
  .album-artwork-placeholder-centered {
    width: 180px;
    height: 180px;
  }

  .album-artwork-glow {
    width: 240px;
    height: 240px;
  }

  .album-title-centered {
    font-size: 22px;
  }

  .album-actions-centered {
    flex-wrap: wrap;
  }

  .album-play-btn-pill,
  .album-shuffle-btn-pill {
    padding: 10px 20px;
    font-size: var(--font-size-xs);
  }

  .album-card-clean {
    width: 140px;
  }

  .album-card-image-clean {
    width: 140px;
    height: 140px;
  }
}

/* Full Player */
/* ========================================
   FULL PLAYER - Full-screen Component
   ======================================== */

.full-player {
  position: fixed;
  inset: 0;
  z-index: var(--z-player-full);
  background: #0a0a0a;
  display: flex;
  flex-direction: column;
  animation: slideUpFullPlayer var(--transition-player) forwards;

  /* Force dark mode styling - always light text on artwork backgrounds (Apple approach) */
  --fp-text-primary: #f0f0f0;
  --fp-text-secondary: #a3a3a3;
  --fp-text-muted: #737373;
  --fp-text-inverse: #0a0a0a;
  --fp-bg-tertiary: rgba(255, 255, 255, 0.08);
  --fp-bg-elevated: rgba(255, 255, 255, 0.12);
  --fp-overlay-light: rgba(255, 255, 255, 0.1);
  --fp-overlay-medium: rgba(255, 255, 255, 0.15);
  --fp-overlay-strong: rgba(255, 255, 255, 0.2);
  --fp-overlay-dark: rgba(0, 0, 0, 0.4);
  --fp-progress-track: rgba(255, 255, 255, 0.2);
  --fp-progress-track-hover: rgba(255, 255, 255, 0.3);
  --fp-bg-hover: rgba(255, 255, 255, 0.1);
  --fp-border-color: rgba(255, 255, 255, 0.1);
}

@keyframes slideUpFullPlayer {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

/* Animated gradient background */
.full-player-animated-bg {
  position: absolute;
  inset: -50%;
  width: 200%;
  height: 200%;
  z-index: -2;
  background:
    radial-gradient(ellipse at 20% 30%, var(--bg-primary) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, var(--bg-secondary) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 80%, var(--bg-accent) 0%, transparent 40%),
    radial-gradient(ellipse at 70% 60%, var(--bg-primary) 0%, transparent 45%);
  animation: ambientFlow 20s ease-in-out infinite;
  opacity: 0.9;
  transition: all 1.5s ease-out;
}

@keyframes ambientFlow {
  0%, 100% {
    transform: translate(0%, 0%) rotate(0deg) scale(1);
  }
  25% {
    transform: translate(5%, -5%) rotate(2deg) scale(1.05);
  }
  50% {
    transform: translate(-3%, 3%) rotate(-1deg) scale(1.02);
  }
  75% {
    transform: translate(-5%, -3%) rotate(1deg) scale(1.08);
  }
}

.full-player-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: blur(100px) brightness(0.25);
  transform: scale(1.2);
  z-index: -1;
  opacity: 0.7;
  mix-blend-mode: overlay;
}

.full-player-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  flex-shrink: 0;
}

.full-player-collapse {
  background: none;
  border: none;
  color: var(--fp-text-primary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.full-player-collapse:hover {
  background: var(--fp-overlay-light);
}

.full-player-header-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.full-player-from {
  font-size: 11px;
  color: var(--fp-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.full-player-source {
  font-size: 13px;
  color: var(--fp-text-primary);
  font-weight: 500;
}

.full-player-source.clickable {
  cursor: pointer;
  transition: color var(--transition-fast);
}

.full-player-source.clickable:hover {
  color: var(--accent-primary);
  text-decoration: underline;
}

.full-player-lyrics-toggle {
  background: none;
  border: none;
  color: var(--fp-text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.full-player-lyrics-toggle:hover {
  background: var(--fp-overlay-light);
  color: var(--fp-text-primary);
}

.full-player-lyrics-toggle.active {
  color: var(--accent);
}

.full-player-content {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px 48px;
  gap: 48px;
  min-height: 0;
  overflow: hidden;
}

/* Without lyrics - artwork centered and larger */
.full-player-content:not(.with-lyrics) .full-player-artwork-container {
  max-width: 450px;
  width: 100%;
}

/* With lyrics - artwork and lyrics side by side */
.full-player-content.with-lyrics {
  justify-content: center;
  gap: 64px;
}

.full-player-artwork-container {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.full-player-content.with-lyrics .full-player-artwork {
  width: 400px;
  height: 400px;
}

.full-player-artwork {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 12px;
  box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5);
  object-fit: cover;
}

.full-player-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--fp-bg-tertiary);
  color: var(--fp-text-muted);
}

/* Animated Video Artwork */
.full-player-video {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 12px;
  box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5);
  object-fit: cover;
  background: var(--fp-bg-tertiary);
}

/* Tall aspect ratio video support */
.full-player-video[data-aspect="tall"] {
  aspect-ratio: 9 / 16;
  max-height: 80vh;
  width: auto;
}

.full-player-lyrics-container {
  flex: 1;
  min-width: 350px;
  max-width: 500px;
  height: 100%;
  max-height: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  background: var(--fp-overlay-dark);
  border-radius: 12px;
}

.full-player-footer {
  padding: 24px 48px 32px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  flex-shrink: 0;
}

.full-player-track-info {
  text-align: center;
  max-width: 100%;
}

.full-player-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--fp-text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.full-player-title.clickable {
  cursor: pointer;
  transition: color var(--transition-fast);
}

.full-player-title.clickable:hover {
  color: var(--accent-primary);
  text-decoration: underline;
}

.full-player-artist {
  font-size: 16px;
  color: var(--fp-text-secondary);
}

.full-player-artist.clickable {
  cursor: pointer;
  transition: color var(--transition-fast);
}

.full-player-artist.clickable:hover {
  color: var(--fp-text-primary);
  text-decoration: underline;
}

.full-player-progress {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  max-width: 600px;
}

.full-player-time {
  font-size: 12px;
  color: var(--fp-text-secondary);
  min-width: 40px;
  text-align: center;
}

.full-player-progress-bar {
  flex: 1;
  height: 6px;
  background: var(--fp-progress-track);
  border-radius: 3px;
  cursor: pointer;
  position: relative;
  transition: height var(--transition-fast);
}

.full-player-progress-bar:hover {
  height: 8px;
}

.full-player-progress-bar:active {
  cursor: grabbing;
}

.full-player-progress-fill {
  height: 100%;
  background: var(--fp-text-primary);
  border-radius: 3px;
  position: relative;
  pointer-events: none;
}

.full-player-progress-bar:hover .full-player-progress-fill {
  background: var(--accent);
}

.full-player-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
}

.full-player-btn {
  background: none;
  border: none;
  color: var(--fp-text-primary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.full-player-btn:hover {
  transform: scale(1.1);
}

.full-player-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.full-player-btn.secondary {
  color: var(--fp-text-secondary);
}

.full-player-btn.secondary:hover {
  color: var(--fp-text-primary);
}

.full-player-btn.secondary.active {
  color: var(--accent);
}

.full-player-btn.primary {
  background: var(--gradient-accent);
  color: var(--fp-text-inverse);
  width: 72px;
  height: 72px;
  box-shadow: var(--shadow-glow);
}

.full-player-btn.primary:hover {
  transform: scale(1.06);
  box-shadow: 0 0 40px var(--accent-glow);
}

.full-player-loading {
  width: 24px;
  height: 24px;
  border: 3px solid rgba(0, 0, 0, 0.2);
  border-top-color: var(--bg-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.full-player-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.full-player-action {
  background: none;
  border: none;
  color: var(--fp-text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.full-player-action:hover {
  color: var(--fp-text-primary);
}

.full-player-action.active {
  color: var(--accent);
}

/* Lyrics Display (within full player - uses forced dark styling) */
.lyrics-display {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--fp-text-secondary);
}

.lyrics-loading,
.lyrics-error,
.lyrics-empty,
.lyrics-disabled {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-size: 14px;
  color: var(--fp-text-secondary);
}

.lyrics-disabled {
  opacity: 0.6;
}

.lyrics-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--fp-overlay-strong);
  border-top-color: var(--fp-text-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.lyrics-synced,
.lyrics-plain {
  overflow-y: auto;
  scroll-behavior: smooth;
  padding: 48px 0;
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 15%,
    black 85%,
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 15%,
    black 85%,
    transparent 100%
  );
}

.lyrics-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.lyrics-line {
  font-size: 20px;
  font-weight: 500;
  color: var(--fp-text-muted);
  transition: all 0.3s ease;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  line-height: 1.4;
}

.lyrics-line:hover {
  background: var(--fp-overlay-light);
}

.lyrics-line.active {
  font-size: 24px;
  font-weight: 700;
  color: var(--fp-text-primary);
}

.lyrics-line.past {
  color: var(--fp-text-secondary);
}

.lyrics-line.plain {
  font-size: 16px;
  cursor: default;
  color: var(--fp-text-secondary);
}

.lyrics-line.plain:hover {
  background: none;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ========================================
   Plugins View
   ======================================== */

/* ========================================
   UNIFIED PAGE LAYOUT
   Use .page-view for all main content pages
   ======================================== */

.plugins-view {
  max-width: 1000px;
  margin: 0 auto;
  position: relative;
}

.plugins-view::before {
  content: '';
  position: absolute;
  top: -60px;
  left: -60px;
  right: -60px;
  height: 350px;
  background: radial-gradient(ellipse at 30% 0%, rgba(139, 92, 246, 0.12) 0%, transparent 60%);
  pointer-events: none;
  z-index: -1;
}

.plugins-header {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-xl);
  margin-bottom: var(--spacing-2xl);
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
  position: relative;
}

.plugins-header-icon {
  width: 160px;
  height: 160px;
  border-radius: var(--radius-xl);
  background: var(--gradient-purple);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-primary);
  flex-shrink: 0;
  box-shadow: var(--shadow-elevated);
  transition: transform var(--transition-spring);
}

.plugins-header-icon:hover {
  transform: scale(1.02);
}

.plugins-header-info {
  flex: 1;
}

.plugins-header-type {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.plugins-header-title {
  font-size: 48px;
  font-weight: 800;
  margin: 10px 0;
  letter-spacing: -0.5px;
  line-height: 1.1;
}

.plugins-header-count {
  color: var(--text-secondary);
  font-size: 14px;
}

.plugins-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
}

.plugins-filter {
  padding: 8px 16px;
  border-radius: 20px;
  border: none;
  background: var(--bg-secondary);
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.plugins-filter:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.plugins-filter.active {
  background: var(--text-primary);
  color: var(--bg-primary);
}

.plugins-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plugins-empty {
  text-align: center;
  padding: 80px 32px;
  color: var(--text-secondary);
  animation: fadeSlideUp 0.5s ease-out;
}

.plugins-empty svg {
  margin-bottom: 20px;
  opacity: 0.3;
  animation: float 3s ease-in-out infinite;
}

.plugins-empty h3 {
  font-size: 26px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 10px;
}

.plugins-empty p {
  max-width: 300px;
  margin: 0 auto;
  line-height: 1.5;
}

/* Plugin Card */
.plugin-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.plugin-card:hover {
  background: var(--bg-tertiary);
}

.plugin-card-icon {
  width: 56px;
  height: 56px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-on-accent);
  flex-shrink: 0;
}

.plugin-card-icon img {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

.plugin-card-info {
  flex: 1;
  min-width: 0;
}

.plugin-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.plugin-card-name {
  font-size: 16px;
  font-weight: 600;
}

.plugin-card-version {
  font-size: 12px;
  color: var(--text-muted);
  background: var(--bg-hover);
  padding: 2px 6px;
  border-radius: 4px;
}

.plugin-card-description {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 8px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.plugin-card-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
}

.plugin-card-category {
  font-weight: 600;
}

.plugin-card-author {
  color: var(--text-muted);
}

.plugin-card-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}

.plugin-card-arrow {
  color: var(--text-muted);
}

/* Plugin Card Drag Handle */
.plugin-card-drag-handle {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 8px 4px;
  margin-right: 4px;
  color: var(--text-muted);
  cursor: grab;
  border-radius: 6px;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.plugin-card-drag-handle:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.plugin-card-drag-handle:active {
  cursor: grabbing;
}

.plugin-card-priority {
  font-size: 10px;
  font-weight: 700;
  color: var(--accent-primary);
  min-width: 16px;
  text-align: center;
}

.plugin-card.dragging {
  box-shadow: var(--shadow-lg);
  background: var(--bg-tertiary);
}

/* Plugin Priority Hint */
.plugins-priority-hint {
  padding: 12px 16px;
  margin-bottom: 16px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border-left: 3px solid var(--accent-primary);
}

.plugins-priority-hint span {
  font-size: 13px;
  color: var(--text-secondary);
}

/* Plugin Toggle Switch */
.plugin-toggle {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 28px;
}

.plugin-toggle input {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
  z-index: 2;
  margin: 0;
}

.plugin-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-hover);
  transition: 0.3s;
  border-radius: 28px;
}

.plugin-toggle-slider:before {
  position: absolute;
  content: "";
  height: 22px;
  width: 22px;
  left: 3px;
  bottom: 3px;
  background-color: var(--text-primary);
  transition: 0.3s;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.plugin-toggle input:checked + .plugin-toggle-slider {
  background-color: var(--accent);
}

.plugin-toggle input:checked + .plugin-toggle-slider:before {
  transform: translateX(20px);
}

.plugin-toggle input:disabled + .plugin-toggle-slider {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Add Plugin Button */
.plugins-add-section {
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--border-color);
}

.plugins-add-button {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 16px;
  background: var(--bg-secondary);
  border: 2px dashed var(--border-color);
  border-radius: 12px;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.plugins-add-button:hover {
  background: var(--bg-tertiary);
  border-color: var(--text-muted);
  color: var(--text-primary);
}

/* ========================================
   Plugin Detail View
   ======================================== */

.plugin-detail-view {
  max-width: 800px;
  margin: 0 auto;
}

.plugin-detail-header {
  margin-bottom: 24px;
}

.plugin-back-button {
  display: flex;
  align-items: center;
  gap: 8px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 8px 0;
  transition: color var(--transition-fast);
}

.plugin-back-button:hover {
  color: var(--text-primary);
}

.plugin-detail-empty {
  text-align: center;
  padding: 64px 24px;
  color: var(--text-secondary);
}

.plugin-detail-hero {
  display: flex;
  align-items: flex-start;
  gap: 24px;
  padding-bottom: 32px;
  margin-bottom: 32px;
  border-bottom: 1px solid var(--border-color);
}

.plugin-detail-icon {
  width: 100px;
  height: 100px;
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-on-accent);
  flex-shrink: 0;
}

.plugin-detail-icon img {
  width: 56px;
  height: 56px;
  object-fit: contain;
}

.plugin-detail-info {
  flex: 1;
  min-width: 0;
}

.plugin-detail-name {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 4px;
}

.plugin-detail-category {
  font-size: 14px;
  font-weight: 600;
}

.plugin-detail-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
  font-size: 13px;
  color: var(--text-secondary);
}

.plugin-detail-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex-shrink: 0;
}

.plugin-action-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 24px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  min-width: 120px;
}

.plugin-action-button:hover {
  background: var(--bg-tertiary);
}

.plugin-action-button.enabled {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-primary);
}

.plugin-action-button.enabled:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
}

.plugin-action-button.primary {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-primary);
}

.plugin-action-button.primary:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
}

.plugin-action-button.danger {
  color: var(--color-error);
  border-color: transparent;
  background: transparent;
}

.plugin-action-button.danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.plugin-detail-content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.plugin-detail-section h2 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
}

.plugin-detail-description {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.6;
}

.plugin-detail-links {
  display: flex;
  gap: 16px;
  margin-top: 16px;
}

.plugin-detail-links a {
  color: var(--accent);
  font-size: 14px;
  text-decoration: none;
}

.plugin-detail-links a:hover {
  text-decoration: underline;
}

/* Plugin Settings */
.plugin-settings-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plugin-setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: 12px;
}

.plugin-setting-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.plugin-setting-label {
  font-size: 15px;
  font-weight: 500;
}

.plugin-setting-description {
  font-size: 13px;
  color: var(--text-secondary);
}

/* Plugin Settings Divider */
.plugin-settings-divider {
  height: 1px;
  background: var(--border-color);
  margin: 8px 0;
}

/* Plugin Settings Header */
.plugin-settings-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 8px 0;
}

/* Plugin Select Input */
.plugin-select {
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-primary);
  cursor: pointer;
  min-width: 140px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.plugin-select:hover {
  border-color: var(--text-muted);
}

.plugin-select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-translucent);
}

.plugin-select:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Plugin Number Input */
.plugin-number-input {
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-primary);
  width: 80px;
  text-align: center;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.plugin-number-input:hover {
  border-color: var(--text-muted);
}

.plugin-number-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-translucent);
}

.plugin-number-input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========================================
   Privacy Card (Apple-style)
   ======================================== */

.privacy-card {
  background: var(--bg-secondary);
  border-radius: 16px;
  overflow: hidden;
}

.privacy-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
  background: var(--gradient-blue-purple);
  color: var(--text-on-accent);
}

.privacy-card-header h3 {
  font-size: 18px;
  font-weight: 600;
}

.privacy-card-subtitle {
  padding: 16px 20px 8px;
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.privacy-card-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 32px 20px;
  text-align: center;
  color: var(--accent);
}

.privacy-card-empty p {
  color: var(--text-secondary);
  font-size: 14px;
}

.privacy-access-list {
  padding: 12px 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.privacy-access-item {
  display: flex;
  align-items: flex-start;
  gap: 16px;
}

.privacy-access-icon {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.privacy-access-info {
  flex: 1;
  min-width: 0;
}

.privacy-access-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.privacy-access-label {
  font-size: 15px;
  font-weight: 600;
}

.privacy-access-required {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-warning);
  background: rgba(245, 158, 11, 0.15);
  padding: 2px 6px;
  border-radius: 4px;
}

.privacy-access-description {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.privacy-card-footer {
  padding: 16px 20px;
  border-top: 1px solid var(--border-color);
}

.privacy-card-footer p {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.5;
}

.privacy-learn-more {
  color: var(--accent);
  text-decoration: none;
  margin-left: 4px;
}

.privacy-learn-more:hover {
  text-decoration: underline;
}

/* ========================================
   Lyrics Panel (Mini Player)
   ======================================== */

.lyrics-panel {
  position: fixed;
  right: var(--gap-module);
  top: var(--gap-module);
  bottom: calc(var(--player-height) + var(--gap-module) * 2);
  width: 380px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-module);
  display: flex;
  flex-direction: column;
  z-index: var(--z-queue-popover);
  animation: slideInRight 0.25s ease-out;
  box-shadow: var(--shadow-elevated);
  transition: width 0.3s ease, left 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
}

/* Expanded lyrics panel - covers main content area */
.lyrics-panel.expanded {
  left: calc(var(--sidebar-width) + var(--gap-module) * 2);
  width: auto;
  animation: none;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.lyrics-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
  border-radius: var(--radius-module) var(--radius-module) 0 0;
}

.lyrics-panel-header-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.lyrics-panel-artwork {
  width: 40px;
  height: 40px;
  border-radius: 6px;
  object-fit: cover;
  flex-shrink: 0;
}

.lyrics-panel-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.lyrics-panel-track-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.lyrics-panel-title {
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lyrics-panel-artist {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lyrics-panel-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.lyrics-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.lyrics-panel-header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.lyrics-panel-expand {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.lyrics-panel-expand:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Sing-Along Toggle Button */
.lyrics-panel-singalong {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.lyrics-panel-singalong:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.lyrics-panel-singalong.active {
  color: var(--accent-color);
  background: rgba(var(--accent-rgb), 0.15);
}

.lyrics-panel-singalong.active:hover {
  background: rgba(var(--accent-rgb), 0.25);
}

/* Karaoke Mode Button */
.lyrics-panel-karaoke {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.lyrics-panel-karaoke:hover {
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.2));
  color: #FFD700;
}

.lyrics-panel-karaoke:active {
  transform: scale(0.95);
}

/* Sing-along mode styling for lyrics panel (sidebar) */
.lyrics-panel-synced.sing-along-mode .lyrics-panel-line {
  padding: 12px 16px;
  transition:
    transform var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-spring, cubic-bezier(0.34, 1.56, 0.64, 1)),
    opacity var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1)),
    filter var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1));
  filter: blur(0.5px);
  opacity: 0.5;
  will-change: transform, opacity, filter;
}

.lyrics-panel-synced.sing-along-mode .lyrics-panel-line.active {
  font-size: 1.4rem;
  filter: blur(0);
  opacity: 1;
  text-shadow:
    0 0 12px rgba(255, 255, 255, 0.25),
    0 0 24px rgba(255, 255, 255, 0.12);
}

.lyrics-panel-synced.sing-along-mode .lyrics-panel-line.past {
  filter: blur(0.3px);
  opacity: 0.6;
}

/* Sidebar sing-along word glow effects - subtle WHITE glow like Apple Music */
.lyrics-panel-synced.sing-along-mode .sing-along-word.past {
  color: rgba(255, 255, 255, 0.85);
  text-shadow:
    0 0 8px rgba(255, 255, 255, 0.3),
    0 0 16px rgba(255, 255, 255, 0.15);
}

.lyrics-panel-synced.sing-along-mode .sing-along-word.highlighted {
  color: #fff;
  text-shadow:
    0 0 8px rgba(255, 255, 255, 0.6),
    0 0 16px rgba(255, 255, 255, 0.4),
    0 0 24px rgba(255, 255, 255, 0.2);
}

.lyrics-panel-synced.sing-along-mode .sing-along-word.transitioning {
  background: linear-gradient(
    to right,
    #fff 0%,
    #fff var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: none;
  filter:
    drop-shadow(0 0 6px rgba(255, 255, 255, 0.3))
    drop-shadow(0 0 12px rgba(255, 255, 255, 0.15));
}

/* Translation Toggle - Apple Music style */
.translation-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
  background: transparent;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.translation-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
  border-color: var(--border-strong);
}

.translation-toggle.active {
  background: var(--color-accent-soft);
  color: var(--color-accent);
  border-color: var(--color-accent);
}

.translation-toggle.active:hover {
  background: var(--color-accent);
  color: white;
}

.translation-toggle:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.translation-toggle.compact {
  padding: 6px;
  border: none;
  background: none;
}

.translation-toggle.compact:hover {
  background: var(--bg-hover);
}

.translation-toggle.compact.active {
  color: var(--color-accent);
  background: var(--color-accent-soft);
}

.translation-toggle-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.translation-progress-indicator {
  width: 8px;
  height: 8px;
  border: 1.5px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* Offset Controls */
.lyrics-panel-offset {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.lyrics-offset-button {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.lyrics-offset-button:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.lyrics-offset-value {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 60px;
  text-align: center;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: var(--transition-fast);
}

.lyrics-offset-value:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Lyrics Panel Content */
.lyrics-panel-content {
  flex: 1;
  overflow-y: auto;
  padding: 24px 16px;
  scroll-behavior: smooth;
}

.lyrics-panel-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  height: 100%;
  color: var(--text-secondary);
  text-align: center;
}

.lyrics-panel-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--bg-hover);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.lyrics-panel-error {
  color: var(--color-error);
}

.lyrics-panel-hint {
  font-size: 12px;
  color: var(--text-muted);
}

/* Lyrics Panel Synced */
.lyrics-panel-synced,
.lyrics-panel-plain {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.lyrics-panel-line {
  font-size: 15px;
  line-height: 1.5;
  color: var(--text-muted);
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lyrics-panel-line:hover {
  background: var(--bg-hover);
}

.lyrics-panel-line.active {
  font-size: 17px;
  font-weight: 600;
  color: var(--text-primary);
  background: var(--bg-tertiary);
  /* Apple-style subtle glow */
  text-shadow: 0 0 12px rgba(255, 255, 255, 0.15);
}

.lyrics-panel-line.past {
  color: var(--text-secondary);
  text-shadow: 0 0 4px rgba(255, 255, 255, 0.05);
}

.lyrics-panel-line.upcoming {
  color: var(--text-secondary);
}

.lyrics-panel-line.plain {
  cursor: default;
  color: var(--text-secondary);
}

.lyrics-panel-line.plain:hover {
  background: none;
}

/* Translation text - Apple Music style */
.lyrics-panel-line-original {
  display: block;
}

.lyrics-panel-line-translation {
  display: block;
  font-size: 11px;
  font-weight: 400;
  color: var(--text-muted);
  margin-top: 2px;
  opacity: 0.7;
  letter-spacing: 0.01em;
}

.lyrics-panel-line.active .lyrics-panel-line-translation {
  font-size: 12px;
  opacity: 0.8;
}

/* Expanded lyrics panel - enhanced styling for larger view */
.lyrics-panel.expanded .lyrics-panel-content {
  padding: var(--spacing-xl) var(--spacing-2xl);
}

.lyrics-panel.expanded .lyrics-panel-synced,
.lyrics-panel.expanded .lyrics-panel-plain {
  max-width: 800px;
  margin: 0 auto;
  gap: 16px;
}

.lyrics-panel.expanded .lyrics-panel-line {
  font-size: 20px;
  padding: 10px 16px;
  text-align: center;
}

.lyrics-panel.expanded .lyrics-panel-line.active {
  font-size: 26px;
  font-weight: 700;
}

.lyrics-panel.expanded .lyrics-panel-line-translation {
  font-size: 13px;
  margin-top: 4px;
}

.lyrics-panel.expanded .lyrics-panel-line.active .lyrics-panel-line-translation {
  font-size: 15px;
}

.lyrics-panel.expanded .lyrics-panel-state {
  transform: scale(1.2);
}

/* Current Line Preview */
.lyrics-panel-current {
  padding: 12px 16px;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
  flex-shrink: 0;
}

.lyrics-panel-current-line {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  text-align: center;
  margin-bottom: 4px;
}

.lyrics-panel-next-line {
  font-size: 12px;
  color: var(--text-muted);
  text-align: center;
}

/* ========================================
   Full-Screen Lyrics / Karaoke Mode
   ======================================== */

.lyrics-fullscreen {
  position: fixed;
  inset: 0;
  z-index: var(--z-modal);
  display: flex;
  flex-direction: column;
  background: #0a0a0a;
  color: white;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Animated blurred background with album art */
.lyrics-fullscreen-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: blur(100px) saturate(1.5) brightness(0.4);
  transform: scale(1.3);
  opacity: 0.6;
  animation: slowPulse 8s ease-in-out infinite alternate;
  pointer-events: none;
}

@keyframes slowPulse {
  0% {
    transform: scale(1.3) rotate(0deg);
    filter: blur(100px) saturate(1.5) brightness(0.4);
  }
  100% {
    transform: scale(1.4) rotate(1deg);
    filter: blur(120px) saturate(1.8) brightness(0.45);
  }
}

.lyrics-fullscreen-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.8) 0%,
    rgba(0, 0, 0, 0.3) 30%,
    rgba(0, 0, 0, 0.3) 70%,
    rgba(0, 0, 0, 0.85) 100%
  );
  pointer-events: none;
}

/* Header */
.lyrics-fullscreen-header {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 24px 32px;
  flex-shrink: 0;
}

.lyrics-fullscreen-close {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  cursor: pointer;
  padding: 12px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.lyrics-fullscreen-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.lyrics-fullscreen-track {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
}

.lyrics-fullscreen-artwork {
  width: 64px;
  height: 64px;
  border-radius: 8px;
  object-fit: cover;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.lyrics-fullscreen-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.5);
}

.lyrics-fullscreen-meta {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.lyrics-fullscreen-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: white;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.lyrics-fullscreen-artist {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.7);
}

/* Fullscreen Controls */
.lyrics-fullscreen-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Generic fullscreen button style (Karaoke, Translation, etc.) */
.lyrics-fullscreen-btn,
.lyrics-fullscreen-controls .translation-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 24px;
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.lyrics-fullscreen-btn:hover,
.lyrics-fullscreen-controls .translation-toggle:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.25);
}

.lyrics-fullscreen-btn.active,
.lyrics-fullscreen-controls .translation-toggle.active {
  background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
  border-color: transparent;
  color: white;
  box-shadow: 0 4px 20px rgba(var(--accent-rgb), 0.4);
}

/* Karaoke processing state - pulsing animation */
.lyrics-fullscreen-btn.processing {
  background: rgba(255, 255, 255, 0.15);
  animation: karaoke-processing 1.5s ease-in-out infinite;
}

@keyframes karaoke-processing {
  0%, 100% {
    opacity: 0.7;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
  }
}

/* Make fullscreen translation button show text */
.lyrics-fullscreen-controls .translation-toggle .translation-toggle-label {
  display: inline;
}

/* Slider for vocal reduction - Apple Music style */
.lyrics-fullscreen-slider {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  backdrop-filter: blur(10px);
}

.lyrics-fullscreen-slider.karaoke-slider {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.lyrics-fullscreen-slider label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
  white-space: nowrap;
  font-weight: 500;
}

.lyrics-fullscreen-slider span {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.9);
  min-width: 35px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.lyrics-fullscreen-slider input[type="range"] {
  width: 100px;
  height: 4px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
  appearance: none;
  cursor: pointer;
}

.lyrics-fullscreen-slider input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 14px;
  height: 14px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  transition: transform 0.15s ease;
}

.lyrics-fullscreen-slider input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.15);
}

.lyrics-fullscreen-collapse {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  cursor: pointer;
  padding: 10px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.lyrics-fullscreen-collapse:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

/* Content Area - allows scrolling */
.lyrics-fullscreen-content {
  position: relative;
  z-index: 1;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0;
  overflow: hidden;
  min-height: 0; /* Important for flex child to allow scrolling */
}

/* Fullscreen uses SingAlongLyrics - Apple Music style karaoke effect */
.lyrics-fullscreen-content .sing-along-lyrics {
  max-width: 1000px;
  width: 100%;
  flex: 1;
  padding: 20vh 2rem 30vh;
}

.lyrics-fullscreen-content .sing-along-lyrics-line {
  font-size: 1.5rem;
  padding: 16px 24px;
  color: rgba(255, 255, 255, 0.5);
  background: transparent;
  /* Use CSS variables for consistent timing */
  transition:
    transform var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-spring, cubic-bezier(0.34, 1.56, 0.64, 1)),
    opacity var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1)),
    filter var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1)),
    font-size var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1));
  transform: scale(0.94);
  opacity: 0.4;
  filter: blur(1.5px);
  will-change: transform, opacity, filter;
}

.lyrics-fullscreen-content .sing-along-lyrics-line:hover {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.65);
  filter: blur(1px);
}

.lyrics-fullscreen-content .sing-along-lyrics-line.active {
  font-size: 2.4rem;
  color: white;
  background: transparent;
  border-radius: 16px;
  transform: scale(1);
  opacity: 1;
  filter: blur(0);
  text-shadow:
    0 0 20px rgba(255, 255, 255, 0.3),
    0 0 40px rgba(255, 255, 255, 0.15);
  animation: fullscreen-line-active 0.4s ease-out;
}

.lyrics-fullscreen-content .sing-along-lyrics-line.past {
  opacity: 0.4;
  transform: scale(0.92);
  filter: blur(0.8px);
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.15);
}

/* Depth of field - past lines further back get more blurred */
.lyrics-fullscreen-content .sing-along-lyrics-line.past + .sing-along-lyrics-line.past {
  filter: blur(1.2px);
  opacity: 0.3;
}

.lyrics-fullscreen-content .sing-along-lyrics-line.future {
  opacity: 0.4;
  transform: scale(0.94);
  filter: blur(1.5px);
}

/* Depth of field - future lines further away get more blurred */
.lyrics-fullscreen-content .sing-along-lyrics-line.future + .sing-along-lyrics-line.future {
  filter: blur(2px);
  opacity: 0.32;
}

.lyrics-fullscreen-content .sing-along-lyrics-line.future + .sing-along-lyrics-line.future + .sing-along-lyrics-line.future {
  filter: blur(2.5px);
  opacity: 0.25;
}

/* Line after active is more visible (next up) */
.lyrics-fullscreen-content .sing-along-lyrics-line.active + .sing-along-lyrics-line {
  opacity: 0.6;
  transform: scale(0.97);
  filter: blur(0.3px);
}

/* Line immediately before active - slightly enhanced visibility */
.lyrics-fullscreen-content .sing-along-lyrics-line.past:has(+ .sing-along-lyrics-line.active) {
  opacity: 0.5;
  filter: blur(0.4px);
  transform: scale(0.95);
}

/* Apple Music-style word highlighting - unified with SingAlongLine.css */
.lyrics-fullscreen-content .sing-along-word {
  color: rgba(255, 255, 255, 0.35);
  text-shadow: none;
  transition:
    color var(--lyrics-word-duration, 300ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1)),
    transform var(--lyrics-word-duration, 300ms) var(--lyrics-transition-spring, cubic-bezier(0.34, 1.56, 0.64, 1)),
    filter var(--lyrics-word-duration, 300ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1));
  display: inline-block;
  will-change: transform, filter;
}

.lyrics-fullscreen-content .sing-along-lyrics-line.active .sing-along-word {
  color: rgba(255, 255, 255, 0.5);
  text-shadow: none;
}

/* Past words - subtle WHITE glow like Apple Music */
.lyrics-fullscreen-content .sing-along-word.past {
  color: rgba(255, 255, 255, 0.85);
  text-shadow:
    0 0 10px rgba(255, 255, 255, 0.3),
    0 0 20px rgba(255, 255, 255, 0.15);
}

/* Currently highlighted word - bright white glow */
.lyrics-fullscreen-content .sing-along-word.highlighted {
  color: #fff;
  text-shadow:
    0 0 8px rgba(255, 255, 255, 0.7),
    0 0 20px rgba(255, 255, 255, 0.45),
    0 0 32px rgba(255, 255, 255, 0.25);
  font-weight: 600;
}

/* Transitioning word - smooth gradient sweep like Apple Music */
.lyrics-fullscreen-content .sing-along-word.transitioning {
  background: linear-gradient(
    to right,
    #fff 0%,
    #fff var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  text-shadow: none;
  filter:
    drop-shadow(0 0 8px rgba(255, 255, 255, 0.35))
    drop-shadow(0 0 16px rgba(255, 255, 255, 0.2));
}

/* Smooth word entrance animation - subtle brightness only, no scale bounce */
@keyframes fullscreen-word-enter {
  0% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.05);
  }
  100% {
    filter: brightness(1);
  }
}

/* Unified word entrance animation - subtle, no scale bounce */
@keyframes word-highlight-enter {
  0% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.05);
  }
  100% {
    filter: brightness(1);
  }
}

/* Smooth active line entrance animation - gentler scale */
@keyframes fullscreen-line-active {
  0% {
    transform: scale(0.98);
    opacity: 0.7;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Message states */
.lyrics-fullscreen-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  color: rgba(255, 255, 255, 0.6);
  text-align: center;
}

.lyrics-fullscreen-message span:first-of-type {
  font-size: 1.3rem;
  color: rgba(255, 255, 255, 0.8);
}

.lyrics-fullscreen-hint {
  font-size: 0.95rem;
  opacity: 0.6;
}

.lyrics-fullscreen-spinner {
  width: 48px;
  height: 48px;
  border: 3px solid rgba(255, 255, 255, 0.2);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* Basic Lyrics Mode (line-by-line highlighting like sidebar) */
.lyrics-fullscreen-basic {
  max-width: 900px;
  width: 100%;
  flex: 1;
  padding: 20vh 2rem 30vh;
  overflow-y: auto;
  scroll-behavior: smooth;
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 12%,
    black 88%,
    transparent 100%
  );
}

.lyrics-fullscreen-line {
  padding: 14px 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 12px;
  transform: scale(0.95);
  opacity: 0.5;
}

.lyrics-fullscreen-line:hover {
  background: rgba(255, 255, 255, 0.08);
  opacity: 0.75;
}

.lyrics-fullscreen-line-text {
  font-size: 1.5rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.6);
  display: block;
  line-height: 1.5;
}

.lyrics-fullscreen-line-translation {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.4);
  display: block;
  margin-top: 6px;
  font-style: italic;
}

.lyrics-fullscreen-line.active {
  transform: scale(1);
  opacity: 1;
  background: transparent;
}

.lyrics-fullscreen-line.active .lyrics-fullscreen-line-text {
  font-size: 2.2rem;
  color: white;
  /* Apple Music "Sing" style glow effect */
  text-shadow:
    0 0 20px rgba(255, 255, 255, 0.5),
    0 0 40px rgba(255, 255, 255, 0.3),
    0 0 60px rgba(255, 255, 255, 0.15);
  animation: lyrics-glow-pulse 0.4s ease-out;
}

@keyframes lyrics-glow-pulse {
  0% {
    text-shadow: none;
    transform: scale(0.98);
  }
  50% {
    text-shadow:
      0 0 30px rgba(255, 255, 255, 0.7),
      0 0 60px rgba(255, 255, 255, 0.4);
  }
  100% {
    text-shadow:
      0 0 20px rgba(255, 255, 255, 0.5),
      0 0 40px rgba(255, 255, 255, 0.3),
      0 0 60px rgba(255, 255, 255, 0.15);
    transform: scale(1);
  }
}

.lyrics-fullscreen-line.active .lyrics-fullscreen-line-translation {
  color: rgba(255, 255, 255, 0.6);
  font-size: 1.1rem;
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
}

.lyrics-fullscreen-line.past {
  transform: scale(0.9);
  opacity: 0.5;
}

.lyrics-fullscreen-line.past .lyrics-fullscreen-line-text {
  color: rgba(255, 255, 255, 0.6);
  /* Subtle residual glow on past lines */
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
}

.lyrics-fullscreen-line.upcoming {
  opacity: 0.6;
  transform: scale(0.98);
}

.lyrics-fullscreen-line.upcoming .lyrics-fullscreen-line-text {
  color: rgba(255, 255, 255, 0.6);
  /* Slight anticipation glow */
  text-shadow: 0 0 4px rgba(255, 255, 255, 0.05);
}

/* Footer with playback controls */
.lyrics-fullscreen-footer {
  position: relative;
  z-index: 1;
  display: flex;
  justify-content: center;
  padding: 24px 32px 40px;
  flex-shrink: 0;
}

.lyrics-fullscreen-playback {
  display: flex;
  align-items: center;
  gap: 24px;
}

.lyrics-playback-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  cursor: pointer;
  padding: 16px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.lyrics-playback-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.08);
}

.lyrics-playback-btn.play {
  background: var(--accent-color);
  padding: 20px;
  box-shadow: 0 4px 24px rgba(var(--accent-rgb), 0.5);
}

.lyrics-playback-btn.play:hover {
  background: var(--accent-hover);
  transform: scale(1.1);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .lyrics-fullscreen-header {
    flex-wrap: wrap;
    padding: 16px;
  }

  .lyrics-fullscreen-track {
    order: 2;
    flex-basis: 100%;
    margin-top: 12px;
  }

  .lyrics-fullscreen-controls {
    order: 1;
    flex: 1;
    justify-content: flex-end;
  }

  .lyrics-fullscreen-content .sing-along-lyrics-line {
    font-size: 1.1rem;
  }

  .lyrics-fullscreen-content .sing-along-lyrics-line.active {
    font-size: 1.6rem;
  }

  .lyrics-fullscreen-artwork {
    width: 48px;
    height: 48px;
  }
}

/* ========================================
   Improved Lyrics Display (Full Player)
   ======================================== */

.lyrics-display.lyrics-synced {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.lyrics-offset-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 0;
  flex-shrink: 0;
}

.lyrics-offset-btn {
  background: var(--overlay-light);
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.lyrics-offset-btn:hover {
  background: var(--overlay-strong);
  color: var(--text-primary);
}

.lyrics-offset-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 56px;
  text-align: center;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 12px;
  background: var(--glass-bg-subtle);
  transition: var(--transition-fast);
}

.lyrics-offset-label:hover {
  background: var(--overlay-light);
  color: var(--text-primary);
}

.lyrics-scroll-container {
  flex: 1;
  overflow-y: auto;
  scroll-behavior: smooth;
  padding: 48px 0;
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 15%,
    black 85%,
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 15%,
    black 85%,
    transparent 100%
  );
}

/* Improved lyrics line styling */
.lyrics-line.upcoming {
  color: var(--text-secondary);
  transform: scale(0.98);
}

.lyrics-line.active {
  transform: scale(1);
  text-shadow: 0 0 20px var(--accent-glow);
}

/* Compact mode for lyrics display */
.lyrics-display.compact {
  padding: 16px;
}

.lyrics-display.compact .lyrics-content {
  gap: 8px;
}

.lyrics-display.compact .lyrics-line {
  font-size: 14px;
  padding: 4px 8px;
}

.lyrics-display.compact .lyrics-line.active {
  font-size: 16px;
}

/* Lyrics in FullPlayer context */
.full-player-lyrics-container .lyrics-display {
  height: 100%;
}

.full-player-lyrics-container .lyrics-display.lyrics-synced {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.full-player-lyrics-container .lyrics-scroll-container {
  flex: 1;
  padding: 80px 20px;
  overflow-y: auto;
  position: relative;
}

.full-player-lyrics-container .lyrics-line {
  font-size: 20px;
  padding: 8px 16px;
  text-align: center;
}

.full-player-lyrics-container .lyrics-line.active {
  font-size: 26px;
}

.full-player-lyrics-container .lyrics-content {
  gap: 16px;
}

.full-player-lyrics-container .lyrics-offset-controls {
  display: none;
}

.full-player-lyrics-container .lyrics-loading,
.full-player-lyrics-container .lyrics-error,
.full-player-lyrics-container .lyrics-empty,
.full-player-lyrics-container .lyrics-disabled {
  height: 100%;
}

/* Sing-along button for LyricsDisplay */
.lyrics-singalong-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: none;
  border-radius: 50%;
  background: var(--overlay-light);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.lyrics-singalong-btn:hover {
  background: var(--overlay-strong);
  color: var(--text-primary);
}

.lyrics-singalong-btn.active {
  background: var(--accent-color);
  color: white;
  box-shadow: 0 0 12px rgba(var(--accent-rgb), 0.4);
}

/* LyricsDisplay sing-along mode styling */
.lyrics-display.sing-along-mode .lyrics-line {
  transition:
    transform var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-spring, cubic-bezier(0.34, 1.56, 0.64, 1)),
    opacity var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1)),
    filter var(--lyrics-transition-duration, 400ms) var(--lyrics-transition-smooth, cubic-bezier(0.4, 0, 0.2, 1));
  filter: blur(0.8px);
  opacity: 0.45;
  will-change: transform, opacity, filter;
}

.lyrics-display.sing-along-mode .lyrics-line.active {
  filter: blur(0);
  opacity: 1;
  text-shadow:
    0 0 16px rgba(255, 255, 255, 0.3),
    0 0 32px rgba(255, 255, 255, 0.15);
}

.lyrics-display.sing-along-mode .lyrics-line.past {
  filter: blur(0.4px);
  opacity: 0.55;
}

/* LyricsDisplay sing-along word glow effects - subtle WHITE glow like Apple Music */
.lyrics-display.sing-along-mode .sing-along-word.past {
  color: rgba(255, 255, 255, 0.85);
  text-shadow:
    0 0 10px rgba(255, 255, 255, 0.3),
    0 0 20px rgba(255, 255, 255, 0.15);
}

.lyrics-display.sing-along-mode .sing-along-word.highlighted {
  color: #fff;
  text-shadow:
    0 0 8px rgba(255, 255, 255, 0.7),
    0 0 20px rgba(255, 255, 255, 0.45),
    0 0 32px rgba(255, 255, 255, 0.25);
}

.lyrics-display.sing-along-mode .sing-along-word.transitioning {
  background: linear-gradient(
    to right,
    #fff 0%,
    #fff var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) var(--word-progress, 0%),
    rgba(255, 255, 255, 0.4) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: none;
  filter:
    drop-shadow(0 0 8px rgba(255, 255, 255, 0.35))
    drop-shadow(0 0 16px rgba(255, 255, 255, 0.2));
}

/* Adjust main content when lyrics panel is open (but not expanded) */
.app:has(.lyrics-panel:not(.expanded)) .main-content {
  margin-right: 380px;
}

/* ========================================
   Dislike Modal
   ======================================== */

.dislike-modal {
  background: var(--bg-secondary);
  border-radius: 16px;
  width: 90%;
  max-width: 420px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: modalSlideIn 0.2s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.dislike-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  border-bottom: 1px solid var(--border-color);
}

.dislike-modal-header h2 {
  font-size: 20px;
  font-weight: 600;
}

.dislike-modal-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.dislike-modal-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.dislike-modal-track {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  background: var(--bg-tertiary);
}

.dislike-modal-artwork {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
  flex-shrink: 0;
}

.dislike-modal-artwork-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-hover);
  color: var(--text-muted);
}

.dislike-modal-track-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.dislike-modal-title {
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dislike-modal-artist {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dislike-modal-content {
  padding: 20px;
  flex: 1;
  overflow-y: auto;
}

.dislike-modal-prompt {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 16px;
  line-height: 1.5;
}

.dislike-reasons-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.dislike-reason-button {
  padding: 10px 16px;
  border-radius: 20px;
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.dislike-reason-button:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--text-muted);
}

.dislike-reason-button.selected {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-primary);
}

.dislike-modal-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-top: 1px solid var(--border-color);
  gap: 12px;
}

.dislike-modal-skip {
  padding: 10px 20px;
  border-radius: 20px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.dislike-modal-skip:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.dislike-modal-submit {
  padding: 10px 24px;
  border-radius: 20px;
  border: none;
  background: var(--accent);
  color: var(--bg-primary);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition-fast);
}

.dislike-modal-submit:hover:not(:disabled) {
  background: var(--accent-hover);
}

.dislike-modal-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========================================
   Personalization Badges & Tags
   ======================================== */

.discover-personalized-badge {
  font-size: 12px;
  font-weight: 500;
  color: var(--accent);
  background: rgba(29, 185, 84, 0.15);
  padding: 4px 12px;
  border-radius: 12px;
  margin-left: 12px;
}

.discover-section-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.discover-section-personalized-tag {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--accent);
  background: rgba(29, 185, 84, 0.15);
  padding: 3px 8px;
  border-radius: 8px;
}

.discover-section.personalized {
  position: relative;
}

.discover-section.personalized::before {
  content: '';
  position: absolute;
  left: -16px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--accent), transparent);
  border-radius: 3px;
}

/* Context Menu Active State (for disliked items) */
.context-menu-item.active {
  color: var(--color-error);
}

.context-menu-item.active svg {
  color: var(--color-error);
}

/* ========================================
   SETTINGS VIEW
   ======================================== */

.settings-view {
  max-width: 1000px;
  margin: 0 auto;
  position: relative;
  animation: fadeIn 0.3s ease-out;
}

.settings-view::before {
  content: '';
  position: absolute;
  top: -60px;
  left: -60px;
  right: -60px;
  height: 350px;
  background: radial-gradient(ellipse at 30% 0%, rgba(29, 185, 84, 0.12) 0%, transparent 60%);
  pointer-events: none;
  z-index: -1;
}

.settings-header {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-xl);
  margin-bottom: var(--spacing-2xl);
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
  position: relative;
}

.settings-back-btn {
  position: absolute;
  top: -48px;
  left: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.settings-back-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border-color: var(--border-light);
  transform: translateX(-2px);
}

.settings-header-icon {
  width: 160px;
  height: 160px;
  background: var(--gradient-accent);
  border-radius: var(--radius-xl);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-inverse);
  box-shadow: var(--shadow-elevated);
  flex-shrink: 0;
  transition: transform var(--transition-spring);
}

.settings-header-icon:hover {
  transform: scale(1.02);
}

.settings-header-info {
  flex: 1;
}

.settings-header-type {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.settings-header-title {
  font-size: 48px;
  font-weight: 800;
  margin: 10px 0;
  letter-spacing: -0.5px;
  line-height: 1.1;
}

.settings-header-subtitle {
  color: var(--text-secondary);
  font-size: 14px;
}

/* Settings Tabs */
.settings-tabs {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xl);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--border-color);
}

.settings-tab {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-lg);
  border-radius: var(--radius-md);
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.settings-tab:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.settings-tab.active {
  background: var(--accent-soft);
  color: var(--accent);
}

.settings-section-description {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: var(--spacing-xl);
  max-width: 600px;
}

/* Legacy support - remove if not used */
.settings-header-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.settings-header-text h1 {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-xs);
}

.settings-header-text p {
  color: var(--text-secondary);
  font-size: var(--font-size-base);
}

.settings-content {
  /* Full width within container */
}

.settings-section {
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
  margin-bottom: var(--spacing-xl);
}

.settings-section-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid var(--border-color);
}

.settings-section-header svg {
  color: var(--accent);
}

.settings-section-header h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

.settings-option {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg) 0;
  border-bottom: 1px solid var(--border-color);
}

.settings-option:last-child {
  border-bottom: none;
}

.settings-option-info h3 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--spacing-xs);
}

.settings-option-info p {
  color: var(--text-muted);
  font-size: var(--font-size-sm);
}

/* Mode Toggle */
.mode-toggle {
  display: flex;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-xs);
  gap: var(--spacing-xs);
}

.mode-toggle-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.mode-toggle-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.mode-toggle-btn.active {
  background: var(--accent);
  color: var(--text-inverse);
}

/* Current Theme Preview */
.settings-current-theme {
  margin: var(--spacing-xl) 0;
}

.settings-current-theme-label {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  margin-bottom: var(--spacing-sm);
}

.settings-current-theme-preview {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid;
}

.settings-current-accent {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.settings-current-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.settings-current-name {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
}

.settings-current-author {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

/* Theme Groups */
.settings-theme-group {
  margin-top: var(--spacing-xl);
}

.settings-theme-group h3 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--spacing-md);
  color: var(--text-secondary);
}

.settings-theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: var(--spacing-lg);
}

/* Theme Preview Card */
.theme-preview-card {
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: var(--radius-lg);
  padding: var(--spacing-sm);
  cursor: pointer;
  transition: all var(--transition-smooth);
  position: relative;
  display: flex;
  flex-direction: column;
  text-align: left;
}

.theme-preview-card:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-light);
  transform: translateY(-2px);
}

.theme-preview-card.active {
  border-color: var(--accent);
  box-shadow: var(--shadow-glow);
}

.theme-preview {
  width: 100%;
  aspect-ratio: 4 / 3;
  border-radius: var(--radius-md);
  overflow: hidden;
  display: grid;
  grid-template-columns: 24px 1fr;
  grid-template-rows: 1fr 16px;
  gap: 2px;
  padding: 4px;
  border: 1px solid;
  margin-bottom: var(--spacing-sm);
}

.theme-preview-sidebar {
  grid-row: 1 / 3;
  border-radius: 2px;
  padding: 4px 2px;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.theme-preview-sidebar-item {
  height: 8px;
  border-radius: 2px;
}

.theme-preview-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 4px;
}

.theme-preview-header {
  height: 6px;
  width: 60%;
  border-radius: 2px;
  opacity: 0.8;
}

.theme-preview-cards {
  display: flex;
  gap: 3px;
  flex: 1;
}

.theme-preview-card-item {
  flex: 1;
  border-radius: 2px;
}

.theme-preview-player {
  grid-column: 2;
  border-radius: 2px;
  display: flex;
  align-items: center;
  padding: 2px 4px;
}

.theme-preview-player-accent {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.theme-preview-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 var(--spacing-xs);
}

.theme-preview-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.theme-preview-mode {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  text-transform: capitalize;
}

.theme-preview-check {
  position: absolute;
  top: var(--spacing-sm);
  right: var(--spacing-sm);
  width: 20px;
  height: 20px;
  background: var(--accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-inverse);
}

.theme-preview-actions {
  position: absolute;
  top: var(--spacing-sm);
  right: var(--spacing-sm);
  display: none;
  gap: var(--spacing-xs);
}

.theme-preview-card:hover .theme-preview-actions {
  display: flex;
}

.theme-preview-card.active .theme-preview-actions {
  display: none;
}

.theme-preview-action {
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-on-accent);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.theme-preview-action.edit {
  background: var(--accent);
}

.theme-preview-action.delete {
  background: var(--color-error);
}

.theme-preview-action:hover {
  transform: scale(1.1);
}

/* Theme Actions */
.settings-theme-actions {
  display: flex;
  gap: var(--spacing-md);
  margin-top: var(--spacing-xl);
  padding-top: var(--spacing-xl);
  border-top: 1px solid var(--border-color);
}

.settings-action-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.settings-action-btn:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-light);
}

.settings-action-btn.primary {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--text-inverse);
}

.settings-action-btn.primary:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
}

/* Import Modal */
.settings-import-hint {
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  margin-bottom: var(--spacing-md);
}

.settings-import-textarea {
  width: 100%;
  min-height: 200px;
  padding: var(--spacing-md);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  resize: vertical;
}

.settings-import-textarea:focus {
  outline: none;
  border-color: var(--accent);
}

.settings-import-error {
  color: var(--color-error);
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-sm);
}

/* GitHub Import */
.settings-github-input-wrapper {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-muted);
  transition: border-color var(--transition-fast);
}

.settings-github-input-wrapper:focus-within {
  border-color: var(--accent);
}

.settings-github-input {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: var(--font-size-sm);
}

.settings-github-input:focus {
  outline: none;
}

.settings-github-input::placeholder {
  color: var(--text-muted);
}

.settings-github-examples {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-md);
  font-size: var(--font-size-xs);
  color: var(--text-muted);
}

.settings-github-examples-label {
  margin-right: var(--spacing-xs);
}

.settings-github-examples code {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  color: var(--text-secondary);
}

.modal-header h2 {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.modal-btn.primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.modal-btn.primary:disabled:hover {
  background: var(--accent);
}

/* Modal Footer */
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  padding: var(--spacing-lg) var(--spacing-xl);
  border-top: 1px solid var(--border-color);
}

.modal-btn {
  padding: var(--spacing-md) var(--spacing-xl);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.modal-btn.secondary {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
}

.modal-btn.secondary:hover {
  background: var(--bg-hover);
}

.modal-btn.primary {
  background: var(--accent);
  border: none;
  color: var(--text-inverse);
}

.modal-btn.primary:hover {
  background: var(--accent-hover);
}

/* ========================================
   COLOR PICKER
   ======================================== */

.color-picker {
  position: relative;
}

.color-picker-label {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-bottom: var(--spacing-xs);
}

.color-picker-trigger {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.color-picker-trigger:hover {
  border-color: var(--border-light);
}

.color-picker-swatch {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  flex-shrink: 0;
}

.color-picker-input {
  width: 72px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-family: var(--font-mono);
}

.color-picker-input:focus {
  outline: none;
}

.color-picker-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: var(--spacing-xs);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  z-index: var(--z-dropdown);
  box-shadow: var(--shadow-lg);
  min-width: 200px;
  animation: fadeIn 0.15s ease-out;
}

.color-picker-native-wrapper {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--border-color);
  margin-bottom: var(--spacing-md);
}

.color-picker-native {
  width: 40px;
  height: 40px;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  background: none;
  padding: 0;
}

.color-picker-native::-webkit-color-swatch-wrapper {
  padding: 0;
}

.color-picker-native::-webkit-color-swatch {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
}

.color-picker-native-label {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

.color-picker-presets-label {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-bottom: var(--spacing-sm);
}

.color-picker-presets-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--spacing-xs);
}

.color-picker-preset {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  border: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.color-picker-preset:hover {
  transform: scale(1.1);
}

.color-picker-preset.active {
  border-color: var(--text-primary);
  box-shadow: 0 0 0 2px var(--bg-secondary);
}

/* ========================================
   THEME EDITOR MODAL
   ======================================== */

.theme-editor-modal {
  background: var(--bg-secondary);
  border: 1px solid var(--glass-border-strong);
  border-radius: var(--radius-2xl);
  width: 900px;
  max-width: 95vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-2xl);
  animation: modalIn 0.3s var(--transition-spring);
  overflow: hidden;
}

.theme-editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg) var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
}

.theme-editor-header h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

.theme-editor-content {
  display: grid;
  grid-template-columns: 1fr 320px;
  flex: 1;
  overflow: hidden;
}

.theme-editor-controls {
  padding: var(--spacing-xl);
  overflow-y: auto;
  border-right: 1px solid var(--border-color);
}

.theme-editor-field {
  margin-bottom: var(--spacing-lg);
}

.theme-editor-field label {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-sm);
}

.theme-editor-input {
  width: 100%;
  padding: var(--spacing-md);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-base);
}

.theme-editor-input:focus {
  outline: none;
  border-color: var(--accent);
}

.theme-editor-mode-toggle {
  display: flex;
  gap: var(--spacing-sm);
}

.theme-editor-mode-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.theme-editor-mode-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.theme-editor-mode-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--text-inverse);
}

.theme-editor-tabs {
  display: flex;
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-lg);
  padding: var(--spacing-xs);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.theme-editor-tab {
  flex: 1;
  padding: var(--spacing-sm) var(--spacing-md);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.theme-editor-tab:hover {
  color: var(--text-primary);
}

.theme-editor-tab.active {
  background: var(--bg-primary);
  color: var(--text-primary);
  box-shadow: var(--shadow-sm);
}

.theme-editor-colors {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.theme-editor-color-group h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-md);
}

.theme-editor-color-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--spacing-md);
}

.theme-editor-advanced {
  padding-top: var(--spacing-md);
}

.theme-editor-css {
  width: 100%;
  min-height: 200px;
  padding: var(--spacing-md);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  resize: vertical;
}

.theme-editor-css:focus {
  outline: none;
  border-color: var(--accent);
}

.theme-editor-hint {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-top: var(--spacing-sm);
}

/* Preview Panel */
.theme-editor-preview-panel {
  padding: var(--spacing-xl);
  background: var(--bg-tertiary);
  display: flex;
  flex-direction: column;
}

.theme-editor-preview-panel h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-md);
}

.theme-editor-preview {
  flex: 1;
  background: var(--preview-bg-primary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-sm);
  overflow: hidden;
}

.preview-app {
  width: 100%;
  height: 100%;
  min-height: 300px;
  display: grid;
  grid-template-columns: 48px 1fr;
  grid-template-rows: 1fr 32px;
  gap: var(--spacing-xs);
  background: var(--preview-bg-primary);
  border-radius: var(--radius-md);
}

.preview-sidebar {
  grid-row: 1 / 3;
  background: var(--preview-bg-secondary);
  border-radius: var(--radius-sm);
  padding: var(--spacing-sm);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.preview-logo {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-xs);
  margin-bottom: var(--spacing-sm);
}

.preview-nav-item {
  height: 20px;
  background: var(--preview-bg-tertiary);
  border-radius: var(--radius-xs);
  position: relative;
}

.preview-nav-item.active {
  position: relative;
}

.preview-nav-indicator {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 12px;
  border-radius: 0 2px 2px 0;
}

.preview-content {
  background: var(--preview-bg-secondary);
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.preview-header {
  height: 12px;
  width: 60%;
  border-radius: 4px;
  opacity: 0.8;
}

.preview-cards {
  display: flex;
  gap: var(--spacing-sm);
  flex: 1;
}

.preview-card {
  flex: 1;
  background: var(--preview-bg-tertiary);
  border-radius: var(--radius-sm);
  padding: var(--spacing-xs);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.preview-card-art {
  aspect-ratio: 1;
  border-radius: var(--radius-xs);
}

.preview-card-text {
  height: 8px;
  width: 70%;
  border-radius: 4px;
  opacity: 0.6;
}

.preview-player {
  grid-column: 2;
  background: var(--preview-bg-secondary);
  border-radius: var(--radius-sm);
  padding: var(--spacing-xs) var(--spacing-sm);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.preview-player-art {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-xs);
  flex-shrink: 0;
}

.preview-player-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.preview-player-title {
  height: 6px;
  width: 50%;
  border-radius: 2px;
  opacity: 0.8;
}

.preview-player-artist {
  height: 5px;
  width: 35%;
  border-radius: 2px;
  opacity: 0.5;
}

.preview-player-btn {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Footer */
.theme-editor-footer {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-lg) var(--spacing-xl);
  border-top: 1px solid var(--border-color);
}

.theme-editor-footer-left,
.theme-editor-footer-right {
  display: flex;
  gap: var(--spacing-md);
}

.theme-editor-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.theme-editor-btn.secondary {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
}

.theme-editor-btn.secondary:hover {
  background: var(--bg-hover);
}

.theme-editor-btn.primary {
  background: var(--accent);
  border: none;
  color: var(--text-inverse);
}

.theme-editor-btn.primary:hover {
  background: var(--accent-hover);
}

/* Responsive */
@media (max-width: 768px) {
  .theme-editor-content {
    grid-template-columns: 1fr;
  }

  .theme-editor-preview-panel {
    display: none;
  }

  .theme-editor-color-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ========================================
   ENHANCED DISCOVER SECTIONS
   New algorithmic sections styles
   ======================================== */

/* Trending Sections */
.discover-trending-section,
.discover-trending-artists-section,
.discover-artist-radio-section,
.discover-because-you-like-section,
.discover-new-releases-section {
  margin-bottom: var(--gap-section);
}

/* Artist card circular style */
.artist-card.circular {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  min-width: 140px;
  padding: var(--spacing-md);
  cursor: pointer;
}

.artist-card.circular .artist-card-image {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  overflow: hidden;
  position: relative;
}

.artist-card.circular .artist-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.artist-card-skeleton.circular {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  animation: pulse 1.5s infinite;
}

/* Album "NEW" badge */
.album-new-badge {
  position: absolute;
  top: var(--spacing-sm);
  left: var(--spacing-sm);
  padding: 2px 8px;
  background: var(--accent);
  color: var(--text-inverse);
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  border-radius: var(--radius-xs);
  letter-spacing: 0.5px;
}

.album-card-artist-clean {
  font-size: 12px;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ========================================
   ALBUM DETAIL VIEW ENHANCEMENTS
   Artist card and similar albums styles
   ======================================== */

/* Album page section title */
.album-section-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-lg);
}

/* Full artist card on album page */
.album-artist-section {
  padding: var(--spacing-xl) var(--spacing-2xl);
  margin-bottom: var(--gap-section);
}

.album-artist-card {
  display: flex;
  gap: var(--spacing-xl);
  padding: var(--spacing-xl);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
}

.album-artist-card:hover {
  background: var(--bg-hover);
  transform: translateY(-2px);
}

.album-artist-card-image {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}

.album-artist-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.album-artist-card-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-tertiary);
}

.album-artist-card-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: var(--spacing-sm);
  min-width: 0;
  overflow: hidden;
}

.album-artist-card-name {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.album-artist-card-followers {
  font-size: 14px;
  color: var(--text-secondary);
}

.album-artist-card-genres {
  font-size: 13px;
  color: var(--text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.album-artist-card-bio {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin: var(--spacing-sm) 0;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.album-artist-card-btn {
  align-self: flex-start;
  padding: var(--spacing-sm) var(--spacing-lg);
  background: transparent;
  border: 1px solid var(--text-secondary);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 600;
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all 0.2s ease;
}

.album-artist-card-btn:hover {
  background: var(--text-primary);
  color: var(--text-inverse);
}

/* Similar albums section */
.album-similar-section {
  margin-top: var(--spacing-xl);
}

/* ========================================
   ARTIST DETAIL VIEW ENHANCEMENTS
   Latest release, appears on, about styles
   ======================================== */

/* Latest release section */
.artist-section-latest-release {
  margin-bottom: var(--gap-section);
}

.latest-release-card {
  display: flex;
  gap: var(--spacing-xl);
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
}

.latest-release-card:hover {
  background: var(--bg-hover);
  transform: translateY(-2px);
}

.latest-release-artwork {
  width: 180px;
  height: 180px;
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
  position: relative;
}

.latest-release-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.latest-release-artwork-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-tertiary);
}

.latest-release-badge {
  position: absolute;
  top: var(--spacing-sm);
  left: var(--spacing-sm);
  padding: 4px 10px;
  background: var(--accent);
  color: var(--text-inverse);
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  border-radius: var(--radius-xs);
  letter-spacing: 0.5px;
}

.latest-release-play {
  position: absolute;
  bottom: var(--spacing-md);
  right: var(--spacing-md);
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-inverse);
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.2s ease, transform 0.2s ease;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

.latest-release-card:hover .latest-release-play {
  opacity: 1;
  transform: translateY(0);
}

.latest-release-info {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: var(--spacing-sm);
  min-width: 0;
  overflow: hidden;
}

.latest-release-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.latest-release-meta {
  font-size: 14px;
  color: var(--text-secondary);
}

/* Appears on section */
.artist-section-appears-on {
  margin-bottom: var(--gap-section);
}

/* About artist section */
.artist-section-about {
  margin-bottom: var(--gap-section);
}

.artist-about-card {
  display: flex;
  gap: var(--spacing-xl);
  padding: var(--spacing-xl);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.artist-about-image {
  width: 200px;
  height: 200px;
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
}

.artist-about-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.artist-about-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.artist-bio-text {
  font-size: 15px;
  line-height: 1.6;
  color: var(--text-secondary);
}

.artist-external-links {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
  margin-top: var(--spacing-md);
}

.artist-external-link {
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--bg-secondary);
  color: var(--text-primary);
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  border-radius: var(--radius-full);
  transition: background 0.2s ease;
}

.artist-external-link:hover {
  background: var(--bg-hover);
}

/* Responsive adjustments for new sections */
@media (max-width: 768px) {
  .album-artist-card {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .album-artist-card-info {
    align-items: center;
  }

  .latest-release-card {
    flex-direction: column;
  }

  .latest-release-artwork {
    width: 100%;
    height: auto;
    aspect-ratio: 1;
    max-width: 300px;
    margin: 0 auto;
  }

  .latest-release-info {
    text-align: center;
  }

  .artist-about-card {
    flex-direction: column;
  }

  .artist-about-image {
    width: 100%;
    height: auto;
    aspect-ratio: 1;
    max-width: 200px;
    margin: 0 auto;
  }

  .artist-about-content {
    text-align: center;
  }

  .artist-external-links {
    justify-content: center;
  }
}

/* ========================================
   MOBILE ACCESS SETTINGS
   ======================================== */

.mobile-access-settings {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.mobile-access-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-3xl);
}

.mobile-access-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--bg-tertiary);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: mobileSpinner 1s linear infinite;
}

@keyframes mobileSpinner {
  to { transform: rotate(360deg); }
}

.mobile-access-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
}

.mobile-access-header-icon {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  background: var(--accent-soft);
  color: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
}

.mobile-access-header-info {
  flex: 1;
}

.mobile-access-header-info h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.mobile-access-header-info p {
  font-size: 13px;
  color: var(--text-secondary);
}

.mobile-access-toggle {
  position: relative;
  display: inline-block;
  width: 51px;
  height: 31px;
  flex-shrink: 0;
}

.mobile-access-toggle.small {
  width: 44px;
  height: 26px;
}

.mobile-access-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.mobile-access-toggle-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: var(--bg-tertiary);
  border-radius: 31px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.mobile-access-toggle-slider::before {
  position: absolute;
  content: "";
  height: 27px;
  width: 27px;
  left: 2px;
  bottom: 2px;
  background: white;
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.mobile-access-toggle.small .mobile-access-toggle-slider::before {
  height: 22px;
  width: 22px;
}

.mobile-access-toggle input:checked + .mobile-access-toggle-slider {
  background: var(--accent);
}

.mobile-access-toggle input:checked + .mobile-access-toggle-slider::before {
  transform: translateX(20px);
}

.mobile-access-toggle.small input:checked + .mobile-access-toggle-slider::before {
  transform: translateX(18px);
}

.mobile-access-toggle input:disabled + .mobile-access-toggle-slider {
  opacity: 0.5;
  cursor: not-allowed;
}

.mobile-access-content {
  padding: var(--spacing-xl);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

/* QR Code Tabs (Anywhere / Same Network) */
.mobile-qr-tabs-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-lg);
}

.mobile-qr-tabs {
  display: flex;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  padding: 4px;
  gap: 4px;
}

.mobile-qr-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  background: transparent;
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all 0.2s ease;
}

.mobile-qr-tab:hover {
  color: var(--text-primary);
}

.mobile-qr-tab.active {
  background: var(--accent);
  color: white;
}

.mobile-qr-tabs-container .mobile-qr-card {
  width: 200px;
  height: 200px;
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
}

.mobile-qr-tabs-container .mobile-qr-info {
  text-align: center;
}

.mobile-qr-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-lg);
}

.mobile-qr-card {
  width: 200px;
  height: 200px;
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
}

.mobile-qr-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.mobile-qr-placeholder {
  color: var(--text-muted);
}

.mobile-qr-info {
  text-align: center;
}

.mobile-qr-instruction {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xs);
}

.mobile-qr-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: var(--spacing-md);
}

.mobile-qr-url-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  justify-content: center;
}

.mobile-qr-badge {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 4px 10px;
  border-radius: var(--radius-full);
  background: var(--accent-soft);
  color: var(--accent);
}

.mobile-qr-copy {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
  padding: 6px 12px;
  border-radius: var(--radius-md);
  background: var(--bg-tertiary);
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-qr-copy:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Tunnel Password Notice */
.mobile-tunnel-password {
  margin-top: var(--spacing-lg);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
  text-align: left;
}

.mobile-tunnel-password-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  color: var(--accent-primary);
  font-weight: 600;
  font-size: 13px;
  margin-bottom: var(--spacing-xs);
}

.mobile-tunnel-password-hint {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0 0 var(--spacing-sm) 0;
  line-height: 1.4;
}

.mobile-tunnel-password-value {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  background: var(--bg-secondary);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-sm);
}

.mobile-tunnel-password-value code {
  flex: 1;
  font-family: var(--font-mono);
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  word-break: break-all;
}

.mobile-tunnel-password-note {
  font-size: 11px;
  color: var(--text-muted);
  margin: var(--spacing-sm) 0 0 0;
  font-style: italic;
}

.mobile-tunnel-password-hint strong {
  color: var(--text-primary);
}

/* Relay Code Display */
.mobile-relay-container {
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
}

.mobile-relay-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
  color: var(--text-secondary);
}

.mobile-relay-status {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 13px;
  font-weight: 500;
}

.mobile-relay-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-muted);
  transition: all 0.3s ease;
}

.mobile-relay-indicator.active {
  background: var(--accent-success, #34c759);
  box-shadow: 0 0 8px var(--accent-success, #34c759);
  animation: relay-pulse 2s infinite;
}

@keyframes relay-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.mobile-relay-code-card {
  background: var(--bg-primary);
  border: 2px solid var(--accent);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-md);
}

.mobile-relay-code {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-family: var(--font-mono, monospace);
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 1px;
  color: var(--text-primary);
}

.mobile-relay-code-part {
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
}

.mobile-relay-separator {
  color: var(--text-muted);
  font-weight: 400;
}

.mobile-relay-copy {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
  padding: 8px 16px;
  border-radius: var(--radius-full);
  background: var(--bg-tertiary);
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-relay-copy:hover {
  background: var(--accent-soft);
  color: var(--accent);
}

.mobile-relay-hint {
  font-size: 13px;
  color: var(--text-secondary);
  text-align: center;
  margin-top: var(--spacing-md);
  line-height: 1.5;
}

.mobile-access-option {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.mobile-access-option-info {
  flex: 1;
}

.mobile-access-option-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: 6px;
  color: var(--text-primary);
}

.mobile-access-option-row h4 {
  font-size: 14px;
  font-weight: 600;
}

.mobile-access-option-info p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.mobile-access-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.mobile-access-section-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.mobile-access-section-header h4 {
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-secondary);
}

.mobile-access-count {
  font-size: 12px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: var(--radius-full);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.mobile-devices-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-2xl);
  color: var(--text-muted);
  text-align: center;
}

.mobile-devices-empty p {
  font-size: 14px;
  color: var(--text-secondary);
}

.mobile-devices-empty span {
  font-size: 13px;
}

.mobile-devices-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.mobile-device-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
}

.mobile-device-icon {
  position: relative;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  background: var(--bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

.mobile-device-status {
  position: absolute;
  bottom: -2px;
  right: -2px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--text-muted);
  border: 2px solid var(--bg-tertiary);
}

.mobile-device-status.active {
  background: var(--accent);
}

.mobile-device-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mobile-device-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.mobile-device-time {
  font-size: 12px;
  color: var(--text-secondary);
}

.mobile-device-disconnect {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-device-disconnect:hover {
  background: var(--color-error);
  color: white;
}

.mobile-access-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--border-color);
}

.mobile-access-action-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-lg);
  border-radius: var(--radius-md);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-access-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.mobile-access-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.mobile-access-action-hint {
  font-size: 12px;
  color: var(--text-muted);
}

.mobile-access-disabled-hint {
  padding: var(--spacing-xl);
  padding-top: 0;
}

.mobile-access-disabled-hint p {
  font-size: 14px;
  color: var(--text-secondary);
  text-align: center;
  line-height: 1.5;
}

/* ========================================
   Storage Settings
   ======================================== */

.storage-settings {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.storage-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.storage-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.storage-section-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.storage-section-title svg {
  color: var(--text-secondary);
}

.storage-section-description {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
}

.storage-add-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-accent);
  background: var(--color-accent-soft);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.storage-add-btn:hover {
  background: var(--color-accent);
  color: white;
}

.storage-add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Folder Picker */
.storage-folder-picker {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
}

.storage-folder-info {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
}

.storage-folder-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: var(--bg-hover);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  flex-shrink: 0;
}

.storage-folder-text h4 {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin: 0 0 2px 0;
}

.storage-folder-text p {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0;
}

.storage-folder-input {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.storage-folder-input input {
  flex: 1;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
}

.storage-folder-input input::placeholder {
  color: var(--text-muted);
}

.storage-folder-browse {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.storage-folder-browse:hover {
  background: var(--bg-hover);
  border-color: var(--border-strong);
}

.storage-folder-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  color: var(--text-muted);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.storage-folder-clear:hover {
  color: var(--color-error);
  background: var(--color-error-soft);
}

/* Local Music Folder Cards */
.local-music-folder-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.local-music-folder-card {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  transition: all var(--transition-fast);
}

.local-music-folder-card:hover {
  border-color: var(--border-strong);
}

.local-music-folder-card.scanning {
  border-color: var(--color-accent);
  background: var(--color-accent-soft);
}

.local-music-folder-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--bg-hover);
  border-radius: var(--radius-md);
  color: var(--color-accent);
  flex-shrink: 0;
}

.local-music-folder-info {
  flex: 1;
  min-width: 0;
}

.local-music-folder-info h4 {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin: 0 0 2px 0;
}

.local-music-folder-path {
  font-size: 11px;
  color: var(--text-muted);
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.local-music-folder-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-secondary);
}

.local-music-folder-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.local-music-folder-action {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  color: var(--text-muted);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.local-music-folder-action:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.local-music-folder-action.danger:hover {
  color: var(--color-error);
  background: var(--color-error-soft);
}

.local-music-folder-action:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.local-music-folder-action svg.spinning {
  animation: spin 1s linear infinite;
}

/* Empty State */
.storage-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-2xl);
  background: var(--bg-tertiary);
  border: 1px dashed var(--border-color);
  border-radius: var(--radius-lg);
  text-align: center;
}

.storage-empty svg {
  color: var(--text-muted);
}

.storage-empty p {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
}

.storage-empty-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-accent);
  background: var(--color-accent-soft);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.storage-empty-btn:hover {
  background: var(--color-accent);
  color: white;
}

/* Plugin Hint */
.storage-plugin-hint {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 12px;
  color: var(--color-success);
  background: var(--color-success-soft);
  border-radius: var(--radius-md);
}

.storage-plugin-hint code {
  padding: 2px 6px;
  font-size: 11px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: var(--radius-sm);
}

.storage-plugin-notification {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 12px;
  font-weight: 500;
  border-radius: var(--radius-md);
  animation: slideIn 0.2s ease-out;
}

.storage-plugin-notification.success {
  color: var(--color-success);
  background: var(--color-success-soft);
}

.storage-plugin-notification.error {
  color: var(--color-error);
  background: rgba(239, 68, 68, 0.1);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Privacy Notice Modal */
.mobile-privacy-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--spacing-xl);
}

.mobile-privacy-modal {
  width: 100%;
  max-width: 440px;
  background: var(--bg-secondary);
  border-radius: var(--radius-xl);
  overflow: hidden;
  animation: privacyModalSlide 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes privacyModalSlide {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.mobile-privacy-icon {
  width: 80px;
  height: 80px;
  margin: var(--spacing-2xl) auto var(--spacing-lg);
  border-radius: 20px;
  background: var(--gradient-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-on-accent);
}

.mobile-privacy-title {
  font-size: 24px;
  font-weight: 700;
  text-align: center;
  color: var(--text-primary);
  margin-bottom: var(--spacing-xs);
}

.mobile-privacy-subtitle {
  font-size: 15px;
  color: var(--text-secondary);
  text-align: center;
  margin-bottom: var(--spacing-xl);
}

.mobile-privacy-content {
  padding: 0 var(--spacing-xl);
}

.mobile-privacy-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.mobile-privacy-feature {
  display: flex;
  gap: var(--spacing-md);
}

.mobile-privacy-feature-icon {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.mobile-privacy-feature-icon.secure {
  background: var(--color-info-soft);
  color: var(--color-info);
}

.mobile-privacy-feature-icon.private {
  background: var(--color-purple-soft);
  color: var(--color-access-metadata);
}

.mobile-privacy-feature-icon.control {
  background: var(--color-success-soft);
  color: var(--color-energy-balanced);
}

.mobile-privacy-feature-info h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.mobile-privacy-feature-info p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.mobile-privacy-note {
  display: flex;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-xl);
}

.mobile-privacy-note svg {
  flex-shrink: 0;
  color: var(--text-muted);
  margin-top: 2px;
}

.mobile-privacy-note p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.mobile-privacy-note strong {
  color: var(--text-primary);
}

.mobile-privacy-actions {
  display: flex;
  gap: var(--spacing-sm);
  padding: var(--spacing-xl);
  background: var(--bg-tertiary);
}

.mobile-privacy-btn {
  flex: 1;
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-lg);
  font-size: 15px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-privacy-btn.secondary {
  background: var(--bg-secondary);
  color: var(--text-secondary);
}

.mobile-privacy-btn.secondary:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.mobile-privacy-btn.primary {
  background: var(--accent);
  color: var(--text-on-accent);
}

.mobile-privacy-btn.primary:hover {
  background: var(--accent-hover);
}

/* Device Approval Dialog */
.mobile-approval-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

.mobile-approval-modal {
  width: 100%;
  max-width: 380px;
  background: var(--bg-primary);
  border-radius: var(--radius-xl);
  overflow: hidden;
  text-align: center;
  padding: var(--spacing-xl);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.mobile-approval-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto var(--spacing-lg);
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-soft) 0%, var(--color-success-soft) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--accent);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 var(--accent-soft);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 0 10px transparent;
  }
}

.mobile-approval-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-xs);
}

.mobile-approval-subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
}

.mobile-approval-device {
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  margin-bottom: var(--spacing-lg);
}

.mobile-approval-device-name {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--spacing-xs);
}

.mobile-approval-device-hint {
  font-size: 13px;
  color: var(--text-muted);
}

.mobile-approval-actions {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.mobile-approval-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-lg);
  font-size: 15px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-approval-btn-approve {
  background: var(--color-energy-balanced);
  color: #000;
}

.mobile-approval-btn-approve:hover {
  filter: brightness(1.1);
}

.mobile-approval-btn-deny {
  background: var(--bg-secondary);
  color: var(--text-secondary);
}

.mobile-approval-btn-deny:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.mobile-approval-note {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.5;
}

/* Passphrase Section */
.mobile-passphrase-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.mobile-passphrase-card {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.mobile-passphrase-card.custom {
  background: linear-gradient(135deg, var(--accent-soft) 0%, transparent 100%);
  border: 1px solid var(--accent);
}

.mobile-passphrase-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mobile-passphrase-label {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-secondary);
}

.mobile-passphrase-value {
  font-family: var(--font-mono);
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: 1px;
}

.mobile-passphrase-value.masked {
  color: var(--accent);
}

.mobile-passphrase-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.mobile-passphrase-btn {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  background: var(--bg-hover);
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-passphrase-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.mobile-passphrase-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.mobile-custom-password-link {
  font-size: 13px;
  color: var(--accent);
  background: none;
  border: none;
  cursor: pointer;
  text-decoration: underline;
  text-underline-offset: 2px;
  padding: 0;
  align-self: flex-start;
}

.mobile-custom-password-link:hover {
  opacity: 0.8;
}

/* Custom Password Form */
.mobile-custom-password-form {
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
}

.mobile-custom-password-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
}

.mobile-custom-password-header h4 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.mobile-custom-password-close {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  background: transparent;
  border: none;
  cursor: pointer;
}

.mobile-custom-password-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.mobile-custom-password-hint {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-md);
  line-height: 1.5;
}

.mobile-custom-password-input {
  width: 100%;
  padding: var(--spacing-md);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: var(--spacing-md);
}

.mobile-custom-password-input:focus {
  outline: none;
  border-color: var(--accent);
}

.mobile-custom-password-error {
  font-size: 13px;
  color: var(--color-error);
  margin-bottom: var(--spacing-md);
}

.mobile-custom-password-actions {
  display: flex;
  gap: var(--spacing-md);
  justify-content: flex-end;
}

.mobile-custom-password-btn {
  padding: var(--spacing-sm) var(--spacing-lg);
  border-radius: var(--radius-md);
  font-size: 14px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.mobile-custom-password-btn.secondary {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.mobile-custom-password-btn.secondary:hover {
  color: var(--text-primary);
}

.mobile-custom-password-btn.primary {
  background: var(--accent);
  color: var(--text-on-accent);
}

.mobile-custom-password-btn.primary:hover {
  background: var(--accent-hover);
}

.mobile-custom-password-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Authorized Devices */
.mobile-authorized-devices {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.mobile-revoke-all-btn {
  font-size: 13px;
  color: var(--color-error);
  background: none;
  border: none;
  cursor: pointer;
  align-self: center;
  padding: var(--spacing-sm);
}

.mobile-revoke-all-btn:hover {
  text-decoration: underline;
}

/* Security Settings */
.mobile-security-settings {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-lg);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
}

.mobile-security-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-lg);
  padding: var(--spacing-md) 0;
  border-bottom: 1px solid var(--border-color);
}

.mobile-security-option:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.mobile-security-option-info {
  flex: 1;
}

.mobile-security-option-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  display: block;
  margin-bottom: 4px;
}

.mobile-security-option-desc {
  font-size: 12px;
  color: var(--text-secondary);
}

.mobile-security-select {
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  min-width: 100px;
}

.mobile-security-select:focus {
  outline: none;
  border-color: var(--accent);
}

/* ========================================
   TOAST NOTIFICATIONS
   ======================================== */

.toast-container {
  position: fixed;
  bottom: calc(var(--player-height) + 20px);
  right: 20px;
  z-index: 10000;
  display: flex;
  flex-direction: column-reverse;
  gap: var(--spacing-sm);
  pointer-events: none;
}

.toast {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--bg-elevated);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  min-width: 280px;
  max-width: 400px;
  pointer-events: auto;
  animation: toast-slide-in 0.2s ease-out;
}

.toast-exit {
  animation: toast-slide-out 0.2s ease-in forwards;
}

@keyframes toast-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toast-slide-out {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

.toast-icon {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: var(--radius-full);
}

.toast-success .toast-icon {
  background: var(--color-success-soft);
  color: var(--color-success);
}

.toast-error .toast-icon {
  background: var(--color-error-soft);
  color: var(--color-error);
}

.toast-warning .toast-icon {
  background: var(--color-warning-soft);
  color: var(--color-warning);
}

.toast-info .toast-icon {
  background: var(--color-info-soft);
  color: var(--color-info);
}

.toast-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.toast-message {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.toast-action {
  background: none;
  border: none;
  padding: 0;
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  cursor: pointer;
  text-align: left;
}

.toast-action:hover {
  text-decoration: underline;
}

.toast-close {
  flex-shrink: 0;
  background: none;
  border: none;
  padding: 4px;
  color: var(--text-tertiary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s, color 0.15s;
}

.toast-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* ========================================
   MOOD PLAYLIST SECTION
   ======================================== */

.mood-playlist-section {
  --mood-transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.mood-tiles-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.mood-tile {
  position: relative;
  border: none;
  padding: 0;
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  aspect-ratio: 1.2;
  transition: transform var(--mood-transition), box-shadow var(--mood-transition);
}

.mood-tile:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: var(--shadow-elevated);
}

.mood-tile.active {
  transform: scale(1.03);
  box-shadow: 0 8px 24px -4px color-mix(in srgb, var(--gradient-start) 40%, transparent);
}

.mood-tile-bg {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
  opacity: 0.85;
  transition: opacity var(--mood-transition);
}

.mood-tile:hover .mood-tile-bg,
.mood-tile.active .mood-tile-bg {
  opacity: 1;
}

.mood-tile-content {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: var(--spacing-md);
  color: white;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.mood-tile-icon {
  font-size: 32px;
  margin-bottom: var(--spacing-sm);
}

.mood-tile-name {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 2px;
}

.mood-tile-desc {
  font-size: 11px;
  opacity: 0.85;
}

/* Expanded mood content */
.mood-expanded-content {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--mood-color-1) 15%, var(--bg-primary)) 0%,
    color-mix(in srgb, var(--mood-color-2) 10%, var(--bg-primary)) 100%
  );
  border-radius: var(--radius-xl);
  padding: var(--spacing-lg);
  margin-top: var(--spacing-md);
  animation: mood-expand 0.3s ease-out;
}

@keyframes mood-expand {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.mood-expanded-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--border-color);
}

.mood-expanded-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.mood-expanded-icon {
  font-size: 36px;
}

.mood-expanded-text h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 2px;
}

.mood-expanded-text span {
  font-size: 13px;
  color: var(--text-secondary);
}

.mood-expanded-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.mood-play-btn,
.mood-shuffle-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-md);
  border: none;
  border-radius: var(--radius-full);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}

.mood-play-btn {
  background: var(--accent);
  color: white;
}

.mood-play-btn:hover:not(:disabled) {
  background: var(--accent-hover);
  transform: scale(1.03);
}

.mood-shuffle-btn {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.mood-shuffle-btn:hover:not(:disabled) {
  background: var(--bg-hover);
}

.mood-play-btn:disabled,
.mood-shuffle-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Track list */
.mood-tracks-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--spacing-sm);
}

.mood-track-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.15s;
}

.mood-track-item:hover {
  background: var(--bg-hover);
}

.mood-track-artwork {
  position: relative;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
}

.mood-track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.mood-track-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-tertiary);
}

.mood-track-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.15s;
  color: white;
}

.mood-track-item:hover .mood-track-overlay {
  opacity: 1;
}

.mood-track-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mood-track-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mood-track-artist {
  font-size: 11px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mood-tracks-more {
  grid-column: 1 / -1;
  padding: var(--spacing-md);
  text-align: center;
  font-size: 13px;
  color: var(--text-secondary);
}

/* Loading skeleton */
.mood-tracks-loading {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--spacing-sm);
}

.mood-track-skeleton {
  height: 56px;
  border-radius: var(--radius-md);
  background: linear-gradient(
    90deg,
    var(--bg-tertiary) 25%,
    var(--bg-hover) 50%,
    var(--bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

/* ========================================
   DISCOVERY SLIDER
   ======================================== */

.discovery-slider {
  padding: var(--spacing-lg);
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
}

.discovery-slider-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.discovery-slider-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.discovery-slider-value {
  font-size: 13px;
  font-weight: 500;
  color: var(--accent);
  padding: 2px 8px;
  background: var(--accent-soft);
  border-radius: var(--radius-full);
}

.discovery-slider-track-container {
  position: relative;
}

.discovery-slider-input {
  width: 100%;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  outline: none;
  cursor: pointer;
}

.discovery-slider-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  box-shadow: var(--shadow-md);
  transition: transform 0.15s, box-shadow 0.15s;
}

.discovery-slider-input::-webkit-slider-thumb:hover {
  transform: scale(1.15);
  box-shadow: var(--shadow-elevated);
}

.discovery-slider-input::-webkit-slider-thumb:active {
  transform: scale(1.1);
}

.discovery-slider-input::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border: none;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  box-shadow: var(--shadow-md);
}

/* Progress fill */
.discovery-slider-input::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: var(--slider-progress, 50%);
  height: 6px;
  background: var(--accent);
  border-radius: var(--radius-full);
  pointer-events: none;
}

.discovery-slider-labels {
  display: flex;
  justify-content: space-between;
  margin-top: var(--spacing-xs);
}

.discovery-label {
  font-size: 11px;
  color: var(--text-tertiary);
}

.discovery-label.center {
  text-align: center;
}

.discovery-slider-description {
  margin-top: var(--spacing-sm);
  font-size: 12px;
  color: var(--text-secondary);
  text-align: center;
}

/* Compact version */
.discovery-slider-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
}

.discovery-slider-compact .discovery-slider-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 60px;
}

.discovery-slider-compact .discovery-slider-input {
  width: 80px;
  height: 4px;
}

.discovery-slider-compact .discovery-slider-input::-webkit-slider-thumb {
  width: 14px;
  height: 14px;
}

/* Mini toggle button */
.discovery-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all 0.15s;
  font-size: 13px;
}

.discovery-toggle:hover {
  background: var(--bg-hover);
  border-color: var(--accent);
}

.discovery-toggle-icon {
  font-size: 14px;
}

.discovery-toggle-label {
  font-weight: 500;
  color: var(--text-primary);
}

/* ========================================
   RECOMMENDATION EXPLANATION MODAL
   ======================================== */

.explanation-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.15s ease-out;
}

@keyframes explanationFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.explanation-modal {
  background: var(--bg-primary);
  border-radius: var(--radius-xl);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  width: 90%;
  max-width: 480px;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: explanationSlideUp 0.2s ease-out;
}

@keyframes explanationSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.explanation-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg) var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
}

.explanation-modal-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.explanation-modal-close {
  background: none;
  border: none;
  color: var(--text-tertiary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
  transition: all 0.15s;
}

.explanation-modal-close:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.explanation-modal-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-3xl);
  gap: var(--spacing-lg);
}

.explanation-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--bg-tertiary);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.explanation-modal-loading p {
  color: var(--text-secondary);
  font-size: 14px;
}

.explanation-modal-error {
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--error);
}

.explanation-modal-content {
  padding: var(--spacing-xl);
  overflow-y: auto;
  flex: 1;
}

/* Track Info */
.explanation-track-info {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.explanation-track-artwork {
  width: 64px;
  height: 64px;
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
}

.explanation-track-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.explanation-track-artwork-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-tertiary);
}

.explanation-track-details {
  flex: 1;
  min-width: 0;
}

.explanation-track-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.explanation-track-artist {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.explanation-score-badge {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-md);
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  border-radius: var(--radius-lg);
  flex-shrink: 0;
}

.explanation-score-value {
  font-size: 24px;
  font-weight: 700;
  color: white;
  line-height: 1;
}

.explanation-score-label {
  font-size: 10px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Summary */
.explanation-summary {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
}

.explanation-summary p {
  margin: 0;
  color: var(--text-primary);
  font-size: 14px;
  line-height: 1.5;
}

/* Factors */
.explanation-factors-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 var(--spacing-md) 0;
}

.explanation-factors-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.explanation-factor {
  display: flex;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border-left: 3px solid var(--bg-tertiary);
}

.explanation-factor.factor-impact-positive {
  border-left-color: var(--success);
}

.explanation-factor.factor-impact-negative {
  border-left-color: var(--error);
}

.explanation-factor.factor-impact-neutral {
  border-left-color: var(--text-tertiary);
}

.explanation-factor-icon {
  font-size: 20px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.explanation-factor-content {
  flex: 1;
  min-width: 0;
}

.explanation-factor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-xs);
}

.explanation-factor-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.explanation-factor-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
}

.explanation-factor-bar {
  height: 4px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  overflow: hidden;
  margin-bottom: var(--spacing-xs);
}

.explanation-factor-bar-fill {
  height: 100%;
  background: var(--accent);
  border-radius: var(--radius-full);
  transition: width 0.3s ease-out;
}

.factor-impact-positive .explanation-factor-bar-fill {
  background: var(--success);
}

.factor-impact-negative .explanation-factor-bar-fill {
  background: var(--error);
}

.explanation-factor-description {
  margin: 0;
  font-size: 12px;
  color: var(--text-tertiary);
  line-height: 1.4;
}

/* Why Button */
.why-button {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  border-radius: 50%;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.15s;
}

.why-button:hover {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
  transform: scale(1.1);
}

.why-button-small {
  width: 20px;
  height: 20px;
  font-size: 11px;
}

.why-button-medium {
  width: 28px;
  height: 28px;
  font-size: 14px;
}

/* Track Card with Why Button */
.track-card {
  position: relative;
}

.track-card .why-button {
  position: absolute;
  top: 8px;
  right: 8px;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.15s;
  z-index: 5;
}

.track-card:hover .why-button {
  opacity: 1;
  transform: scale(1);
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .explanation-modal {
    width: 95%;
    max-height: 90vh;
  }

  .explanation-modal-header {
    padding: var(--spacing-md);
  }

  .explanation-modal-content {
    padding: var(--spacing-md);
  }

  .explanation-track-info {
    flex-wrap: wrap;
  }

  .explanation-score-badge {
    margin-left: auto;
  }
}

/* ========================================
   STATS DASHBOARD
   ======================================== */

.stats-view {
  padding: var(--spacing-xl);
  max-width: 1200px;
  margin: 0 auto;
}

.stats-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-2xl);
}

.stats-back-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: var(--spacing-xs);
  border-radius: var(--radius-md);
  transition: all 0.15s;
}

.stats-back-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.stats-header-content {
  flex: 1;
}

.stats-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.stats-subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 4px 0 0 0;
}

.stats-period-selector {
  display: flex;
  gap: var(--spacing-xs);
  background: var(--bg-secondary);
  padding: var(--spacing-xs);
  border-radius: var(--radius-lg);
}

.period-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all 0.15s;
}

.period-btn:hover {
  color: var(--text-primary);
}

.period-btn.active {
  background: var(--accent);
  color: white;
}

.stats-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

/* Stat Cards */
.stats-summary {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-md);
}

.stat-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
}

.stat-card-icon {
  font-size: 28px;
  line-height: 1;
}

.stat-card-content {
  flex: 1;
}

.stat-card-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.2;
}

.stat-card-label {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 4px;
}

.stat-card-subtitle {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-top: 4px;
}

.stat-card-trend {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  margin-top: 8px;
}

.stat-card-trend.positive {
  color: var(--success);
}

.stat-card-trend.negative {
  color: var(--error);
}

/* Stats Columns */
.stats-columns {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-xl);
}

/* Stats Section */
.stats-section {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
}

.stats-section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 var(--spacing-md) 0;
}

.stats-empty {
  text-align: center;
  padding: var(--spacing-xl);
  color: var(--text-tertiary);
}

/* Top Lists */
.top-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.top-list-empty {
  text-align: center;
  padding: var(--spacing-lg);
  color: var(--text-tertiary);
}

.top-list-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.15s;
}

.top-list-item:hover {
  background: var(--bg-tertiary);
}

.top-list-rank {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-tertiary);
  width: 20px;
  text-align: center;
}

.top-list-artwork {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
}

.top-list-artwork img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.top-list-artwork-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-tertiary);
}

.top-list-info {
  flex: 1;
  min-width: 0;
}

.top-list-name {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.top-list-meta {
  display: block;
  font-size: 12px;
  color: var(--text-tertiary);
}

.top-list-bar-container {
  width: 60px;
  height: 6px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.top-list-bar {
  height: 100%;
  background: var(--accent);
  border-radius: var(--radius-full);
  transition: width 0.3s ease-out;
}

.top-list.genres .top-list-item {
  padding-left: var(--spacing-md);
}

/* Bar Chart */
.bar-chart {
  display: flex;
  flex-direction: column;
}

.bar-chart-bars {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-sm);
  height: 100%;
  padding-bottom: 24px;
}

.bar-chart-bar-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 100%;
}

.bar-chart-bar {
  width: 100%;
  background: linear-gradient(to top, var(--accent), var(--accent-hover));
  border-radius: var(--radius-sm) var(--radius-sm) 0 0;
  min-height: 4px;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  transition: height 0.3s ease-out;
}

.bar-chart-value {
  font-size: 10px;
  font-weight: 600;
  color: white;
  padding-top: 4px;
}

.bar-chart-label {
  font-size: 11px;
  color: var(--text-tertiary);
  margin-top: var(--spacing-xs);
  position: absolute;
  bottom: 0;
}

/* Horizontal Bar Chart */
.horizontal-bar-chart {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.horizontal-bar-row {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.horizontal-bar-label {
  width: 80px;
  font-size: 13px;
  color: var(--text-secondary);
  text-align: right;
}

.horizontal-bar-container {
  flex: 1;
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.horizontal-bar {
  height: 100%;
  background: var(--accent);
  border-radius: var(--radius-full);
  transition: width 0.3s ease-out;
}

.horizontal-bar-value {
  width: 40px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
}

/* Heatmaps */
.heatmap {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.hourly-heatmap .heatmap-grid {
  display: grid;
  grid-template-columns: repeat(24, 1fr);
  gap: 2px;
}

.day-heatmap .heatmap-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--spacing-xs);
}

.heatmap-cell {
  aspect-ratio: 1;
  background: var(--accent);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 24px;
}

.heatmap-cell.day-cell {
  flex-direction: column;
  aspect-ratio: auto;
  padding: var(--spacing-sm);
}

.heatmap-cell-label {
  font-size: 10px;
  font-weight: 500;
  color: white;
}

.heatmap-cell-value {
  font-size: 14px;
  font-weight: 600;
  color: white;
}

.heatmap-labels {
  display: flex;
  justify-content: space-between;
}

.heatmap-label {
  font-size: 10px;
  color: var(--text-tertiary);
}

/* Stats Patterns */
.stats-patterns {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-xl);
}

.stats-pattern-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.stats-pattern-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  margin: 0;
}

.stats-chart-container {
  min-height: 140px;
}

/* Stats Responsive */
@media (max-width: 768px) {
  .stats-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .stats-period-selector {
    width: 100%;
    justify-content: center;
  }

  .stats-summary {
    grid-template-columns: repeat(2, 1fr);
  }

  .stats-columns {
    grid-template-columns: 1fr;
  }

  .stats-patterns {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .stats-view {
    padding: var(--spacing-md);
  }

  .stats-summary {
    grid-template-columns: 1fr;
  }

  .period-btn {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: 12px;
  }
}

/* ==============================================
   Audio Settings
   ============================================== */

.audio-settings {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

.settings-group {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
}

.settings-group-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
  color: var(--text-primary);
}

.settings-group-header h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin: 0;
}

.settings-group-description {
  color: var(--text-muted);
  font-size: var(--font-size-sm);
  margin-bottom: var(--spacing-lg);
  line-height: 1.5;
}

.settings-option-info h4 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  margin: 0 0 var(--spacing-xs) 0;
  color: var(--text-primary);
}

/* Toggle Switch */
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
  flex-shrink: 0;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-tertiary);
  border-radius: 24px;
  transition: all 0.3s;
}

.toggle-slider::before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: var(--text-muted);
  border-radius: 50%;
  transition: all 0.3s;
}

.toggle-switch input:checked + .toggle-slider {
  background-color: var(--accent);
}

.toggle-switch input:checked + .toggle-slider::before {
  transform: translateX(20px);
  background-color: white;
}

/* Settings Slider */
.settings-slider {
  width: 200px;
  height: 6px;
  border-radius: 3px;
  background: var(--bg-tertiary);
  appearance: none;
  outline: none;
}

.settings-slider::-webkit-slider-thumb {
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--bg-primary);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.settings-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--bg-primary);
}

/* Settings Select */
.settings-select {
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  min-width: 200px;
}

.settings-select:focus {
  outline: none;
  border-color: var(--accent);
}

/* Settings Input */
.settings-input {
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  min-width: 250px;
}

.settings-input:focus {
  outline: none;
  border-color: var(--accent);
}

.settings-input::placeholder {
  color: var(--text-muted);
}

/* Radio Group */
.settings-radio-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.settings-radio {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.2s;
}

.settings-radio:hover {
  background: var(--bg-hover);
}

.settings-radio input {
  display: none;
}

.radio-marker {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid var(--border-color);
  flex-shrink: 0;
  margin-top: 2px;
  transition: all 0.2s;
}

.settings-radio input:checked + .radio-marker {
  border-color: var(--accent);
  background: var(--accent);
  box-shadow: inset 0 0 0 4px var(--bg-tertiary);
}

.radio-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.radio-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
}

.radio-description {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
}

/* Status Box */
.settings-status-box {
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  margin: var(--spacing-md) 0;
}

.status-checking,
.status-ready,
.status-info {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-sm);
  font-size: var(--font-size-sm);
}

.status-checking {
  color: var(--text-muted);
}

.status-ready {
  color: var(--color-success);
  background: rgba(34, 197, 94, 0.1);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-md);
}

.status-info {
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-md);
}

.status-subtext {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-top: 2px;
}

/* Settings Button */
.settings-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.settings-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.settings-btn.danger {
  color: var(--color-error);
}

.settings-btn.danger:hover {
  background: var(--color-error);
  color: white;
}

.settings-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
